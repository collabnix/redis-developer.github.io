{"remainingRequest":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/babel-loader/lib/index.js??ref--11-1!/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/mdx-loader/src/index.js??ref--11-2!/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js??ref--11-3!/Users/ajeetraina/projects/8sep/redis-developer.github.io/docs/develop/java/spring/redis-and-spring-course/lesson_8/index-lesson_8.mdx","dependencies":[{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/docs/develop/java/spring/redis-and-spring-course/lesson_8/index-lesson_8.mdx","mtime":1631077488451},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/.docusaurus/docusaurus-plugin-content-docs/default/site-docs-develop-java-spring-redis-and-spring-course-lesson-8-index-lesson-8-mdx-131.json","mtime":1631077870284},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1631077703630},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/babel-loader/lib/index.js","mtime":1631077703341},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/mdx-loader/src/index.js","mtime":1631077777797},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js","mtime":1631077776334}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9leHRlbmRzIGZyb20iL1VzZXJzL2FqZWV0cmFpbmEvcHJvamVjdHMvOHNlcC9yZWRpcy1kZXZlbG9wZXIuZ2l0aHViLmlvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzIjtpbXBvcnQgUmVhY3QgZnJvbSdyZWFjdCc7aW1wb3J0e21keH1mcm9tJ0BtZHgtanMvcmVhY3QnO2V4cG9ydCBjb25zdCBmcm9udE1hdHRlcj17aWQ6J2luZGV4LWxlc3Nvbl84Jyx0aXRsZTonUmVjb21tZW5kYXRpb25zIHdpdGggUmVkaXNHcmFwaCcsc2lkZWJhcl9sYWJlbDonUmVjb21tZW5kYXRpb25zIHcvIFJlZGlzR3JhcGgnLHNsdWc6Jy9kZXZlbG9wL2phdmEvcmVkaXMtYW5kLXNwcmluZy1jb3Vyc2UvbGVzc29uXzgnfTtleHBvcnQgY29uc3QgbWV0YWRhdGE9eyJ1bnZlcnNpb25lZElkIjoiZGV2ZWxvcC9qYXZhL3NwcmluZy9yZWRpcy1hbmQtc3ByaW5nLWNvdXJzZS9sZXNzb25fOC9pbmRleC1sZXNzb25fOCIsImlkIjoiZGV2ZWxvcC9qYXZhL3NwcmluZy9yZWRpcy1hbmQtc3ByaW5nLWNvdXJzZS9sZXNzb25fOC9pbmRleC1sZXNzb25fOCIsImlzRG9jc0hvbWVQYWdlIjpmYWxzZSwidGl0bGUiOiJSZWNvbW1lbmRhdGlvbnMgd2l0aCBSZWRpc0dyYXBoIiwiZGVzY3JpcHRpb24iOiJPYmplY3RpdmVzIiwic291cmNlIjoiQHNpdGUvZG9jcy9kZXZlbG9wL2phdmEvc3ByaW5nL3JlZGlzLWFuZC1zcHJpbmctY291cnNlL2xlc3Nvbl84L2luZGV4LWxlc3Nvbl84Lm1keCIsInNsdWciOiIvZGV2ZWxvcC9qYXZhL3JlZGlzLWFuZC1zcHJpbmctY291cnNlL2xlc3Nvbl84IiwicGVybWFsaW5rIjoiL2RldmVsb3AvamF2YS9yZWRpcy1hbmQtc3ByaW5nLWNvdXJzZS9sZXNzb25fOCIsImVkaXRVcmwiOiJodHRwczovL2dpdGh1Yi5jb20vcmVkaXMtZGV2ZWxvcGVyL3JlZGlzLWRldmVsb3Blci9lZGl0L21hc3Rlci9kb2NzL2RldmVsb3AvamF2YS9zcHJpbmcvcmVkaXMtYW5kLXNwcmluZy1jb3Vyc2UvbGVzc29uXzgvaW5kZXgtbGVzc29uXzgubWR4IiwidmVyc2lvbiI6ImN1cnJlbnQiLCJzaWRlYmFyX2xhYmVsIjoiUmVjb21tZW5kYXRpb25zIHcvIFJlZGlzR3JhcGgiLCJzaWRlYmFyIjoiZG9jcyIsInByZXZpb3VzIjp7InRpdGxlIjoiU2VhcmNoIHdpdGggUmVkaVNlYXJjaCIsInBlcm1hbGluayI6Ii9kZXZlbG9wL2phdmEvcmVkaXMtYW5kLXNwcmluZy1jb3Vyc2UvbGVzc29uXzcifSwibmV4dCI6eyJ0aXRsZSI6IkNhY2hpbmcgUkVTVCBTZXJ2aWNlcyB3aXRoIFJlZGlzIiwicGVybWFsaW5rIjoiL2RldmVsb3AvamF2YS9yZWRpcy1hbmQtc3ByaW5nLWNvdXJzZS9sZXNzb25fOSJ9fTsvKiBAanN4UnVudGltZSBjbGFzc2ljICovIC8qIEBqc3ggbWR4ICovaW1wb3J0IHVzZUJhc2VVcmwgZnJvbSdAZG9jdXNhdXJ1cy91c2VCYXNlVXJsJztleHBvcnQgY29uc3QgdG9jPVt7dmFsdWU6J09iamVjdGl2ZXMnLGlkOidvYmplY3RpdmVzJyxjaGlsZHJlbjpbXX0se3ZhbHVlOidBZ2VuZGEnLGlkOidhZ2VuZGEnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0dyYXBocycsaWQ6J2dyYXBocycsY2hpbGRyZW46W119LHt2YWx1ZTonUmVkaXMgR3JhcGgnLGlkOidyZWRpcy1ncmFwaCcsY2hpbGRyZW46W119LHt2YWx1ZTonTm9kZXMnLGlkOidub2RlcycsY2hpbGRyZW46W119LHt2YWx1ZTonUmVkaXNJbnNpZ2h0OiBBIFZpc3VhbCBNYW5hZ2VtZW50IFRvb2wgZm9yIFJlZGlzJyxpZDoncmVkaXNpbnNpZ2h0LWEtdmlzdWFsLW1hbmFnZW1lbnQtdG9vbC1mb3ItcmVkaXMnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0Egd2FybS11cCB3aXRoIEN5cGhlcicsaWQ6J2Etd2FybS11cC13aXRoLWN5cGhlcicsY2hpbGRyZW46W119LHt2YWx1ZTonVXNpbmcgUmVkaXMgR3JhcGggaW4gSmF2YScsaWQ6J3VzaW5nLXJlZGlzLWdyYXBoLWluLWphdmEnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0NyZWF0aW5nIHRoZSBSZWNvbW1lbmRhdGlvbnMgU2VydmljZScsaWQ6J2NyZWF0aW5nLXRoZS1yZWNvbW1lbmRhdGlvbnMtc2VydmljZScsY2hpbGRyZW46W119LHt2YWx1ZTonVGhlIFJlY29tbWVuZGF0aW9ucyBDb250cm9sbGVyJyxpZDondGhlLXJlY29tbWVuZGF0aW9ucy1jb250cm9sbGVyJyxjaGlsZHJlbjpbXX1dO2NvbnN0IGxheW91dFByb3BzPXt0b2N9O2NvbnN0IE1EWExheW91dD0id3JhcHBlciI7ZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTURYQ29udGVudCh7Y29tcG9uZW50cywuLi5wcm9wc30pe3JldHVybiBtZHgoTURYTGF5b3V0LF9leHRlbmRzKHt9LGxheW91dFByb3BzLHByb3BzLHtjb21wb25lbnRzOmNvbXBvbmVudHMsbWR4VHlwZToiTURYTGF5b3V0In0pLG1keCgiaDMiLHsiaWQiOiJvYmplY3RpdmVzIn0sYE9iamVjdGl2ZXNgKSxtZHgoInAiLG51bGwsYEJ1aWxkIGEgc2ltcGxlIGJ1dCBwb3dlcmZ1bCBncmFwaC1iYXNlZCByZWNvbW1lbmRhdGlvbiBlbmdpbmUgaW4gdGhlIFJlZGkyUmVhZCBhcHBsaWNhdGlvbi5gKSxtZHgoImgzIix7ImlkIjoiYWdlbmRhIn0sYEFnZW5kYWApLG1keCgicCIsbnVsbCxgSW4gdGhpcyBsZXNzb24sIHN0dWRlbnRzIHdpbGwgbGVhcm46YCksbWR4KCJ1bCIsbnVsbCxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgSG93IHRvIHVzZSBSZWRpc0dyYXBoIGluIGEgU3ByaW5nIEJvb3QgYXBwbGljYXRpb24gdG8gY29uc3RydWN0IGEgR3JhcGggZnJvbSBtb2RlbCBkYXRhIHVzaW5nIHRoZSBKUmVkaXNHcmFwaCBjbGllbnQgbGlicmFyeS5gKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgSG93IHRvIHF1ZXJ5IGRhdGEgdXNpbmcgdGhlIEN5cGhlciBxdWVyeSBsYW5ndWFnZS4KSWYgeW91IGdldCBzdHVjazpgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgVGhlIHByb2dyZXNzIG1hZGUgaW4gdGhpcyBsZXNzb24gaXMgYXZhaWxhYmxlIG9uIHRoZSByZWRpMnJlYWQgZ2l0aHViIHJlcG9zaXRvcnkgYXQgYCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJsaSJ9LHsiaHJlZiI6Imh0dHBzOi8vZ2l0aHViLmNvbS9yZWRpcy1kZXZlbG9wZXIvcmVkaTJyZWFkL3RyZWUvY291cnNlL21pbGVzdG9uZS04In0pLGBodHRwczovL2dpdGh1Yi5jb20vcmVkaXMtZGV2ZWxvcGVyL3JlZGkycmVhZC90cmVlL2NvdXJzZS9taWxlc3RvbmUtOGApKSksbWR4KCJoMyIseyJpZCI6ImdyYXBocyJ9LGBHcmFwaHNgKSxtZHgoInAiLG51bGwsYEdyYXBoIGRhdGFiYXNlcyBhcmUgY29tcG9zZWQgb2Ygbm9kZXMgYW5kIHJlbGF0aW9uc2hpcHMuIFRoZXNlIGRhdGFiYXNlcyBleGNlbCBhdCBtYW5hZ2luZyBoaWdobHkgY29ubmVjdGVkIGRhdGEuCk5vZGVzIHJlcHJlc2VudCBlbnRpdGllcyAocGFydHksIHBsYWNlLCB0aGluZywgY2F0ZWdvcnksIG1vbWVudC1pbi10aW1lKSByZWxhdGVkIHRvIG90aGVyIGVudGl0aWVzLgpSZWxhdGlvbnNoaXBzIGNvbm5lY3Qgbm9kZXMuIFRoZXkgcmVwcmVzZW50IGFuIGFzc29jaWF0aW9uIGJldHdlZW4gbm9kZXMgdGhhdCBhcmUgaW1wb3J0YW50IHRvIHlvdXIgZG9tYWluLmApLG1keCgiaDMiLHsiaWQiOiJyZWRpcy1ncmFwaCJ9LGBSZWRpcyBHcmFwaGApLG1keCgicCIsbnVsbCxgUmVkaXMgR3JhcGggaXMgYSBsb3ctbGF0ZW5jeSBncmFwaCBkYXRhYmFzZSBiYXNlZCBvbiB0aGUgcHJvcGVydHkgZ3JhcGggbW9kZWwgYnVpbHQgYXMgYSBSZWRpcyBtb2R1bGUuCkxpa2UgYWxsIGdyYXBocywgYSBwcm9wZXJ0eSBncmFwaCBoYXMgbm9kZXMgYW5kIHJlbGF0aW9uc2hpcHMuIEhvd2V2ZXIsIGl0IGFkZHMgZXh0cmEgZXhwcmVzc2l2ZW5lc3MgYnkgcHJvdmlkaW5nOmApLG1keCgidWwiLG51bGwsbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYE5vZGVzOiBHcmFwaCBkYXRhIGVudGl0aWVzYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYFJlbGF0aW9uc2hpcHM6IENvbm5lY3Qgbm9kZXMgKGhhcyBkaXJlY3Rpb24gYW5kIGEgdHlwZSlgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgUHJvcGVydGllczogU3RvcmVzIGRhdGEgaW4ga2V5LXZhbHVlIHBhaXJzIGluIG5vZGVzIGFuZCByZWxhdGlvbnNoaXBzYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYExhYmVsczogR3JvdXBzIG5vZGVzIGFuZCByZWxhdGlvbnNoaXBzIChvcHRpb25hbClgKSksbWR4KCJwIixudWxsLGBSZWRpcyBHcmFwaCBtZWV0cyB0aGUgdHdvIG1vc3QgZXNzZW50aWFsIHJlcXVpcmVtZW50cyBvZiBhIGdyYXBoIGRhdGFiYXNlOgpOYXRpdmUgR3JhcGggU3RvcmFnZTogVXNlcyBhIFJlZGlzLW5hdGl2ZSBvcHRpbWl6ZWQgZ3JhcGggZGF0YSBzdHJ1Y3R1cmUgKHNwYXJzZSBhZGphY2VuY3kgbWF0cmljZXMpLgpOYXRpdmUgR3JhcGggUHJvY2Vzc2luZzogSW5kZXgtZnJlZSBhZGphY2VuY3kgYW5kIGxpbmVhciBhbGdlYnJhIHRvIHF1ZXJ5IHRoZSBncmFwaC4KSXQgc3VwcG9ydHMgYSBsYXJnZSBzdWJzZXQgb2YgdGhlIEN5cGhlciBRdWVyeSBMYW5ndWFnZSwgYW4gb3BlbiBzdGFuZGFyZCBzdXBwb3J0ZWQgYnkgc2V2ZXJhbCBncmFwaCBkYXRhYmFzZXMsIHRoZSBDeXBoZXIgR3JhcGggUXVlcnkgTGFuZ3VhZ2UuClRoZSBDeXBoZXIgUXVlcnkgTGFuZ3VhZ2UgaXMgYSBTUUwtaW5zcGlyZWQgcGF0dGVybi1tYXRjaGluZyBsYW5ndWFnZSB3aXRoIGFuIGVhc3kgdG8gZ3Jhc3AgdmlzdWFsIGFzcGVjdCBkdWUgdG8gaXRzIHVzZSBvZiBBU0NJSS1BcnQgdG8gZWFzaWx5IHZpc3VhbCBncmFwaCByZWxhdGlvbnNoaXBzIGluIHRleHQuIFRoZSBzcGVjaWZpY2F0aW9uIGlzIGJlY29taW5nIGFuIGluZHVzdHJ5IHN0YW5kYXJkIGFtb25nIGdyYXBoIGRhdGFiYXNlIHZlbmRvcnMgKHNlZSBvcGVuQ3lwaGVyKS5gKSxtZHgoImgzIix7ImlkIjoibm9kZXMifSxgTm9kZXNgKSxtZHgoInAiLG51bGwsYE5vZGVzIGFyZSBlbmNsb3NlZCBieSBwYXJlbnRoZXNpcy4gRm9yIGV4YW1wbGU6CmAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAoKWApKSxtZHgoInAiLG51bGwsYEl0IGlzIHRoZSBzaW1wbGVzdCBvZiBub2RlczsgYW4gYW5vbnltb3VzIG5vZGUgKHdpdGggbm8gbGFiZWwgb3IgdmFyaWFibGUpLCBhcyBhIHBhdHRlcm4tbWF0Y2hpbmcgZW50aXR5LCBpdCB3aWxsIG1hdGNoIGFueSBub2RlIGluIHRoZSBkYXRhYmFzZS4KYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYCg6QWN0b3IpYCkpLG1keCgicCIsbnVsbCxgUmVwcmVzZW50cyBhIG5vZGUgdW5kZXIgdGhlIGxhYmVsIOKAnEFjdG9y4oCdOyB5b3UgY2FuIHRoaW5rIG9mIGl0IGFzIHRoZSBub2Rl4oCZcyBjbGFzcy4KYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYChhOkFjdG9yKWApKSxtZHgoInAiLG51bGwsYEluIHRoaXMgZXhhbXBsZSwg4oCcYeKAnSBpcyBhbiBhbGlhcyBmb3IgdGhlIG5vZGUuIFRoaW5rIG9mIGl0IGFzIGEgdmFyaWFibGUgdGhhdCB5b3UgY2FuIHVzZSBpbiBhIHF1ZXJ5LCBqdXN0IGxpa2UgaW4gU1FMLgpgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgKGE6QWN0b3Ige25hbWU6J0thdGhyeW4gSGFobid9KWApKSxtZHgoInAiLG51bGwsYFRoZSBKU09OLWxvb2tpbmcgb2JqZWN0IGluIGN1cmx5IGJyYWNrZXRzIGlzIGEgbm9kZSBwcm9wZXJ0eS4gVGhlIHByb3BlcnRpZXMgYXJlIGF0dGFjaGVkIHRvIHRoZSBub2RlIHVwb24gY3JlYXRpb24uIFdoZW4gdXNlZCBpbiBhIHF1ZXJ5LCB0aGV5IHNlcnZlIGFzIHBhdHRlcm4gbWF0Y2hpbmcuClJlbGF0aW9uc2hpcHMKUmVsYXRpb25zaGlwcyBhcmUgcmVwcmVzZW50ZWQgYnkgYXJyb3dzICgtLT4gb3IgPC0tKSBiZXR3ZWVuIHR3byBub2Rlcy4gVGhlIHR5cGUgb2YgcmVsYXRpb25zaGlwIGlzIGVuY2xvc2VkIGluIHNxdWFyZWQgYnJhY2tldHMuCmAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAoYTpBY3RvciB7bmFtZTonS2F0aHJ5biBIYWhuJ30pLVs6QUNUU10tPihzOlNob3cge25hbWU6J1dhbmRhVmlzaW9uJ30pYCkpLG1keCgicCIsbnVsbCxgVGhlIGFib3ZlIHNuaXBwZXQgY291bGQgYmUgdXNlZCB0byBjcmVhdGUgdGhlIHJlbGF0aW9uc2hpcCBpZiB1c2VkIHdpdGggdGhlIEdSQVBILkNSRUFURSBtZXRob2QsIGZvciBleGFtcGxlLiBJZiB0aGUgbm9kZXMgZGlkIG5vdCBleGlzdCwgdGhleSB3b3VsZCBiZSBjcmVhdGVkLCBvciBpZiB0aGV5IGV4aXN0ZWQsIGl0IHdvdWxkIGp1c3QgdXNlIHRoZSBub2RlIHByb3BlcnRpZXMgdG8gcGF0dGVybiBtYXRjaC5gKSxtZHgoImgzIix7ImlkIjoicmVkaXNpbnNpZ2h0LWEtdmlzdWFsLW1hbmFnZW1lbnQtdG9vbC1mb3ItcmVkaXMifSxgUmVkaXNJbnNpZ2h0OiBBIFZpc3VhbCBNYW5hZ2VtZW50IFRvb2wgZm9yIFJlZGlzYCksbWR4KCJwIixudWxsLGBVbnRpbCBub3csIHdlIGhhdmUgYmVlbiB1c2luZyB0aGUgUmVkaXMgQ0xJLCBjdXJsLCBhbmQgdGhlIG91dHB1dCBvZiBvdXIgSmF2YSBwcm9ncmFtcyB0byBpbnRlcmFjdCB3aXRoIFJlZGlzLmApLG1keCgicCIsbnVsbCxgSWYgdGhlcmUgaXMgb25lIHBsYWNlIHdoZXJlIHdlIGNhbiB1c2UgdmlzdWFsaXphdGlvbiBpcyB3aXRoIGdyYXBoIGRhdGEuIFJlZGlzSW5zaWdodCBpcyBhIGZyZWUgcHJvZHVjdCBmcm9tIFJlZGlzIExhYnMgdGhhdCBwcm92aWRlcyBhbiBpbnR1aXRpdmUgZ3JhcGhpY2FsIHVzZXIgaW50ZXJmYWNlIGZvciBtYW5hZ2luZyBSZWRpcyBkYXRhYmFzZXMuClJlZGlzSW5zaWdodCBhbHNvIHN1cHBvcnRzIHNvbWUgcG9wdWxhciBSZWRpcyBtb2R1bGVzLCBhbmQgd2UnbGwgdXNlIGl0IGluIHRoaXMgbGVzc29uIHRvIHZpc3VhbGl6ZSBvdXIgZ3JhcGhzLgpJZiB5b3Ugd2FudCB0byBnZXQgdGhlIGJlc3QgcG9zc2libGUgdW5kZXJzdGFuZGluZyBvZiB0aGUgbWF0ZXJpYWxzIGluIHRoaXMgY2hhcHRlciwgcGxlYXNlIGRvd25sb2FkIGFuZCBpbnN0YWxsIFJlZGlzSW5zaWdodC5gKSxtZHgoImgzIix7ImlkIjoiYS13YXJtLXVwLXdpdGgtY3lwaGVyIn0sYEEgd2FybS11cCB3aXRoIEN5cGhlcmApLG1keCgicCIsbnVsbCxgVHJ5IGluIHRoZSBSZWRpcyBDTEkKT2ssIGVub3VnaCB0aGVvcnksIGxldOKAmXMgZmlyZSB1cCB0aGUgUmVkaXMgQ0xJIGFuZCB0cnkgc29tZSBncmFwaCBtYWtpbmcgYW5kIHF1ZXJ5aW5nIChhbmQgbGF0ZXIgdmlzdWFsaXppbmcgaW4gUmVkaXNJbnNpZ2h0KS4KTGV04oCZcyBjcmVhdGUgYSBzdGFuZGFsb25lIG5vZGUgZm9yIGFuIEFjdG9yOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgMTI3LjAuMC4xOjYzNzk+IEdSQVBILlFVRVJZIGltZGItZ3JmICJDUkVBVEUgKDpBY3RvciB7bmFtZTogJ0thdGhyeW4gSGFobicsIG5pY2s6ICdrYSd9KSIKMSkgMSkgIkxhYmVscyBhZGRlZDogMSIKICAgMikgIk5vZGVzIGNyZWF0ZWQ6IDEiCiAgIDMpICJQcm9wZXJ0aWVzIHNldDogMiIKCkFuZCBhIHN0YW5kYWxvbmUgbm9kZSBmb3IgYSBUViBzaG93OgoxMjcuMC4wLjE6NjM3OT4gR1JBUEguUVVFUlkgaW1kYi1ncmYgIkNSRUFURSAoOlNob3cge25hbWU6ICdXYW5kYVZpc2lvbicsIG5pY2s6ICd3did9KSIKMSkgMSkgIkxhYmVscyBhZGRlZDogMSIKICAgMikgIk5vZGVzIGNyZWF0ZWQ6IDEiCiAgIDMpICJQcm9wZXJ0aWVzIHNldDogMiIKYCkpLG1keCgicCIsbnVsbCxgTm93IGxldOKAmXMgam9pbiB0aGVtIHdpdGggYSByZWxhdGlvbnNoaXAgb2YgdHlwZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgOkFDVFNgKSxgOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgMTI3LjAuMC4xOjYzNzk+IEdSQVBILlFVRVJZIGltZGItZ3JmICJNQVRDSCAoYTpBY3RvciB7bmljazogJ2thJ30pLCAoczpTaG93IHtuaWNrOiAnd3YnfSkgQ1JFQVRFIChhKS1bOkFDVFNdLT4ocykiCjEpIDEpICJSZWxhdGlvbnNoaXBzIGNyZWF0ZWQ6IDEiCmApKSxtZHgoInAiLG51bGwsYFRoZSBNQVRDSCBrZXl3b3JkIGluZGljYXRlcyBhIHBhdHRlcm4gbWF0Y2hpbmcgb3BlcmF0aW9uLiBZb3UgY2FuIGhhdmUgbXVsdGlwbGUgcGF0dGVybnMgaW4gYSBjb21tYW5kIHNlcGFyYXRlZCBsaXN0IGluIGEgc2luZ2xlIE1BVENIIG9yIG11bHRpcGxlIE1BVENIIGxpbmVzLiBWYXJpYWJsZXMgYXJlIHVzZWQgdG8g4oCcam9pbuKAnSBtdWx0aXBsZSBwYXR0ZXJucy4KTm90aWNlIHRoYXQgdGhlIFJlZGlzIEdyYXBoIEN5cGhlciBjb21tYW5kIHN0YXJ0cyB3aXRoOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgR1JBUEguUVVFUlkga2V5LW9mLXRoZS1ncmFwaCBjeXBoZXItcXVlcnkKYCkpLG1keCgicCIsbnVsbCxgRmlyc3QsIGxldOKAmXMgc2VlIHdoYXQgYXJlIHRoZSB1bmlxdWUgbGFiZWxzIChjbGFzc2VzKSBpbiB0aGUgZ3JhcGg6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1iYXNoIn0pLGAxMjcuMC4wLjE6NjM3OT4gR1JBUEguUVVFUlkgImltZGItZ3JmIiAibWF0Y2ggKG4pIHJldHVybiBkaXN0aW5jdCBsYWJlbHMobikiCjEpIDEpICJsYWJlbHMobikiCjIpIDEpIDEpICJBY3RvciIKICAgMikgMSkgIlNob3ciCiAgIDMpIDEpICJNb3ZpZSIKYCkpLG1keCgicCIsbnVsbCxgSW4gUmVkaXNJbnNpZ2h0OmApLG1keCgicCIsbnVsbCxtZHgoImltZyIse2FsdDoiUmVkaXNJbnNpZ2h0IixzcmM6cmVxdWlyZSgiIXVybC1sb2FkZXI/bGltaXQ9MTAwMDAmbmFtZT1hc3NldHMvaW1hZ2VzL1tuYW1lXS1baGFzaF0uW2V4dF0mZmFsbGJhY2s9ZmlsZS1sb2FkZXIhLi9pbWFnZXMvcmVkaXMtaW5zaWdodC5wbmciKS5kZWZhdWx0fSkpLG1keCgicCIsbnVsbCxgQXMgZXhwZWN0ZWQsIHRoZSB1bmlxdWUgbGFiZWxzIGFyZSDigJxBY3RvcizigJ0g4oCcTW92aWUs4oCdIGFuZCDigJxTaG93LuKAnQpOb3csIGV4ZWN1dGUgdGhlIGNvbW1hbmRzIGJlbG93LCBhbmQgdGhlbiB3ZSBjYW4gYXNrIHNvbWUgcXVlc3Rpb25zIG9mIHRoZSBkYXRhIHVzaW5nIEN5cGhlcjpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLWJhc2gifSksYEdSQVBILlFVRVJZIGltZGItZ3JmICJDUkVBVEUgKDpBY3RvciB7bmFtZTogJ1BhdWwgQmV0dGFueScsIG5pY2s6ICdwYid9KSIKR1JBUEguUVVFUlkgaW1kYi1ncmYgIkNSRUFURSAoOkFjdG9yIHtuYW1lOiAnUGF1bCBSdWRkJywgbmljazogJ3ByJ30pIgoKR1JBUEguUVVFUlkgaW1kYi1ncmYgIkNSRUFURSAoOlNob3cge25hbWU6ICdUaGUgU2hyaW5rIE5leHQgRG9vcicsIG5pY2s6ICd0c25kJ30pIgpHUkFQSC5RVUVSWSBpbWRiLWdyZiAiQ1JFQVRFICg6TW92aWUge25hbWU6ICdJcm9uIE1hbicsIG5pY2s6ICdpbSd9KSIKR1JBUEguUVVFUlkgaW1kYi1ncmYgIkNSRUFURSAoOk1vdmllIHtuYW1lOiAnT3VyIElkaW90IEJyb3RoZXInLCBuaWNrOiAnb2liJ30pIgpHUkFQSC5RVUVSWSBpbWRiLWdyZiAiQ1JFQVRFICg6TW92aWUge25hbWU6ICdDYXB0YWluIEFtZXJpY2E6IENpdmlsIFdhcicsIG5pY2s6ICdjYWN3J30pIgoKR1JBUEguUVVFUlkgaW1kYi1ncmYgIk1BVENIIChhOkFjdG9yIHtuaWNrOiAncGInfSksIChzOlNob3cge25pY2s6ICd3did9KSBDUkVBVEUgKGEpLVs6QUNUU10tPihzKSIKR1JBUEguUVVFUlkgaW1kYi1ncmYgIk1BVENIIChhOkFjdG9yIHtuaWNrOiAncGInfSksIChtOk1vdmllIHtuaWNrOiAnaW0nfSkgQ1JFQVRFIChhKS1bOkFDVFNdLT4obSkiCkdSQVBILlFVRVJZIGltZGItZ3JmICJNQVRDSCAoYTpBY3RvciB7bmljazogJ2thJ30pLCAobTpNb3ZpZSB7bmljazogJ29pYid9KSBDUkVBVEUgKGEpLVs6QUNUU10tPihtKSIKR1JBUEguUVVFUlkgaW1kYi1ncmYgIk1BVENIIChhOkFjdG9yIHtuaWNrOiAncHInfSksIChtOk1vdmllIHtuaWNrOiAnb2liJ30pIENSRUFURSAoYSktWzpBQ1RTXS0+KG0pIgpHUkFQSC5RVUVSWSBpbWRiLWdyZiAiTUFUQ0ggKGE6QWN0b3Ige25pY2s6ICdwcid9KSwgKG06TW92aWUge25pY2s6ICdjYWN3J30pIENSRUFURSAoYSktWzpBQ1RTXS0+KG0pIgpHUkFQSC5RVUVSWSBpbWRiLWdyZiAiTUFUQ0ggKGE6QWN0b3Ige25pY2s6ICdwcid9KSwgKHM6U2hvdyB7bmljazogJ3RzbmQnfSkgQ1JFQVRFIChhKS1bOkFDVFNdLT4ocykiCkdSQVBILlFVRVJZIGltZGItZ3JmICJNQVRDSCAoYTpBY3RvciB7bmljazogJ2thJ30pLCAoczpTaG93IHtuaWNrOiAndHNuZCd9KSBDUkVBVEUgKGEpLVs6QUNUU10tPihzKSIKYCkpLG1keCgicCIsbnVsbCxgV2hhdCBhcmUgdGhlIHJlbGF0aW9uc2hpcHMgaW4gb3VyIGdyYXBoP2ApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgMTI3LjAuMC4xOjYzNzk+IEdSQVBILlFVRVJZICJpbWRiLWdyZiIgIk1BVENIICgpLVtlXS0+KCkgUkVUVVJOIGRpc3RpbmN0IHR5cGUoZSkiCjEpIDEpICJ0eXBlKGUpIgoyKSAxKSAxKSAiQUNUUyIKYCkpLG1keCgicCIsbnVsbCxgQ291bnQgdGhlIGxhYmVscyBpbiB0aGUgZ3JhcGg6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1iYXNoIn0pLGAxMjcuMC4wLjE6NjM3OT4gR1JBUEguUVVFUlkgImltZGItZ3JmIiAiTUFUQ0ggKG4pIFJFVFVSTiBkaXN0aW5jdCBsYWJlbHMobiksIGNvdW50KG4pIgoxKSAxKSAibGFiZWxzKG4pIgogICAyKSAiY291bnQobikiCjIpIDEpIDEpICJBY3RvciIKICAgICAgMikgKGludGVnZXIpIDMKICAgMikgMSkgIk1vdmllIgogICAgICAyKSAoaW50ZWdlcikgMwogICAzKSAxKSAiU2hvdyIKICAgICAgMikgKGludGVnZXIpIDIKYCkpLG1keCgicCIsbnVsbCxgUmV0dXJuIHRoZSBuYW1lIG9mIGFsbCBhY3RvcnMgdGhhdCBhY3RlZCBpbiDigJhUaGUgU2hyaW5rIE5leHQgRG9vcuKAmTpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLWJhc2gifSksYDEyNy4wLjAuMTo2Mzc5PiBHUkFQSC5RVUVSWSBpbWRiLWdyZiAiTUFUQ0ggKGE6QWN0b3IpLVs6QUNUU10tPig6U2hvdyB7bmFtZTonVGhlIFNocmluayBOZXh0IERvb3InfSkgUkVUVVJOIGEubmFtZSIKMSkgMSkgImEubmFtZSIKMikgMSkgMSkgIkthdGhyeW4gSGFobiIKICAgMikgMSkgIlBhdWwgUnVkZCIKYCkpLG1keCgicCIsbnVsbCxgRmluZCBhbnkgdHdvIGFjdG9ycyB0aGF0IHdvcmtlZCB0b2dldGhlciBpbiBhIG1vdmllOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgMTI3LjAuMC4xOjYzNzk+IEdSQVBILlFVRVJZICJpbWRiLWdyZiIgIk1BVENIICAgICAgICAgICAgICAgICAgKGExOkFjdG9yKS1bOkFDVFNdLT4obTpNb3ZpZSk8LVs6QUNUU10tKGEyOkFjdG9yKQpXSEVSRSBhMSA8PiBhMiBBTkQgaWQoYTEpID4gaWQoYTIpClJFVFVSTiBtLm5hbWUsIGExLm5hbWUsIGEyLm5hbWUiCjEpIDEpICJtLm5hbWUiCiAgIDIpICJhMS5uYW1lIgogICAzKSAiYTIubmFtZSIKMikgMSkgMSkgIk91ciBJZGlvdCBCcm90aGVyIgogICAgICAyKSAiUGF1bCBSdWRkIgogICAgICAzKSAiS2F0aHJ5biBIYWhuIgpgKSksbWR4KCJwIixudWxsLGBUaGF0IGxhc3QgcXVlcnkgZ2l2ZXMgdXMgYSBnbGltcHNlIGludG8gdGhlIHBvd2VyIG9mIHRoZSBDeXBoZXIgUXVlcnkgTGFuZ3VhZ2UuIFdlIGNhbiBncmFwaGljYWxseSBkcmF3IHRoZSBjb25uZWN0aW9ucyBiZXR3ZWVuIHRoZSB0d28gYWN0b3JzLCByZW1vdmUgYW55IGR1cGxpY2F0ZWQgKHRoZSBwZXJtdXRhdGlvbnMgcHJvYmxlbSkgYnkgbWFraW5nIHN1cmUgd2UgZG9u4oCZdCBtYXRjaCBvbiB0aGUgc2FtZSBub2RlIChQYXVsIFJ1ZGQgYW5kIFBhdWwgUnVkZCkgYW5kIHZhcmlhdGlvbnMgb2YgdGhlIHNhbWUgcGFpciAoUGF1bCBSdWRkIGFuZCBLYXRocnluIEhhaG4gdnMuIEthdGhyeW4gSGFobiBhbmQgUGF1bCBSdWRkKSBieSBvcmRlcmluZyB0aGUgcGFpciB1c2luZyB0aGUgaWQgZnVuY3Rpb24uCkNyZWF0aW5nIHRoZSBSZWRpMlJlYWQgR3JhcGgKTm93IHRoYXQgd2UgaGF2ZSBhIGN1cnNvcnkgdW5kZXJzdGFuZGluZyBvZiBSZWRpcyBHcmFwaCBhbmQgdGhlIEN5cGhlciBRdWVyeSBMYW5ndWFnZSwgbGV04oCZcyBidWlsZCB0aGUgZ3JhcGggdGhhdCB3aWxsIHBvd2VyIG91ciByZWNvbW1lbmRhdGlvbnMgaW4gUmVkaTJSZWFkLgpXZSB3aWxsIGNyZWF0ZSBhIGdyYXBoIGNvbnRhaW5pbmcgdGhlIGZvbGxvd2luZyByZWxhdGlvbnNoaXBzOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgQXV0aG9yIC0+IEFVVEhPUkVEIC0+IEJvb2sKQm9vayAtPiBJTiAtPiBDYXRlZ29yeQpVc2VyIC0+IFJBVEVEIC0+IEJvb2sKVXNlciAtPiBQVVJDSEFTRUQgLT4gQm9vawpgKSksbWR4KCJoMyIseyJpZCI6InVzaW5nLXJlZGlzLWdyYXBoLWluLWphdmEifSxgVXNpbmcgUmVkaXMgR3JhcGggaW4gSmF2YWApLG1keCgicCIsbnVsbCxgVG8gY3JlYXRlIGFuZCBxdWVyeSBncmFwaHMgaW4gUmVkaTJSZWFkIHdlIHdpbGwgdXNlIHRoZSBKUmVkaXNHcmFwaCBjbGllbnQgbGlicmFyeSBmb3IgUmVkaXMgR3JhcGggKGAsbWR4KCJhIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicCJ9LHsiaHJlZiI6Imh0dHBzOi8vZ2l0aHViLmNvbS9SZWRpc0dyYXBoL0pSZWRpc0dyYXBoIn0pLGBodHRwczovL2dpdGh1Yi5jb20vUmVkaXNHcmFwaC9KUmVkaXNHcmFwaGApLGApIGJ1aWx0IG9uIHRvcCBvZiB0aGUgcG9wdWxhciBKZWRpcyBjbGllbnQgbGlicmFyeSAoYCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJocmVmIjoiaHR0cHM6Ly9naXRodWIuY29tL3JlZGlzL2plZGlzIn0pLGBodHRwczovL2dpdGh1Yi5jb20vcmVkaXMvamVkaXNgKSxgKQpBZGRpbmcgdGhlIEpSZWRpc0dyYXBoIGRlcGVuZGVuY3kKSW4geW91ciBNYXZlbiBwb20ueG1sLCBhZGQgdGhlIGZvbGxvd2luZyBkZXBlbmRlbmN5OmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UteG1sIn0pLGA8ZGVwZW5kZW5jeT4KICA8Z3JvdXBJZD5jb20ucmVkaXNsYWJzPC9ncm91cElkPgogIDxhcnRpZmFjdElkPmpyZWRpc2dyYXBoPC9hcnRpZmFjdElkPgogIDx2ZXJzaW9uPjIuMy4wPC92ZXJzaW9uPgo8L2RlcGVuZGVuY3k+CmApKSxtZHgoImg0Iix7ImlkIjoiY29tbWFuZGxpbmVydW5uZXIifSxgQ29tbWFuZExpbmVSdW5uZXJgKSxtZHgoInAiLG51bGwsYFRvIGNyZWF0ZSBvdXIgZ3JhcGggd2XigJlsbCB1c2UgdGhlIG5vdyBmYW1pbGlhciBDb21tYW5kTGluZVJ1bm5lciByZWNpcGUuIFdlIHdpbGwga2VlcCB0aGUgbmFtZSBvZiB0aGUgY3JlYXRlZCBncmFwaCBpbiB0aGUgYXBwbGljYXRpb25zIHByb3BlcnR5IGZpZWxkIGFzIHNob3duOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgYXBwLmdyYXBoSWQ9cmVkaTJyZWFkLWdyZgpgKSksbWR4KCJwIixudWxsLGBOZXh0LCBjcmVhdGUgdGhlIHNyYy9tYWluL2phdmEvY29tL3JlZGlzbGFicy9lZHUvcmVkaTJyZWFkL2Jvb3QvQ3JlYXRlR3JhcGguamF2YSBmaWxlIGFuZCBhZGQgdGhlIGNvbnRlbnRzIGFzIGZvbGxvd3M6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1qYXZhIn0pLGBwYWNrYWdlIGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5ib290OwoKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBvcnQgamF2YS51dGlsLlNldDsKCmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5BdXRvd2lyZWQ7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5WYWx1ZTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYm9vdC5Db21tYW5kTGluZVJ1bm5lcjsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuY29yZS5hbm5vdGF0aW9uLk9yZGVyOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLnJlZGlzLmNvcmUuUmVkaXNUZW1wbGF0ZTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5Db21wb25lbnQ7CgppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLnJlcG9zaXRvcmllcy5Cb29rUmF0aW5nUmVwb3NpdG9yeTsKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5yZXBvc2l0b3JpZXMuQm9va1JlcG9zaXRvcnk7CmltcG9ydCBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQucmVwb3NpdG9yaWVzLkNhdGVnb3J5UmVwb3NpdG9yeTsKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5yZXBvc2l0b3JpZXMuVXNlclJlcG9zaXRvcnk7CmltcG9ydCBjb20ucmVkaXNsYWJzLnJlZGlzZ3JhcGguaW1wbC5hcGkuUmVkaXNHcmFwaDsKCmltcG9ydCBsb21ib2suZXh0ZXJuLnNsZjRqLlNsZjRqOwoKQENvbXBvbmVudApAT3JkZXIoOCkKQFNsZjRqCnB1YmxpYyBjbGFzcyBDcmVhdGVHcmFwaCBpbXBsZW1lbnRzIENvbW1hbmRMaW5lUnVubmVyIHsKCiAgQEF1dG93aXJlZAogIHByaXZhdGUgUmVkaXNUZW1wbGF0ZTxTdHJpbmcsIFN0cmluZz4gcmVkaXNUZW1wbGF0ZTsKCiAgQEF1dG93aXJlZAogIHByaXZhdGUgVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnk7CgogIEBBdXRvd2lyZWQKICBwcml2YXRlIEJvb2tSZXBvc2l0b3J5IGJvb2tSZXBvc2l0b3J5OwoKICBAQXV0b3dpcmVkCiAgcHJpdmF0ZSBCb29rUmF0aW5nUmVwb3NpdG9yeSBib29rUmF0aW5nUmVwb3NpdG9yeTsKCiAgQEF1dG93aXJlZAogIHByaXZhdGUgQ2F0ZWdvcnlSZXBvc2l0b3J5IGNhdGVnb3J5UmVwb3NpdG9yeTsKCiAgQFZhbHVlKCJcJHthcHAuZ3JhcGhJZH0iKQogIHByaXZhdGUgU3RyaW5nIGdyYXBoSWQ7CgogIEBPdmVycmlkZQogIHB1YmxpYyB2b2lkIHJ1bihTdHJpbmcuLi4gYXJncykgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICBpZiAoIXJlZGlzVGVtcGxhdGUuaGFzS2V5KGdyYXBoSWQpKSB7CiAgICAgIHRyeSAoUmVkaXNHcmFwaCBncmFwaCA9IG5ldyBSZWRpc0dyYXBoKCkpIHsKICAgICAgICAvLyBjcmVhdGUgYW4gaW5kZXggZm9yIEJvb2tzIG9uIGlkCiAgICAgICAgZ3JhcGgucXVlcnkoZ3JhcGhJZCwgIkNSRUFURSBJTkRFWCBPTiA6Qm9vayhpZCkiKTsKICAgICAgICBncmFwaC5xdWVyeShncmFwaElkLCAiQ1JFQVRFIElOREVYIE9OIDpDYXRlZ29yeShpZCkiKTsKICAgICAgICBncmFwaC5xdWVyeShncmFwaElkLCAiQ1JFQVRFIElOREVYIE9OIDpBdXRob3IobmFtZSkiKTsKICAgICAgICBncmFwaC5xdWVyeShncmFwaElkLCAiQ1JFQVRFIElOREVYIE9OIDpVc2VyKGlkKSIpOwoKICAgICAgICBTZXQ8U3RyaW5nPiBhdXRob3JzID0gbmV3IEhhc2hTZXQ8U3RyaW5nPigpOwoKICAgICAgICAvLyBmb3IgZWFjaCBjYXRlZ29yeSBjcmVhdGUgYSBncmFwaCBub2RlCiAgICAgICAgY2F0ZWdvcnlSZXBvc2l0b3J5LmZpbmRBbGwoKS5mb3JFYWNoKGMgLT4gewogICAgICAgICAgZ3JhcGgucXVlcnkoZ3JhcGhJZCwgU3RyaW5nLmZvcm1hdCgiQ1JFQVRFICg6Q2F0ZWdvcnkge2lkOiBcXCIlc1xcIiwgbmFtZTogXFwiJXNcXCJ9KSIsIGMuZ2V0SWQoKSwgYy5nZXROYW1lKCkpKTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gZm9yIGVhY2ggYm9vayBjcmVhdGUgYSBncmFwaCBub2RlCiAgICAgICAgYm9va1JlcG9zaXRvcnkuZmluZEFsbCgpLmZvckVhY2goYiAtPiB7CiAgICAgICAgICBncmFwaC5xdWVyeShncmFwaElkLCBTdHJpbmcuZm9ybWF0KCJDUkVBVEUgKDpCb29rIHtpZDogXFwiJXNcXCIsIHRpdGxlOiBcXCIlc1xcIn0pIiwgYi5nZXRJZCgpLCBiLmdldFRpdGxlKCkpKTsKICAgICAgICAgIC8vIGZvciBlYWNoIGF1dGhvciBjcmVhdGUgYW4gQVVUSE9SRUQgcmVsYXRpb25zaGlwIHRvIHRoZSBib29rCiAgICAgICAgICBpZiAoYi5nZXRBdXRob3JzKCkgIT0gbnVsbCkgewogICAgICAgICAgICBiLmdldEF1dGhvcnMoKS5mb3JFYWNoKGEgLT4gewogICAgICAgICAgICAgIGlmICghYXV0aG9ycy5jb250YWlucyhhKSkgewogICAgICAgICAgICAgICAgZ3JhcGgucXVlcnkoZ3JhcGhJZCwgU3RyaW5nLmZvcm1hdCgiQ1JFQVRFICg6QXV0aG9yIHtuYW1lOiBcXCIlc1xcIn0pIiwgYSkpOwogICAgICAgICAgICAgICAgYXV0aG9ycy5hZGQoYSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGdyYXBoLnF1ZXJ5KGdyYXBoSWQsIFN0cmluZy5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJNQVRDSCAoYTpBdXRob3Ige25hbWU6IFxcIiVzXFwifSksIChiOkJvb2sge2lkOiBcXCIlc1xcIn0pIENSRUFURSAoYSktWzpBVVRIT1JFRF0tPihiKSIsIGEsIGIuZ2V0SWQoKSkpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGIuZ2V0Q2F0ZWdvcmllcygpLmZvckVhY2goYyAtPiB7CiAgICAgICAgICAgICAgZ3JhcGgucXVlcnkoZ3JhcGhJZCwKICAgICAgICAgICAgICAgICAgU3RyaW5nLmZvcm1hdCgiTUFUQ0ggKGI6Qm9vayB7aWQ6IFxcIiVzXFwifSksIChjOkNhdGVnb3J5IHtpZDogXFwiJXNcXCJ9KSBDUkVBVEUgKGIpLVs6SU5dLT4oYykiLAogICAgICAgICAgICAgICAgICAgICAgYi5nZXRJZCgpLCBjLmdldElkKCkpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIGZvciBlYWNoIHVzZXIgY3JlYXRlIGEgZ3JhcGggbm9kZQogICAgICAgIHVzZXJSZXBvc2l0b3J5LmZpbmRBbGwoKS5mb3JFYWNoKHUgLT4gewogICAgICAgICAgZ3JhcGgucXVlcnkoZ3JhcGhJZCwgU3RyaW5nLmZvcm1hdCgiQ1JFQVRFICg6VXNlciB7aWQ6IFxcIiVzXFwiLCBuYW1lOiBcXCIlc1xcIn0pIiwgdS5nZXRJZCgpLCB1LmdldE5hbWUoKSkpOwoKICAgICAgICAgIC8vIGZvciBlYWNoIG9mIHRoZSB1c2VyJ3MgYm9vayBjcmVhdGUgYSBwdXJjaGFzZWQgcmVsYXRpb25zaGlwCiAgICAgICAgICB1LmdldEJvb2tzKCkuZm9yRWFjaChib29rIC0+IHsKICAgICAgICAgICAgZ3JhcGgucXVlcnkoZ3JhcGhJZCwKICAgICAgICAgICAgICAgIFN0cmluZy5mb3JtYXQoIk1BVENIICh1OlVzZXIge2lkOiBcXCIlc1xcIn0pLCAoYjpCb29rIHtpZDogXFwiJXNcXCJ9KSBDUkVBVEUgKHUpLVs6UFVSQ0hBU0VEXS0+KGIpIiwKICAgICAgICAgICAgICAgICAgICB1LmdldElkKCksIGJvb2suZ2V0SWQoKSkpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIGZvciBlYWNoIGJvb2sgcmF0aW5nIGNyZWF0ZSBhIHJhdGVkIHJlbGF0aW9uc2hpcAogICAgICAgIGJvb2tSYXRpbmdSZXBvc2l0b3J5LmZpbmRBbGwoKS5mb3JFYWNoKGJyIC0+IHsKICAgICAgICAgIGdyYXBoLnF1ZXJ5KGdyYXBoSWQsCiAgICAgICAgICAgICAgU3RyaW5nLmZvcm1hdCgiTUFUQ0ggKHU6VXNlciB7aWQ6IFxcIiVzXFwifSksIChiOkJvb2sge2lkOiBcXCIlc1xcIn0pIENSRUFURSAodSktWzpSQVRFRCB7cmF0aW5nOiAlc31dLT4oYikiLAogICAgICAgICAgICAgICAgICBici5nZXRVc2VyKCkuZ2V0SWQoKSwgYnIuZ2V0Qm9vaygpLmdldElkKCksIGJyLmdldFJhdGluZygpKSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGxvZy5pbmZvKCI+Pj4+IENyZWF0ZWQgZ3JhcGguLi4iKTsKICAgIH0KICB9Cn0KYCkpLG1keCgicCIsbnVsbCxgTGV04oCZcyBicmVhayBkb3duIHRoZSBncmFwaCBjcmVhdGlvbjpgKSxtZHgoInVsIixudWxsLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBXZSBpbmplY3QgdGhlIG5lZWRlZCByZXBvc2l0b3JpZXMgZm9yIHVzZXJzLCBib29rcywgYm9vayByYXRpbmcgYW5kIGNhdGVnb3JpZXNgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgV2UgY2hlY2sgaWYgdGhlIGtleSBmb3IgdGhlIGdyYXBoIGRvZXMgbm90IGV4aXN0IHRvIHByZXZlbnQgcmVjcmVhdGluZyB0aGUgZ3JhcGggb24gcmVzdGFydHNgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgV2UgY3JlYXRlIDQgc2luZ2xlIHByb3BlcnR5IGluZGV4ZXMgZm9yIHRoZSBCb29rIGlkLCBDYXRlZ29yeSBpZCwgQXV0aG9yIG5hbWUgYW5kIFVzZXIgaWQuIFJlZGlzR3JhcGggc3VwcG9ydHMgaW5kZXhlcyBmb3Igbm9kZSBsYWJlbHMuIEluZGV4ZXMgYXJlIGF1dG9tYXRpY2FsbHkgdXNlZCBieSBxdWVyaWVzIHRoYXQgcmVmZXJlbmNlIGFueSBpbmRleGVkIHByb3BlcnRpZXMuYCxtZHgoInVsIix7cGFyZW50TmFtZToibGkifSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgRm9yIGVhY2ggYm9vayBjYXRlZ29yeSB3ZSBjcmVhdGUgYSBub2RlYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYEZvciBlYWNoIGJvb2sgd2UgY3JlYXRlIGEgbm9kZWApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBGb3IgZWFjaCBhdXRob3Igd2UgY3JlYXRlIGEgbm9kZWApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBGb3IgZWFjaCBib29rIGF1dGhvciB3ZSBjcmVhdGVkIGEgQVVUSE9SRUQgcmVsYXRpb25zaGlwIGJldHdlZW4gdGhlIGF1dGhvciBhbmQgdGhlIGJvb2tgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgRm9yIGVhY2ggYm9vayB3ZSBjcmVhdGVkIGFuIElOIHJlbGF0aW9uc2hpcCB3aXRoIHRoZSBjYXRlZ29yeWApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBGb3IgZWFjaCB1c2VyIHdlIGNyZWF0ZSBhIG5vZGVgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgRm9yIGVhY2ggYm9vayBvd25lZCBieSBhIHVzZXIgd2UgY3JlYXRlIGEgUFVSQ0hBU0VEIHJlbGF0aW9uc2hpcGApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBGb3IgZWFjaCBib29rIHJhdGluZyB3ZSBjcmVhdGUgYSBSQVRFRCByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgdXNlciBhbmQgdGhlIGJvb2tgKSkpKSxtZHgoImgzIix7ImlkIjoiY3JlYXRpbmctdGhlLXJlY29tbWVuZGF0aW9ucy1zZXJ2aWNlIn0sYENyZWF0aW5nIHRoZSBSZWNvbW1lbmRhdGlvbnMgU2VydmljZWApLG1keCgicCIsbnVsbCxgQXMgd2UgZGlkIGluIHRoZSBTZWFyY2ggTGVzc29uLCB3ZSBhcmUgZ29pbmcgdG8gdXNlIGEgU2VydmljZSBhYnN0cmFjdGlvbiB0byBlbmNhcHN1bGF0ZSB0aGUgY29tcGxleGl0eSBvZiB0aGUgcmVjb21tZW5kYXRpb25zIGVuZ2luZS4KTGV04oCZcyBzdGFydCB3aXRoIHRoZSBza2VsZXRvbiBvZiB0aGUgcmVjb21tZW5kYXRpb24gc2VydmljZS4gQ3JlYXRlIHRoZSBzcmMvbWFpbi9qYXZhL2NvbS9yZWRpc2xhYnMvZWR1L3JlZGkycmVhZC9zZXJ2aWNlcy9SZWNvbW1lbmRhdGlvblNlcnZpY2UuamF2YSBmaWxlIGFuZCBhZGQgdGhlIGNvbnRlbnRzIGFzIGZvbGxvd3M6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1qYXZhIn0pLGBwYWNrYWdlIGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5zZXJ2aWNlczsKCmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CgppbXBvcnQgY29tLnJlZGlzbGFicy5yZWRpc2dyYXBoLlJlY29yZDsKaW1wb3J0IGNvbS5yZWRpc2xhYnMucmVkaXNncmFwaC5SZXN1bHRTZXQ7CmltcG9ydCBjb20ucmVkaXNsYWJzLnJlZGlzZ3JhcGguZ3JhcGhfZW50aXRpZXMuTm9kZTsKaW1wb3J0IGNvbS5yZWRpc2xhYnMucmVkaXNncmFwaC5pbXBsLmFwaS5SZWRpc0dyYXBoOwoKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLlZhbHVlOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLlNlcnZpY2U7CgpAU2VydmljZQpwdWJsaWMgY2xhc3MgUmVjb21tZW5kYXRpb25TZXJ2aWNlIHsKCiAgQFZhbHVlKCJcJHthcHAuZ3JhcGhJZH0iKQogIHB1YmxpYyBTdHJpbmcgZ3JhcGhJZDsKCiAgUmVkaXNHcmFwaCBncmFwaCA9IG5ldyBSZWRpc0dyYXBoKCk7CgogIC8vIGFkZCBtYWdpYyBoZXJlIQp9CmApKSxtZHgoInAiLG51bGwsYEdldHRpbmcgQm9vayBSZWNvbW1lbmRhdGlvbnMgRnJvbSBDb21tb24gUHVyY2hhc2VzCk91ciBmaXJzdCByZWNvbW1lbmRhdGlvbiBtZXRob2Qgd2lsbCBmaW5kIHJlY29tbWVuZGF0aW9ucyBieSBsb29raW5nIGF0IHB1cmNoYXNlcyBvZiBvdGhlciB1c2VycyB0aGF0IGhhdmUgYm91Z2h0IHNvbWUgb2YgdGhlIHNhbWUgYm9va3MgYSB1c2VyIGhhcyBpbiBpdHMgYm9va3NoZWxmOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgTUFUQ0ggKHU6VXNlciB7IGlkOiAnODY3NTMwOScgfSktWzpQVVJDSEFTRURdLT4ob2I6Qm9vaykKTUFUQ0ggKG9iKTwtWzpQVVJDSEFTRURdLSg6VXNlciktWzpQVVJDSEFTRURdLT4oYjpCb29rKQpXSEVSRSBOT1QgKHUpLVs6UFVSQ0hBU0VEXS0+KGIpClJFVFVSTiBkaXN0aW5jdCBiLCBjb3VudChiKSBhcyBmcmVxdWVuY3kKT1JERVIgQlkgZnJlcXVlbmN5IERFU0MKYCkpLG1keCgicCIsbnVsbCxgTGV04oCZcyBicmVhayBkb3duIHRoZSBDeXBoZXIgcXVlcnk6YCksbWR4KCJ1bCIsbnVsbCxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgVGhlIGFuY2hvciBmb3IgdGhlIHF1ZXJ5IGlzIHRoZSBVc2Vy4oCZcyBpZCwgaW4gdGhpcyBjYXNlIOKAmDg2NzUzMDnigJlgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgT24gdGhlIGZpcnN0IE1BVENIIHdlIGxvb2sgZm9yIHRoZSBnaXZlbiB1c2VyIHB1cmNoYXNlc2ApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBPbiB0aGUgc2Vjb25kIE1BVENIIHdlIGZpbmQgb3RoZXIgdXNlcnMgdGhhdCBoYXZlIHB1cmNoYXNlIGEgYm9vayB0aGUgdXNlciBoYXMgcHVyY2hhc2VkIGFuZCBhbHNvIGNvbGxlY3QgdGhlIG90aGVyIHVzZXJzIGJvb2tzYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYE9uIFdIRVJFIGNsYXVzZSB3ZSBtYWtlIHN1cmUgdGhhdCB0aGUgdXNlciBkb2VzbuKAmXQgYWxyZWFkeSBvd24gYW55IG9mIHRoZSByZWNvbW1lbmRlZCBib29rc2ApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBPTiB0aGUgUkVUVVJOIHdlIG1ha2Ugc3VyZSB0byByZW1vdmUgZHVwbGljYXRlcyBhbmQgd2UgY291bnQgaG93IG9mdGVuIGEgYm9vayBoYXMgYmVlbiBwdXJjaGFzZWRgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgRmluYWxseSBvbiB0aGUgT1JERVIgQlksIHdlIHJldHVybiB0aGUgbW9zdCBwdXJjaGFzZWQgYm9va3MgZmlyc3RgKSksbWR4KCJwIixudWxsLGBSdW5uaW5nIHRoZSBxdWVyeSBvbiBSZWRpc0luc2lnaHQgd2UgZ2V0IGdyYXBoaWNhbCBkaXNwbGF5IGluIHdoaWNoIHdlIGNhbiBuYXZpZ2F0ZSB0aGUgcmVsYXRpb25zaGlwcyBvZiB0aGUgcmVzdWx0IHNldDpgKSxtZHgoInAiLG51bGwsbWR4KCJpbWciLHthbHQ6IlJlZGlzSW5zaWdodCBRdWVyeSBSZXN1bHRzIEdyYXBoIixzcmM6cmVxdWlyZSgiIXVybC1sb2FkZXI/bGltaXQ9MTAwMDAmbmFtZT1hc3NldHMvaW1hZ2VzL1tuYW1lXS1baGFzaF0uW2V4dF0mZmFsbGJhY2s9ZmlsZS1sb2FkZXIhLi9pbWFnZXMvcmVkaXMtaW5zaWdodC1xdWVyeS1ncmFwaC5wbmciKS5kZWZhdWx0fSkpLG1keCgicCIsbnVsbCxgVGhlcmUgaXMgYWxzbyBhIHRhYnVsYXIgcmVzdWx0cyB2aWV3IHRoYXQgcmVmbGVjdCB0aGUgdmFsdWVzIG9mIHRoZSBSRVRVUk4gY2xhdXNlOmApLG1keCgicCIsbnVsbCxtZHgoImltZyIse2FsdDoiUmVkaXNJbnNpZ2h0IFF1ZXJ5IFJlc3VsdHMgVGFibGUiLHNyYzpyZXF1aXJlKCIhdXJsLWxvYWRlcj9saW1pdD0xMDAwMCZuYW1lPWFzc2V0cy9pbWFnZXMvW25hbWVdLVtoYXNoXS5bZXh0XSZmYWxsYmFjaz1maWxlLWxvYWRlciEuL2ltYWdlcy9yZWRpcy1pbnNpZ2h0LXF1ZXJ5LXRhYmxlLnBuZyIpLmRlZmF1bHR9KSksbWR4KCJwIixudWxsLGBUbyBpbXBsZW1lbnQgdGhlIGFib3ZlIHF1ZXJ5IGluIHRoZSByZWNvbW1lbmRhdGlvbnMgc2VydmljZSB3ZSBjYW4gZXNjYXBlIHRoZSBxdWVyeSBzdHJpbmcsIGFuZCB3ZSBzaW1wbHkgcGFzcyB0aGUgcHJlcGFyZWQgcXVlcnkgc3RyaW5nIHRvIEpSZWRpc0dyYXBo4oCZcyBxdWVyeSBtZXRob2Q6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1qYXZhIn0pLGBwdWJsaWMgU2V0PFN0cmluZz4gZ2V0Qm9va1JlY29tbWVuZGF0aW9uc0Zyb21Db21tb25QdXJjaGFzZXNGb3JVc2VyKFN0cmluZyB1c2VySWQpIHsKICBTZXQ8U3RyaW5nPiByZWNvbW1lbmRhdGlvbnMgPSBuZXcgSGFzaFNldDxTdHJpbmc+KCk7CgogIFN0cmluZyBxdWVyeSA9ICJNQVRDSCAodTpVc2VyIHsgaWQ6ICclcycgfSktWzpQVVJDSEFTRURdLT4ob2I6Qm9vaykgIiAvLwogICAgICAgICAgICAgICArICJNQVRDSCAob2IpPC1bOlBVUkNIQVNFRF0tKDpVc2VyKS1bOlBVUkNIQVNFRF0tPihiOkJvb2spICIgLy8KICAgICAgICAgICAgICAgKyAiV0hFUkUgTk9UICh1KS1bOlBVUkNIQVNFRF0tPihiKSAiIC8vCiAgICAgICAgICAgICAgICsgIlJFVFVSTiBkaXN0aW5jdCBiLCBjb3VudChiKSBhcyBmcmVxdWVuY3kgIiAvLwogICAgICAgICAgICAgICArICJPUkRFUiBCWSBmcmVxdWVuY3kgREVTQyI7CgogICAgUmVzdWx0U2V0IHJlc3VsdFNldCA9IGdyYXBoLnF1ZXJ5KGdyYXBoSWQsIFN0cmluZy5mb3JtYXQocXVlcnksIHVzZXJJZCkpOwoKICAgIHdoaWxlIChyZXN1bHRTZXQuaGFzTmV4dCgpKSB7CiAgICAgIFJlY29yZCByZWNvcmQgPSByZXN1bHRTZXQubmV4dCgpOwogICAgICBOb2RlIGJvb2sgPSByZWNvcmQuZ2V0VmFsdWUoImIiKTsKICAgICAgcmVjb21tZW5kYXRpb25zLmFkZChib29rLmdldFByb3BlcnR5KCJpZCIpLmdldFZhbHVlKCkudG9TdHJpbmcoKSk7CiAgICB9CgogICAgcmV0dXJuIHJlY29tbWVuZGF0aW9uczsKICB9CmApKSxtZHgoInAiLG51bGwsYFNpbWlsYXIgdG8gYSBKREJDIHJlc3VsdCBzZXQsIHdlIGhhdmUgYW4gaXRlcmF0b3IgdGhhdCByZXR1cm5zIFJlY29yZCBvYmplY3RzLiBXZSBleHRyYWN0IHRoZSBjb2x1bW4gb2YgaW50ZXJlc3QgYnkgaXRzIGxhYmVsLCBpbiB0aGUgY2FzZSBhYm92ZSDigJxi4oCdIGZvciB0aGUgQm9vayBlbnRpdHkuIEdyYXBoIE5vZGVzIGxpa2UgdGhlIOKAnGJvb2vigJ0gdmFyaWFibGUgYWJvdmUgYXJlIGxpa2UgTWFwcywgd2UgY2FuIGdldCBhIHByb3BlcnR5IGJ5IGl0cyBuYW1lIOKAnGlk4oCdIGFuZCB0aGVuIGdldCB0aGUgdmFsdWUgd2l0aCBnZXRWYWx1ZSgpLgpCb29rcyBGcmVxdWVudGx5IEJvdWdodCBUb2dldGhlcgpUbyBmaW5kIGJvb2tzIHRoYXQgYXJlIGZyZXF1ZW50bHkgYm91Z2h0IHRvZ2V0aGVyIGdpdmUgYW4gSVNCTiB3ZSB1c2UgdGhlIHF1ZXJ5OmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgTUFUQ0ggKHU6VXNlciktWzpQVVJDSEFTRURdLT4oYjE6Qm9vayB7aWQ6ICclcyd9KQpNQVRDSCAoYjEpPC1bOlBVUkNIQVNFRF0tKHUpLVs6UFVSQ0hBU0VEXS0+KGIyOkJvb2spCk1BVENIIHJhdGVkID0gKFVzZXIpLVs6UkFURURdLShiMikgIiAvLwpXSVRIIGIxLCBiMiwgY291bnQoYjIpIGFzIGZyZXEsIGhlYWQocmVsYXRpb25zaGlwcyhyYXRlZCkpIGFzIHIKV0hFUkUgYjEgPD4gYjIKUkVUVVJOIGIyLCBmcmVxLCBhdmcoci5yYXRpbmcpCk9SREVSIEJZIGZyZXEsIGF2ZyhyLnJhdGluZykgREVTQwpgKSksbWR4KCJwIixudWxsLGBMZXQncyBicmVhayBpdCBkb3duOmApLG1keCgidWwiLG51bGwsbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYFRoZSBmaXJzdCBNQVRDSCBmaW5kIHVzZXJzIHRoYXQgaGF2ZSB0aGUgYm91Z2h0IHRoZSB0YXJnZXQgYm9va2ApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBUaGUgc2Vjb25kIE1BVENIIGZpbmRzIG90aGVyIGJvb2tzIHB1cmNoYXNlZCBieSB0aG9zZSB1c2Vyc2ApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBUaGUgdGhpcmQgTUFUQ0ggZmluZCB0aGUgcmF0aW5ncyBpZiBhbnkgZm9yIHRob3NlIGJvb2tzYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYFRoZSBXSVRIIGNsYXVzZSBncm91cHMgdGhlIHZhbHVlcyBnYXRoZXJlZCBzbyBmYXIsIGNvdW50cyBudW1iZXIgb2YgcHVyY2hhc2VzIG9mIHRoZSBjb2xsZWN0ZWQgYm9va3MgYW5kIGdyYWIgdGhlIG1ldGFkYXRhIGZyb20gdGhlIFJBVEVEIG5vdGVzYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYFRoZSBSRVRVUk4gbGluZSByZXR1cm5zIHRoZSBjb2xsZWN0ZWQgYm9va3MsIHdpdGggdGhlIG51bWJlciBvZiBwdXJjaGFzZXMgYW5kIHRoZWlyIGF2ZXJhZ2Ugc3RhciByYXRpbmdgKSksbWR4KCJwIixudWxsLGBUbyBpbXBsZW1lbnQgdGhlIGFib3ZlIHF1ZXJ5IGluIG91ciBzZXJ2aWNlIGFkZCB0aGUgZm9sbG93aW5nIG1ldGhvZDpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSksYCAgcHVibGljIFNldDxTdHJpbmc+IGdldEZyZXF1ZW50bHlCb3VnaHRUb2dldGhlcihTdHJpbmcgaXNibikgewogICAgU2V0PFN0cmluZz4gcmVjb21tZW5kYXRpb25zID0gbmV3IEhhc2hTZXQ8U3RyaW5nPigpOwoKICAgIFN0cmluZyBxdWVyeSA9ICJNQVRDSCAodTpVc2VyKS1bOlBVUkNIQVNFRF0tPihiMTpCb29rIHtpZDogJyVzJ30pICIgLy8KICAgICAgICArICJNQVRDSCAoYjEpPC1bOlBVUkNIQVNFRF0tKHUpLVs6UFVSQ0hBU0VEXS0+KGIyOkJvb2spICIgLy8KICAgICAgICArICJNQVRDSCByYXRlZCA9IChVc2VyKS1bOlJBVEVEXS0oYjIpICIgLy8KICAgICAgICArICJXSVRIIGIxLCBiMiwgY291bnQoYjIpIGFzIGZyZXEsIGhlYWQocmVsYXRpb25zaGlwcyhyYXRlZCkpIGFzIHIgIiAvLwogICAgICAgICsgIldIRVJFIGIxIDw+IGIyICIgLy8KICAgICAgICArICJSRVRVUk4gYjIsIGZyZXEsIGF2ZyhyLnJhdGluZykgIiAvLwogICAgICAgICsgIk9SREVSIEJZIGZyZXEsIGF2ZyhyLnJhdGluZykgREVTQyI7CgogICAgUmVzdWx0U2V0IHJlc3VsdFNldCA9IGdyYXBoLnF1ZXJ5KGdyYXBoSWQsIFN0cmluZy5mb3JtYXQocXVlcnksIGlzYm4pKTsKICAgIHdoaWxlIChyZXN1bHRTZXQuaGFzTmV4dCgpKSB7CiAgICAgIFJlY29yZCByZWNvcmQgPSByZXN1bHRTZXQubmV4dCgpOwogICAgICBOb2RlIGJvb2sgPSByZWNvcmQuZ2V0VmFsdWUoImIyIik7CiAgICAgIHJlY29tbWVuZGF0aW9ucy5hZGQoYm9vay5nZXRQcm9wZXJ0eSgiaWQiKS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkpOwogICAgfQogICAgcmV0dXJuIHJlY29tbWVuZGF0aW9uczsKICB9CmApKSxtZHgoImgzIix7ImlkIjoidGhlLXJlY29tbWVuZGF0aW9ucy1jb250cm9sbGVyIn0sYFRoZSBSZWNvbW1lbmRhdGlvbnMgQ29udHJvbGxlcmApLG1keCgicCIsbnVsbCxgVG8gc2VydmUgb3VyIHJlY29tbWVuZGF0aW9ucyB3ZSB3aWxsIGV4cG9zZSB0aGUgcmVjb21tZW5kYXRpb24gc2VydmljZSB1c2luZyB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFJlY29tbWVuZGF0aW9uQ29udHJvbGxlcmApLGAuCkNyZWF0ZSB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNyYy9tYWluL2phdmEvY29tL3JlZGlzbGFicy9lZHUvcmVkaTJyZWFkL2NvbnRyb2xsZXJzL1JlY29tbWVuZGF0aW9uQ29udHJvbGxlci5qYXZhYCksYApmaWxlIGFuZCBhZGQgdGhlIGNvbnRlbnRzIGFzIGZvbGxvd3M6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1qYXZhIn0pLGBwYWNrYWdlIGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5jb250cm9sbGVyczsKCmltcG9ydCBqYXZhLnV0aWwuU2V0OwoKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5zZXJ2aWNlcy5SZWNvbW1lbmRhdGlvblNlcnZpY2U7CgppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLkdldE1hcHBpbmc7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLndlYi5iaW5kLmFubm90YXRpb24uUGF0aFZhcmlhYmxlOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLlJlcXVlc3RNYXBwaW5nOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLlJlc3RDb250cm9sbGVyOwoKQFJlc3RDb250cm9sbGVyCkBSZXF1ZXN0TWFwcGluZygiL2FwaS9yZWNvbW1lbmRhdGlvbnMiKQpwdWJsaWMgY2xhc3MgUmVjb21tZW5kYXRpb25Db250cm9sbGVyIHsKCiAgQEF1dG93aXJlZAogIHByaXZhdGUgUmVjb21tZW5kYXRpb25TZXJ2aWNlIHJlY29tbWVuZGF0aW9uU2VydmljZTsKCiAgQEdldE1hcHBpbmcoIi91c2VyL3t1c2VySWR9IikKICBwdWJsaWMgU2V0PFN0cmluZz4gdXNlclJlY29tbWVuZGF0aW9ucyhAUGF0aFZhcmlhYmxlKCJ1c2VySWQiKSBTdHJpbmcgdXNlcklkKSB7CiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25TZXJ2aWNlLmdldEJvb2tSZWNvbW1lbmRhdGlvbnNGcm9tQ29tbW9uUHVyY2hhc2VzRm9yVXNlcih1c2VySWQpOwogIH0KCiAgQEdldE1hcHBpbmcoIi9pc2JuL3tpc2JufS9wYWlyaW5ncyIpCiAgcHVibGljIFNldDxTdHJpbmc+IGZyZXF1ZW50UGFpcmluZ3MoQFBhdGhWYXJpYWJsZSgiaXNibiIpIFN0cmluZyBpc2JuKSB7CiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25TZXJ2aWNlLmdldEZyZXF1ZW50bHlCb3VnaHRUb2dldGhlcihpc2JuKTsKICB9Cn0KYCkpLG1keCgicCIsbnVsbCxgWW91IGNhbiBpbnZva2UgdGhlIHJlY29tbWVuZGF0aW9uIHNlcnZpY2Ugd2l0aCBhIGN1cmwgcmVxdWVzdCBsaWtlOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgY3VybCAtLWxvY2F0aW9uIC0tcmVxdWVzdCBHRVQgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcmVjb21tZW5kYXRpb25zL3VzZXIvNTUyMTQ2MTUxMTc0ODM0NTQnCmApKSxtZHgoInAiLG51bGwsYG9yOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgY3VybCAtLWxvY2F0aW9uIC0tcmVxdWVzdCBHRVQgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcmVjb21tZW5kYXRpb25zL2lzYm4vMTc4OTYxMDIyMi9wYWlyaW5ncycKYCkpKTt9O01EWENvbnRlbnQuaXNNRFhDb21wb25lbnQ9dHJ1ZTs="},{"version":3,"sources":["/Users/ajeetraina/projects/8sep/redis-developer.github.io/docs/develop/java/spring/redis-and-spring-course/lesson_8/index-lesson_8.mdx"],"names":["React","mdx","frontMatter","id","title","sidebar_label","slug","metadata","useBaseUrl","toc","value","children","layoutProps","MDXLayout","MDXContent","components","props","require","default","isMDXComponent"],"mappings":"gIACE,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,KAAoB,eAApB,CAEA,MAAO,MAAMC,CAAAA,WAAW,CAAG,CAC5BC,EAAE,CAAE,gBADwB,CAE5BC,KAAK,CAAE,iCAFqB,CAG5BC,aAAa,CAAE,+BAHa,CAI5BC,IAAI,CAAE,gDAJsB,CAApB,CAMT,MAAO,MAAMC,CAAAA,QAAQ,CAAG,CACtB,gBAAiB,qEADK,CAEtB,KAAM,qEAFgB,CAGtB,iBAAkB,KAHI,CAItB,QAAS,iCAJa,CAKtB,cAAe,YALO,CAMtB,SAAU,oFANY,CAOtB,OAAQ,gDAPc,CAQtB,YAAa,gDARS,CAStB,UAAW,6IATW,CAUtB,UAAW,SAVW,CAWtB,gBAAiB,+BAXK,CAYtB,UAAW,MAZW,CAatB,WAAY,CACV,QAAS,wBADC,CAEV,YAAa,gDAFH,CAbU,CAiBtB,OAAQ,CACN,QAAS,kCADH,CAEN,YAAa,gDAFP,CAjBc,CAAjB,CAsBL,yB,CACF,cACA,MAAOC,CAAAA,UAAP,KAAuB,wBAAvB,CACA,MAAO,MAAMC,CAAAA,GAAG,CAAG,CAAC,CAClBC,KAAK,CAAE,YADW,CAElBP,EAAE,CAAE,YAFc,CAGlBQ,QAAQ,CAAE,EAHQ,CAAD,CAIhB,CACDD,KAAK,CAAE,QADN,CAEDP,EAAE,CAAE,QAFH,CAGDQ,QAAQ,CAAE,EAHT,CAJgB,CAQhB,CACDD,KAAK,CAAE,QADN,CAEDP,EAAE,CAAE,QAFH,CAGDQ,QAAQ,CAAE,EAHT,CARgB,CAYhB,CACDD,KAAK,CAAE,aADN,CAEDP,EAAE,CAAE,aAFH,CAGDQ,QAAQ,CAAE,EAHT,CAZgB,CAgBhB,CACDD,KAAK,CAAE,OADN,CAEDP,EAAE,CAAE,OAFH,CAGDQ,QAAQ,CAAE,EAHT,CAhBgB,CAoBhB,CACDD,KAAK,CAAE,kDADN,CAEDP,EAAE,CAAE,iDAFH,CAGDQ,QAAQ,CAAE,EAHT,CApBgB,CAwBhB,CACDD,KAAK,CAAE,uBADN,CAEDP,EAAE,CAAE,uBAFH,CAGDQ,QAAQ,CAAE,EAHT,CAxBgB,CA4BhB,CACDD,KAAK,CAAE,2BADN,CAEDP,EAAE,CAAE,2BAFH,CAGDQ,QAAQ,CAAE,EAHT,CA5BgB,CAgChB,CACDD,KAAK,CAAE,sCADN,CAEDP,EAAE,CAAE,sCAFH,CAGDQ,QAAQ,CAAE,EAHT,CAhCgB,CAoChB,CACDD,KAAK,CAAE,gCADN,CAEDP,EAAE,CAAE,gCAFH,CAGDQ,QAAQ,CAAE,EAHT,CApCgB,CAAZ,CA0CP,KAAMC,CAAAA,WAAW,CAAG,CAClBH,GADkB,CAApB,CAGA,KAAMI,CAAAA,SAAS,CAAG,SAAlB,CACA,cAAe,SAASC,CAAAA,UAAT,CAAoB,CACjCC,UADiC,CAEjC,GAAGC,KAF8B,CAApB,CAGZ,CACD,MAAO,KAAC,SAAD,aAAeJ,WAAf,CAAgCI,KAAhC,EAAuC,UAAU,CAAED,UAAnD,CAA+D,OAAO,CAAC,WAAvE,GAGL,SAAQ,CACN,KAAM,YADA,CAAR,CAEK,YAFL,CAHK,CAML,aAAK,6FAAL,CANK,CAOL,SAAQ,CACN,KAAM,QADA,CAAR,CAEK,QAFL,CAPK,CAUL,aAAK,sCAAL,CAVK,CAWL,cACE,UAAI,UAAU,CAAC,IAAf,EAAsB,+HAAtB,CADF,CAEE,UAAI,UAAU,CAAC,IAAf,EAAsB;AAC5B,kBADM,CAFF,CAIE,UAAI,UAAU,CAAC,IAAf,EAAsB,sFAAtB,CAA4G,kBAAG,UAAU,CAAC,IAAd,EAAuB,CAC/H,OAAQ,sEADuH,CAAvB,EAErG,sEAFqG,CAA5G,CAJF,CAXK,CAmBL,SAAQ,CACN,KAAM,QADA,CAAR,CAEK,QAFL,CAnBK,CAsBL,aAAK;AACT;AACA,4GAFI,CAtBK,CAyBL,SAAQ,CACN,KAAM,aADA,CAAR,CAEK,aAFL,CAzBK,CA4BL,aAAK;AACT,mHADI,CA5BK,CA8BL,cACE,UAAI,UAAU,CAAC,IAAf,EAAsB,4BAAtB,CADF,CAEE,UAAI,UAAU,CAAC,IAAf,EAAsB,yDAAtB,CAFF,CAGE,UAAI,UAAU,CAAC,IAAf,EAAsB,uEAAtB,CAHF,CAIE,UAAI,UAAU,CAAC,IAAf,EAAsB,mDAAtB,CAJF,CA9BK,CAoCL,aAAK;AACT;AACA;AACA;AACA,sRAJI,CApCK,CAyCL,SAAQ,CACN,KAAM,OADA,CAAR,CAEK,OAFL,CAzCK,CA4CL,aAAK;AACT,CADI,CACF,kBAAY,UAAU,CAAC,GAAvB,EAA6B,IAA7B,CADE,CA5CK,CA8CL,aAAK;AACT,CADI,CACF,kBAAY,UAAU,CAAC,GAAvB,EAA6B,UAA7B,CADE,CA9CK,CAgDL,aAAK;AACT,CADI,CACF,kBAAY,UAAU,CAAC,GAAvB,EAA6B,WAA7B,CADE,CAhDK,CAkDL,aAAK;AACT,CADI,CACF,kBAAY,UAAU,CAAC,GAAvB,EAA6B,iCAA7B,CADE,CAlDK,CAoDL,aAAK;AACT;AACA;AACA,CAHI,CAGF,kBAAY,UAAU,CAAC,GAAvB,EAA6B,wEAA7B,CAHE,CApDK,CAwDL,aAAK,8OAAL,CAxDK,CAyDL,SAAQ,CACN,KAAM,iDADA,CAAR,CAEK,kDAFL,CAzDK,CA4DL,aAAK,gHAAL,CA5DK,CA6DL,aAAK;AACT;AACA,+HAFI,CA7DK,CAgEL,SAAQ,CACN,KAAM,uBADA,CAAR,CAEK,uBAFL,CAhEK,CAmEL,aAAK;AACT;AACA,6CAFI,CAnEK,CAsEL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAZS,CAAL,CAtEK,CAmFL,aAAK,kDAAL,CAAuD,kBAAY,UAAU,CAAC,GAAvB,EAA6B,OAA7B,CAAvD,CAA0G,GAA1G,CAnFK,CAoFL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA,CAJS,CAAL,CApFK,CAyFL,aAAK;AACT,wDADI,CAzFK,CA2FL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX,CAHS,CAAL,CA3FK,CA+FL,aAAK,qEAAL,CA/FK,CAgGL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA,CAPS,CAAL,CAhGK,CAwGL,aAAK,kBAAL,CAxGK,CAyGL,aAAG,WAAK,GAAG,CAAE,cAAV,CAA0B,GAAG,CAAEE,OAAO,CAAC,gHAAD,CAAP,CAA0HC,OAAzJ,EAAH,CAzGK,CA0GL,aAAK;AACT,8FADI,CA1GK,CA4GL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAjBS,CAAL,CA5GK,CA8HL,aAAK,0CAAL,CA9HK,CA+HL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA,CALS,CAAL,CA/HK,CAqIL,aAAK,gCAAL,CArIK,CAsIL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAXS,CAAL,CAtIK,CAkJL,aAAK,qEAAL,CAlJK,CAmJL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA,CANS,CAAL,CAnJK,CA0JL,aAAK,sDAAL,CA1JK,CA2JL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAXS,CAAL,CA3JK,CAuKL,aAAK;AACT;AACA;AACA,+DAHI,CAvKK,CA2KL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA,CANS,CAAL,CA3KK,CAkLL,SAAQ,CACN,KAAM,2BADA,CAAR,CAEK,2BAFL,CAlLK,CAqLL,aAAK,sGAAL,CAA2G,kBAAG,UAAU,CAAC,GAAd,EAAsB,CAC7H,OAAQ,2CADqH,CAAtB,EAEpG,2CAFoG,CAA3G,CAEwD,sDAFxD,CAE8G,kBAAG,UAAU,CAAC,GAAd,EAAsB,CAChI,OAAQ,gCADwH,CAAtB,EAEvG,gCAFuG,CAF9G,CAI6C;AACjD;AACA,qDANI,CArLK,CA4LL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,cADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA,CAPS,CAAL,CA5LK,CAoML,SAAQ,CACN,KAAM,mBADA,CAAR,CAEK,mBAFL,CApMK,CAuML,aAAK,kKAAL,CAvMK,CAwML,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX,CAHS,CAAL,CAxMK,CA4ML,aAAK,wHAAL,CA5MK,CA6ML,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA5GS,CAAL,CA7MK,CA0TL,aAAK,sCAAL,CA1TK,CA2TL,cACE,UAAI,UAAU,CAAC,IAAf,EAAsB,gFAAtB,CADF,CAEE,UAAI,UAAU,CAAC,IAAf,EAAsB,8FAAtB,CAFF,CAGE,UAAI,UAAU,CAAC,IAAf,EAAsB,0NAAtB,CACE,UAAI,UAAU,CAAC,IAAf,EACE,UAAI,UAAU,CAAC,IAAf,EAAsB,yCAAtB,CADF,CAEE,UAAI,UAAU,CAAC,IAAf,EAAsB,gCAAtB,CAFF,CAGE,UAAI,UAAU,CAAC,IAAf,EAAsB,kCAAtB,CAHF,CAIE,UAAI,UAAU,CAAC,IAAf,EAAsB,yFAAtB,CAJF,CAKE,UAAI,UAAU,CAAC,IAAf,EAAsB,+DAAtB,CALF,CAME,UAAI,UAAU,CAAC,IAAf,EAAsB,gCAAtB,CANF,CAOE,UAAI,UAAU,CAAC,IAAf,EAAsB,kEAAtB,CAPF,CAQE,UAAI,UAAU,CAAC,IAAf,EAAsB,mFAAtB,CARF,CADF,CAHF,CA3TK,CA2UL,SAAQ,CACN,KAAM,sCADA,CAAR,CAEK,sCAFL,CA3UK,CA8UL,aAAK;AACT,4LADI,CA9UK,CAgVL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAzBS,CAAL,CAhVK,CA0WL,aAAK;AACT,sKADI,CA1WK,CA4WL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA,CAPS,CAAL,CA5WK,CAoXL,aAAK,oCAAL,CApXK,CAqXL,cACE,UAAI,UAAU,CAAC,IAAf,EAAsB,mEAAtB,CADF,CAEE,UAAI,UAAU,CAAC,IAAf,EAAsB,yDAAtB,CAFF,CAGE,UAAI,UAAU,CAAC,IAAf,EAAsB,iIAAtB,CAHF,CAIE,UAAI,UAAU,CAAC,IAAf,EAAsB,6FAAtB,CAJF,CAKE,UAAI,UAAU,CAAC,IAAf,EAAsB,kGAAtB,CALF,CAME,UAAI,UAAU,CAAC,IAAf,EAAsB,mEAAtB,CANF,CArXK,CA6XL,aAAK,0HAAL,CA7XK,CA8XL,aAAG,WAAK,GAAG,CAAE,kCAAV,CAA8C,GAAG,CAAED,OAAO,CAAC,4HAAD,CAAP,CAAsIC,OAAzL,EAAH,CA9XK,CA+XL,aAAK,oFAAL,CA/XK,CAgYL,aAAG,WAAK,GAAG,CAAE,kCAAV,CAA8C,GAAG,CAAED,OAAO,CAAC,4HAAD,CAAP,CAAsIC,OAAzL,EAAH,CAhYK,CAiYL,aAAK,yKAAL,CAjYK,CAkYL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CArBS,CAAL,CAlYK,CAwZL,aAAK;AACT;AACA,iFAFI,CAxZK,CA2ZL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA;AACA;AACA,CATS,CAAL,CA3ZK,CAqaL,aAAK,sBAAL,CAraK,CAsaL,cACE,UAAI,UAAU,CAAC,IAAf,EAAsB,iEAAtB,CADF,CAEE,UAAI,UAAU,CAAC,IAAf,EAAsB,6DAAtB,CAFF,CAGE,UAAI,UAAU,CAAC,IAAf,EAAsB,yDAAtB,CAHF,CAIE,UAAI,UAAU,CAAC,IAAf,EAAsB,iJAAtB,CAJF,CAKE,UAAI,UAAU,CAAC,IAAf,EAAsB,yGAAtB,CALF,CAtaK,CA6aL,aAAK,uEAAL,CA7aK,CA8aL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CArBS,CAAL,CA9aK,CAocL,SAAQ,CACN,KAAM,gCADA,CAAR,CAEK,gCAFL,CApcK,CAucL,aAAK,mFAAL,CAAwF,kBAAY,UAAU,CAAC,GAAvB,EAA6B,0BAA7B,CAAxF,CAA8J;AAClK,YADI,CACS,kBAAY,UAAU,CAAC,GAAvB,EAA6B,qFAA7B,CADT,CAC0I;AAC9I,sCAFI,CAvcK,CA0cL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA/BS,CAAL,CA1cK,CA0eL,aAAK,qEAAL,CA1eK,CA2eL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX,CAHS,CAAL,CA3eK,CA+eL,aAAK,KAAL,CA/eK,CAgfL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;AACX,CAHS,CAAL,CAhfK,CAAP,CAqfD,CAED,CACAJ,UAAU,CAACK,cAAX,CAA4B,IAA5B","sourcesContent":["\n  import React from 'react';\n  import { mdx } from '@mdx-js/react';\n\n  export const frontMatter = {\n\tid: 'index-lesson_8',\n\ttitle: 'Recommendations with RedisGraph',\n\tsidebar_label: 'Recommendations w/ RedisGraph',\n\tslug: '/develop/java/redis-and-spring-course/lesson_8'\n};\nexport const metadata = {\n  \"unversionedId\": \"develop/java/spring/redis-and-spring-course/lesson_8/index-lesson_8\",\n  \"id\": \"develop/java/spring/redis-and-spring-course/lesson_8/index-lesson_8\",\n  \"isDocsHomePage\": false,\n  \"title\": \"Recommendations with RedisGraph\",\n  \"description\": \"Objectives\",\n  \"source\": \"@site/docs/develop/java/spring/redis-and-spring-course/lesson_8/index-lesson_8.mdx\",\n  \"slug\": \"/develop/java/redis-and-spring-course/lesson_8\",\n  \"permalink\": \"/develop/java/redis-and-spring-course/lesson_8\",\n  \"editUrl\": \"https://github.com/redis-developer/redis-developer/edit/master/docs/develop/java/spring/redis-and-spring-course/lesson_8/index-lesson_8.mdx\",\n  \"version\": \"current\",\n  \"sidebar_label\": \"Recommendations w/ RedisGraph\",\n  \"sidebar\": \"docs\",\n  \"previous\": {\n    \"title\": \"Search with RediSearch\",\n    \"permalink\": \"/develop/java/redis-and-spring-course/lesson_7\"\n  },\n  \"next\": {\n    \"title\": \"Caching REST Services with Redis\",\n    \"permalink\": \"/develop/java/redis-and-spring-course/lesson_9\"\n  }\n};\n  /* @jsxRuntime classic */\n/* @jsx mdx */\nimport useBaseUrl from '@docusaurus/useBaseUrl';\nexport const toc = [{\n  value: 'Objectives',\n  id: 'objectives',\n  children: []\n}, {\n  value: 'Agenda',\n  id: 'agenda',\n  children: []\n}, {\n  value: 'Graphs',\n  id: 'graphs',\n  children: []\n}, {\n  value: 'Redis Graph',\n  id: 'redis-graph',\n  children: []\n}, {\n  value: 'Nodes',\n  id: 'nodes',\n  children: []\n}, {\n  value: 'RedisInsight: A Visual Management Tool for Redis',\n  id: 'redisinsight-a-visual-management-tool-for-redis',\n  children: []\n}, {\n  value: 'A warm-up with Cypher',\n  id: 'a-warm-up-with-cypher',\n  children: []\n}, {\n  value: 'Using Redis Graph in Java',\n  id: 'using-redis-graph-in-java',\n  children: []\n}, {\n  value: 'Creating the Recommendations Service',\n  id: 'creating-the-recommendations-service',\n  children: []\n}, {\n  value: 'The Recommendations Controller',\n  id: 'the-recommendations-controller',\n  children: []\n}];\n\nconst layoutProps = {\n  toc\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h3 {...{\n      \"id\": \"objectives\"\n    }}>{`Objectives`}</h3>\n    <p>{`Build a simple but powerful graph-based recommendation engine in the Redi2Read application.`}</p>\n    <h3 {...{\n      \"id\": \"agenda\"\n    }}>{`Agenda`}</h3>\n    <p>{`In this lesson, students will learn:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`How to use RedisGraph in a Spring Boot application to construct a Graph from model data using the JRedisGraph client library.`}</li>\n      <li parentName=\"ul\">{`How to query data using the Cypher query language.\nIf you get stuck:`}</li>\n      <li parentName=\"ul\">{`The progress made in this lesson is available on the redi2read github repository at `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/redis-developer/redi2read/tree/course/milestone-8\"\n        }}>{`https://github.com/redis-developer/redi2read/tree/course/milestone-8`}</a></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"graphs\"\n    }}>{`Graphs`}</h3>\n    <p>{`Graph databases are composed of nodes and relationships. These databases excel at managing highly connected data.\nNodes represent entities (party, place, thing, category, moment-in-time) related to other entities.\nRelationships connect nodes. They represent an association between nodes that are important to your domain.`}</p>\n    <h3 {...{\n      \"id\": \"redis-graph\"\n    }}>{`Redis Graph`}</h3>\n    <p>{`Redis Graph is a low-latency graph database based on the property graph model built as a Redis module.\nLike all graphs, a property graph has nodes and relationships. However, it adds extra expressiveness by providing:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Nodes: Graph data entities`}</li>\n      <li parentName=\"ul\">{`Relationships: Connect nodes (has direction and a type)`}</li>\n      <li parentName=\"ul\">{`Properties: Stores data in key-value pairs in nodes and relationships`}</li>\n      <li parentName=\"ul\">{`Labels: Groups nodes and relationships (optional)`}</li>\n    </ul>\n    <p>{`Redis Graph meets the two most essential requirements of a graph database:\nNative Graph Storage: Uses a Redis-native optimized graph data structure (sparse adjacency matrices).\nNative Graph Processing: Index-free adjacency and linear algebra to query the graph.\nIt supports a large subset of the Cypher Query Language, an open standard supported by several graph databases, the Cypher Graph Query Language.\nThe Cypher Query Language is a SQL-inspired pattern-matching language with an easy to grasp visual aspect due to its use of ASCII-Art to easily visual graph relationships in text. The specification is becoming an industry standard among graph database vendors (see openCypher).`}</p>\n    <h3 {...{\n      \"id\": \"nodes\"\n    }}>{`Nodes`}</h3>\n    <p>{`Nodes are enclosed by parenthesis. For example:\n`}<inlineCode parentName=\"p\">{`()`}</inlineCode></p>\n    <p>{`It is the simplest of nodes; an anonymous node (with no label or variable), as a pattern-matching entity, it will match any node in the database.\n`}<inlineCode parentName=\"p\">{`(:Actor)`}</inlineCode></p>\n    <p>{`Represents a node under the label Actor; you can think of it as the nodes class.\n`}<inlineCode parentName=\"p\">{`(a:Actor)`}</inlineCode></p>\n    <p>{`In this example, a is an alias for the node. Think of it as a variable that you can use in a query, just like in SQL.\n`}<inlineCode parentName=\"p\">{`(a:Actor {name:'Kathryn Hahn'})`}</inlineCode></p>\n    <p>{`The JSON-looking object in curly brackets is a node property. The properties are attached to the node upon creation. When used in a query, they serve as pattern matching.\nRelationships\nRelationships are represented by arrows (--> or <--) between two nodes. The type of relationship is enclosed in squared brackets.\n`}<inlineCode parentName=\"p\">{`(a:Actor {name:'Kathryn Hahn'})-[:ACTS]->(s:Show {name:'WandaVision'})`}</inlineCode></p>\n    <p>{`The above snippet could be used to create the relationship if used with the GRAPH.CREATE method, for example. If the nodes did not exist, they would be created, or if they existed, it would just use the node properties to pattern match.`}</p>\n    <h3 {...{\n      \"id\": \"redisinsight-a-visual-management-tool-for-redis\"\n    }}>{`RedisInsight: A Visual Management Tool for Redis`}</h3>\n    <p>{`Until now, we have been using the Redis CLI, curl, and the output of our Java programs to interact with Redis.`}</p>\n    <p>{`If there is one place where we can use visualization is with graph data. RedisInsight is a free product from Redis Labs that provides an intuitive graphical user interface for managing Redis databases.\nRedisInsight also supports some popular Redis modules, and we'll use it in this lesson to visualize our graphs.\nIf you want to get the best possible understanding of the materials in this chapter, please download and install RedisInsight.`}</p>\n    <h3 {...{\n      \"id\": \"a-warm-up-with-cypher\"\n    }}>{`A warm-up with Cypher`}</h3>\n    <p>{`Try in the Redis CLI\nOk, enough theory, lets fire up the Redis CLI and try some graph making and querying (and later visualizing in RedisInsight).\nLets create a standalone node for an Actor:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`127.0.0.1:6379> GRAPH.QUERY imdb-grf \"CREATE (:Actor {name: 'Kathryn Hahn', nick: 'ka'})\"\n1) 1) \"Labels added: 1\"\n   2) \"Nodes created: 1\"\n   3) \"Properties set: 2\"\n\nAnd a standalone node for a TV show:\n127.0.0.1:6379> GRAPH.QUERY imdb-grf \"CREATE (:Show {name: 'WandaVision', nick: 'wv'})\"\n1) 1) \"Labels added: 1\"\n   2) \"Nodes created: 1\"\n   3) \"Properties set: 2\"\n`}</code></pre>\n    <p>{`Now lets join them with a relationship of type `}<inlineCode parentName=\"p\">{`:ACTS`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`127.0.0.1:6379> GRAPH.QUERY imdb-grf \"MATCH (a:Actor {nick: 'ka'}), (s:Show {nick: 'wv'}) CREATE (a)-[:ACTS]->(s)\"\n1) 1) \"Relationships created: 1\"\n`}</code></pre>\n    <p>{`The MATCH keyword indicates a pattern matching operation. You can have multiple patterns in a command separated list in a single MATCH or multiple MATCH lines. Variables are used to join multiple patterns.\nNotice that the Redis Graph Cypher command starts with:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`GRAPH.QUERY key-of-the-graph cypher-query\n`}</code></pre>\n    <p>{`First, lets see what are the unique labels (classes) in the graph:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`127.0.0.1:6379> GRAPH.QUERY \"imdb-grf\" \"match (n) return distinct labels(n)\"\n1) 1) \"labels(n)\"\n2) 1) 1) \"Actor\"\n   2) 1) \"Show\"\n   3) 1) \"Movie\"\n`}</code></pre>\n    <p>{`In RedisInsight:`}</p>\n    <p><img alt={\"RedisInsight\"} src={require(\"!url-loader?limit=10000&name=assets/images/[name]-[hash].[ext]&fallback=file-loader!./images/redis-insight.png\").default} /></p>\n    <p>{`As expected, the unique labels are Actor, Movie, and Show.\nNow, execute the commands below, and then we can ask some questions of the data using Cypher:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`GRAPH.QUERY imdb-grf \"CREATE (:Actor {name: 'Paul Bettany', nick: 'pb'})\"\nGRAPH.QUERY imdb-grf \"CREATE (:Actor {name: 'Paul Rudd', nick: 'pr'})\"\n\nGRAPH.QUERY imdb-grf \"CREATE (:Show {name: 'The Shrink Next Door', nick: 'tsnd'})\"\nGRAPH.QUERY imdb-grf \"CREATE (:Movie {name: 'Iron Man', nick: 'im'})\"\nGRAPH.QUERY imdb-grf \"CREATE (:Movie {name: 'Our Idiot Brother', nick: 'oib'})\"\nGRAPH.QUERY imdb-grf \"CREATE (:Movie {name: 'Captain America: Civil War', nick: 'cacw'})\"\n\nGRAPH.QUERY imdb-grf \"MATCH (a:Actor {nick: 'pb'}), (s:Show {nick: 'wv'}) CREATE (a)-[:ACTS]->(s)\"\nGRAPH.QUERY imdb-grf \"MATCH (a:Actor {nick: 'pb'}), (m:Movie {nick: 'im'}) CREATE (a)-[:ACTS]->(m)\"\nGRAPH.QUERY imdb-grf \"MATCH (a:Actor {nick: 'ka'}), (m:Movie {nick: 'oib'}) CREATE (a)-[:ACTS]->(m)\"\nGRAPH.QUERY imdb-grf \"MATCH (a:Actor {nick: 'pr'}), (m:Movie {nick: 'oib'}) CREATE (a)-[:ACTS]->(m)\"\nGRAPH.QUERY imdb-grf \"MATCH (a:Actor {nick: 'pr'}), (m:Movie {nick: 'cacw'}) CREATE (a)-[:ACTS]->(m)\"\nGRAPH.QUERY imdb-grf \"MATCH (a:Actor {nick: 'pr'}), (s:Show {nick: 'tsnd'}) CREATE (a)-[:ACTS]->(s)\"\nGRAPH.QUERY imdb-grf \"MATCH (a:Actor {nick: 'ka'}), (s:Show {nick: 'tsnd'}) CREATE (a)-[:ACTS]->(s)\"\n`}</code></pre>\n    <p>{`What are the relationships in our graph?`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`127.0.0.1:6379> GRAPH.QUERY \"imdb-grf\" \"MATCH ()-[e]->() RETURN distinct type(e)\"\n1) 1) \"type(e)\"\n2) 1) 1) \"ACTS\"\n`}</code></pre>\n    <p>{`Count the labels in the graph:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`127.0.0.1:6379> GRAPH.QUERY \"imdb-grf\" \"MATCH (n) RETURN distinct labels(n), count(n)\"\n1) 1) \"labels(n)\"\n   2) \"count(n)\"\n2) 1) 1) \"Actor\"\n      2) (integer) 3\n   2) 1) \"Movie\"\n      2) (integer) 3\n   3) 1) \"Show\"\n      2) (integer) 2\n`}</code></pre>\n    <p>{`Return the name of all actors that acted in The Shrink Next Door:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`127.0.0.1:6379> GRAPH.QUERY imdb-grf \"MATCH (a:Actor)-[:ACTS]->(:Show {name:'The Shrink Next Door'}) RETURN a.name\"\n1) 1) \"a.name\"\n2) 1) 1) \"Kathryn Hahn\"\n   2) 1) \"Paul Rudd\"\n`}</code></pre>\n    <p>{`Find any two actors that worked together in a movie:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`127.0.0.1:6379> GRAPH.QUERY \"imdb-grf\" \"MATCH                  (a1:Actor)-[:ACTS]->(m:Movie)<-[:ACTS]-(a2:Actor)\nWHERE a1 <> a2 AND id(a1) > id(a2)\nRETURN m.name, a1.name, a2.name\"\n1) 1) \"m.name\"\n   2) \"a1.name\"\n   3) \"a2.name\"\n2) 1) 1) \"Our Idiot Brother\"\n      2) \"Paul Rudd\"\n      3) \"Kathryn Hahn\"\n`}</code></pre>\n    <p>{`That last query gives us a glimpse into the power of the Cypher Query Language. We can graphically draw the connections between the two actors, remove any duplicated (the permutations problem) by making sure we dont match on the same node (Paul Rudd and Paul Rudd) and variations of the same pair (Paul Rudd and Kathryn Hahn vs. Kathryn Hahn and Paul Rudd) by ordering the pair using the id function.\nCreating the Redi2Read Graph\nNow that we have a cursory understanding of Redis Graph and the Cypher Query Language, lets build the graph that will power our recommendations in Redi2Read.\nWe will create a graph containing the following relationships:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`Author -> AUTHORED -> Book\nBook -> IN -> Category\nUser -> RATED -> Book\nUser -> PURCHASED -> Book\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"using-redis-graph-in-java\"\n    }}>{`Using Redis Graph in Java`}</h3>\n    <p>{`To create and query graphs in Redi2Read we will use the JRedisGraph client library for Redis Graph (`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/RedisGraph/JRedisGraph\"\n      }}>{`https://github.com/RedisGraph/JRedisGraph`}</a>{`) built on top of the popular Jedis client library (`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/redis/jedis\"\n      }}>{`https://github.com/redis/jedis`}</a>{`)\nAdding the JRedisGraph dependency\nIn your Maven pom.xml, add the following dependency:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<dependency>\n  <groupId>com.redislabs</groupId>\n  <artifactId>jredisgraph</artifactId>\n  <version>2.3.0</version>\n</dependency>\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"commandlinerunner\"\n    }}>{`CommandLineRunner`}</h4>\n    <p>{`To create our graph well use the now familiar CommandLineRunner recipe. We will keep the name of the created graph in the applications property field as shown:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`app.graphId=redi2read-grf\n`}</code></pre>\n    <p>{`Next, create the src/main/java/com/redislabs/edu/redi2read/boot/CreateGraph.java file and add the contents as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.boot;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.stereotype.Component;\n\nimport com.redislabs.edu.redi2read.repositories.BookRatingRepository;\nimport com.redislabs.edu.redi2read.repositories.BookRepository;\nimport com.redislabs.edu.redi2read.repositories.CategoryRepository;\nimport com.redislabs.edu.redi2read.repositories.UserRepository;\nimport com.redislabs.redisgraph.impl.api.RedisGraph;\n\nimport lombok.extern.slf4j.Slf4j;\n\n@Component\n@Order(8)\n@Slf4j\npublic class CreateGraph implements CommandLineRunner {\n\n  @Autowired\n  private RedisTemplate<String, String> redisTemplate;\n\n  @Autowired\n  private UserRepository userRepository;\n\n  @Autowired\n  private BookRepository bookRepository;\n\n  @Autowired\n  private BookRatingRepository bookRatingRepository;\n\n  @Autowired\n  private CategoryRepository categoryRepository;\n\n  @Value(\"\\${app.graphId}\")\n  private String graphId;\n\n  @Override\n  public void run(String... args) throws Exception {\n    if (!redisTemplate.hasKey(graphId)) {\n      try (RedisGraph graph = new RedisGraph()) {\n        // create an index for Books on id\n        graph.query(graphId, \"CREATE INDEX ON :Book(id)\");\n        graph.query(graphId, \"CREATE INDEX ON :Category(id)\");\n        graph.query(graphId, \"CREATE INDEX ON :Author(name)\");\n        graph.query(graphId, \"CREATE INDEX ON :User(id)\");\n\n        Set<String> authors = new HashSet<String>();\n\n        // for each category create a graph node\n        categoryRepository.findAll().forEach(c -> {\n          graph.query(graphId, String.format(\"CREATE (:Category {id: \\\\\"%s\\\\\", name: \\\\\"%s\\\\\"})\", c.getId(), c.getName()));\n        });\n\n        // for each book create a graph node\n        bookRepository.findAll().forEach(b -> {\n          graph.query(graphId, String.format(\"CREATE (:Book {id: \\\\\"%s\\\\\", title: \\\\\"%s\\\\\"})\", b.getId(), b.getTitle()));\n          // for each author create an AUTHORED relationship to the book\n          if (b.getAuthors() != null) {\n            b.getAuthors().forEach(a -> {\n              if (!authors.contains(a)) {\n                graph.query(graphId, String.format(\"CREATE (:Author {name: \\\\\"%s\\\\\"})\", a));\n                authors.add(a);\n              }\n              graph.query(graphId, String.format(\n                  \"MATCH (a:Author {name: \\\\\"%s\\\\\"}), (b:Book {id: \\\\\"%s\\\\\"}) CREATE (a)-[:AUTHORED]->(b)\", a, b.getId()));\n            });\n\n            b.getCategories().forEach(c -> {\n              graph.query(graphId,\n                  String.format(\"MATCH (b:Book {id: \\\\\"%s\\\\\"}), (c:Category {id: \\\\\"%s\\\\\"}) CREATE (b)-[:IN]->(c)\",\n                      b.getId(), c.getId()));\n            });\n          }\n        });\n\n        // for each user create a graph node\n        userRepository.findAll().forEach(u -> {\n          graph.query(graphId, String.format(\"CREATE (:User {id: \\\\\"%s\\\\\", name: \\\\\"%s\\\\\"})\", u.getId(), u.getName()));\n\n          // for each of the user's book create a purchased relationship\n          u.getBooks().forEach(book -> {\n            graph.query(graphId,\n                String.format(\"MATCH (u:User {id: \\\\\"%s\\\\\"}), (b:Book {id: \\\\\"%s\\\\\"}) CREATE (u)-[:PURCHASED]->(b)\",\n                    u.getId(), book.getId()));\n          });\n        });\n\n        // for each book rating create a rated relationship\n        bookRatingRepository.findAll().forEach(br -> {\n          graph.query(graphId,\n              String.format(\"MATCH (u:User {id: \\\\\"%s\\\\\"}), (b:Book {id: \\\\\"%s\\\\\"}) CREATE (u)-[:RATED {rating: %s}]->(b)\",\n                  br.getUser().getId(), br.getBook().getId(), br.getRating()));\n        });\n      }\n\n      log.info(\">>>> Created graph...\");\n    }\n  }\n}\n`}</code></pre>\n    <p>{`Lets break down the graph creation:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`We inject the needed repositories for users, books, book rating and categories`}</li>\n      <li parentName=\"ul\">{`We check if the key for the graph does not exist to prevent recreating the graph on restarts`}</li>\n      <li parentName=\"ul\">{`We create 4 single property indexes for the Book id, Category id, Author name and User id. RedisGraph supports indexes for node labels. Indexes are automatically used by queries that reference any indexed properties.`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`For each book category we create a node`}</li>\n          <li parentName=\"ul\">{`For each book we create a node`}</li>\n          <li parentName=\"ul\">{`For each author we create a node`}</li>\n          <li parentName=\"ul\">{`For each book author we created a AUTHORED relationship between the author and the book`}</li>\n          <li parentName=\"ul\">{`For each book we created an IN relationship with the category`}</li>\n          <li parentName=\"ul\">{`For each user we create a node`}</li>\n          <li parentName=\"ul\">{`For each book owned by a user we create a PURCHASED relationship`}</li>\n          <li parentName=\"ul\">{`For each book rating we create a RATED relationship between the user and the book`}</li>\n        </ul>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"creating-the-recommendations-service\"\n    }}>{`Creating the Recommendations Service`}</h3>\n    <p>{`As we did in the Search Lesson, we are going to use a Service abstraction to encapsulate the complexity of the recommendations engine.\nLets start with the skeleton of the recommendation service. Create the src/main/java/com/redislabs/edu/redi2read/services/RecommendationService.java file and add the contents as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.services;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport com.redislabs.redisgraph.Record;\nimport com.redislabs.redisgraph.ResultSet;\nimport com.redislabs.redisgraph.graph_entities.Node;\nimport com.redislabs.redisgraph.impl.api.RedisGraph;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class RecommendationService {\n\n  @Value(\"\\${app.graphId}\")\n  public String graphId;\n\n  RedisGraph graph = new RedisGraph();\n\n  // add magic here!\n}\n`}</code></pre>\n    <p>{`Getting Book Recommendations From Common Purchases\nOur first recommendation method will find recommendations by looking at purchases of other users that have bought some of the same books a user has in its bookshelf:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`MATCH (u:User { id: '8675309' })-[:PURCHASED]->(ob:Book)\nMATCH (ob)<-[:PURCHASED]-(:User)-[:PURCHASED]->(b:Book)\nWHERE NOT (u)-[:PURCHASED]->(b)\nRETURN distinct b, count(b) as frequency\nORDER BY frequency DESC\n`}</code></pre>\n    <p>{`Lets break down the Cypher query:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The anchor for the query is the Users id, in this case 8675309`}</li>\n      <li parentName=\"ul\">{`On the first MATCH we look for the given user purchases`}</li>\n      <li parentName=\"ul\">{`On the second MATCH we find other users that have purchase a book the user has purchased and also collect the other users books`}</li>\n      <li parentName=\"ul\">{`On WHERE clause we make sure that the user doesnt already own any of the recommended books`}</li>\n      <li parentName=\"ul\">{`ON the RETURN we make sure to remove duplicates and we count how often a book has been purchased`}</li>\n      <li parentName=\"ul\">{`Finally on the ORDER BY, we return the most purchased books first`}</li>\n    </ul>\n    <p>{`Running the query on RedisInsight we get graphical display in which we can navigate the relationships of the result set:`}</p>\n    <p><img alt={\"RedisInsight Query Results Graph\"} src={require(\"!url-loader?limit=10000&name=assets/images/[name]-[hash].[ext]&fallback=file-loader!./images/redis-insight-query-graph.png\").default} /></p>\n    <p>{`There is also a tabular results view that reflect the values of the RETURN clause:`}</p>\n    <p><img alt={\"RedisInsight Query Results Table\"} src={require(\"!url-loader?limit=10000&name=assets/images/[name]-[hash].[ext]&fallback=file-loader!./images/redis-insight-query-table.png\").default} /></p>\n    <p>{`To implement the above query in the recommendations service we can escape the query string, and we simply pass the prepared query string to JRedisGraphs query method:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`public Set<String> getBookRecommendationsFromCommonPurchasesForUser(String userId) {\n  Set<String> recommendations = new HashSet<String>();\n\n  String query = \"MATCH (u:User { id: '%s' })-[:PURCHASED]->(ob:Book) \" //\n               + \"MATCH (ob)<-[:PURCHASED]-(:User)-[:PURCHASED]->(b:Book) \" //\n               + \"WHERE NOT (u)-[:PURCHASED]->(b) \" //\n               + \"RETURN distinct b, count(b) as frequency \" //\n               + \"ORDER BY frequency DESC\";\n\n    ResultSet resultSet = graph.query(graphId, String.format(query, userId));\n\n    while (resultSet.hasNext()) {\n      Record record = resultSet.next();\n      Node book = record.getValue(\"b\");\n      recommendations.add(book.getProperty(\"id\").getValue().toString());\n    }\n\n    return recommendations;\n  }\n`}</code></pre>\n    <p>{`Similar to a JDBC result set, we have an iterator that returns Record objects. We extract the column of interest by its label, in the case above b for the Book entity. Graph Nodes like the book variable above are like Maps, we can get a property by its name id and then get the value with getValue().\nBooks Frequently Bought Together\nTo find books that are frequently bought together give an ISBN we use the query:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`MATCH (u:User)-[:PURCHASED]->(b1:Book {id: '%s'})\nMATCH (b1)<-[:PURCHASED]-(u)-[:PURCHASED]->(b2:Book)\nMATCH rated = (User)-[:RATED]-(b2) \" //\nWITH b1, b2, count(b2) as freq, head(relationships(rated)) as r\nWHERE b1 <> b2\nRETURN b2, freq, avg(r.rating)\nORDER BY freq, avg(r.rating) DESC\n`}</code></pre>\n    <p>{`Let's break it down:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The first MATCH find users that have the bought the target book`}</li>\n      <li parentName=\"ul\">{`The second MATCH finds other books purchased by those users`}</li>\n      <li parentName=\"ul\">{`The third MATCH find the ratings if any for those books`}</li>\n      <li parentName=\"ul\">{`The WITH clause groups the values gathered so far, counts number of purchases of the collected books and grab the metadata from the RATED notes`}</li>\n      <li parentName=\"ul\">{`The RETURN line returns the collected books, with the number of purchases and their average star rating`}</li>\n    </ul>\n    <p>{`To implement the above query in our service add the following method:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`  public Set<String> getFrequentlyBoughtTogether(String isbn) {\n    Set<String> recommendations = new HashSet<String>();\n\n    String query = \"MATCH (u:User)-[:PURCHASED]->(b1:Book {id: '%s'}) \" //\n        + \"MATCH (b1)<-[:PURCHASED]-(u)-[:PURCHASED]->(b2:Book) \" //\n        + \"MATCH rated = (User)-[:RATED]-(b2) \" //\n        + \"WITH b1, b2, count(b2) as freq, head(relationships(rated)) as r \" //\n        + \"WHERE b1 <> b2 \" //\n        + \"RETURN b2, freq, avg(r.rating) \" //\n        + \"ORDER BY freq, avg(r.rating) DESC\";\n\n    ResultSet resultSet = graph.query(graphId, String.format(query, isbn));\n    while (resultSet.hasNext()) {\n      Record record = resultSet.next();\n      Node book = record.getValue(\"b2\");\n      recommendations.add(book.getProperty(\"id\").getValue().toString());\n    }\n    return recommendations;\n  }\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"the-recommendations-controller\"\n    }}>{`The Recommendations Controller`}</h3>\n    <p>{`To serve our recommendations we will expose the recommendation service using the `}<inlineCode parentName=\"p\">{`RecommendationController`}</inlineCode>{`.\nCreate the `}<inlineCode parentName=\"p\">{`src/main/java/com/redislabs/edu/redi2read/controllers/RecommendationController.java`}</inlineCode>{`\nfile and add the contents as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.controllers;\n\nimport java.util.Set;\n\nimport com.redislabs.edu.redi2read.services.RecommendationService;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/api/recommendations\")\npublic class RecommendationController {\n\n  @Autowired\n  private RecommendationService recommendationService;\n\n  @GetMapping(\"/user/{userId}\")\n  public Set<String> userRecommendations(@PathVariable(\"userId\") String userId) {\n    return recommendationService.getBookRecommendationsFromCommonPurchasesForUser(userId);\n  }\n\n  @GetMapping(\"/isbn/{isbn}/pairings\")\n  public Set<String> frequentPairings(@PathVariable(\"isbn\") String isbn) {\n    return recommendationService.getFrequentlyBoughtTogether(isbn);\n  }\n}\n`}</code></pre>\n    <p>{`You can invoke the recommendation service with a curl request like:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl --location --request GET 'http://localhost:8080/api/recommendations/user/55214615117483454'\n`}</code></pre>\n    <p>{`or:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl --location --request GET 'http://localhost:8080/api/recommendations/isbn/1789610222/pairings'\n`}</code></pre>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\n  "]}]}