{"remainingRequest":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/babel-loader/lib/index.js??ref--11-1!/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/mdx-loader/src/index.js??ref--11-2!/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js??ref--11-3!/Users/ajeetraina/projects/8sep/redis-developer.github.io/docs/develop/python/fastapi/index-fastapi.mdx","dependencies":[{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/docs/develop/python/fastapi/index-fastapi.mdx","mtime":1631077488501},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/.docusaurus/docusaurus-plugin-content-docs/default/site-docs-develop-python-fastapi-index-fastapi-mdx-81f.json","mtime":1631077870285},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1631077703630},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/babel-loader/lib/index.js","mtime":1631077703341},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/mdx-loader/src/index.js","mtime":1631077777797},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js","mtime":1631077776334}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9leHRlbmRzIGZyb20iL1VzZXJzL2FqZWV0cmFpbmEvcHJvamVjdHMvOHNlcC9yZWRpcy1kZXZlbG9wZXIuZ2l0aHViLmlvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzIjtpbXBvcnQgUmVhY3QgZnJvbSdyZWFjdCc7aW1wb3J0e21keH1mcm9tJ0BtZHgtanMvcmVhY3QnO2V4cG9ydCBjb25zdCBmcm9udE1hdHRlcj17aWQ6J2luZGV4LWZhc3RhcGknLHRpdGxlOidVc2luZyBSZWRpcyB3aXRoIEZhc3RBUEknLHNpZGViYXJfbGFiZWw6J1JlZGlzIHdpdGggRmFzdEFQSScsc2x1ZzonL2RldmVsb3AvcHl0aG9uL2Zhc3RhcGknfTtleHBvcnQgY29uc3QgbWV0YWRhdGE9eyJ1bnZlcnNpb25lZElkIjoiZGV2ZWxvcC9weXRob24vZmFzdGFwaS9pbmRleC1mYXN0YXBpIiwiaWQiOiJkZXZlbG9wL3B5dGhvbi9mYXN0YXBpL2luZGV4LWZhc3RhcGkiLCJpc0RvY3NIb21lUGFnZSI6ZmFsc2UsInRpdGxlIjoiVXNpbmcgUmVkaXMgd2l0aCBGYXN0QVBJIiwiZGVzY3JpcHRpb24iOiJUaGlzIHR1dG9yaWFsIGhlbHBzIHlvdSBnZXQgc3RhcnRlZCB3aXRoIFJlZGlzIGFuZCBGYXN0QVBJLiIsInNvdXJjZSI6IkBzaXRlL2RvY3MvZGV2ZWxvcC9weXRob24vZmFzdGFwaS9pbmRleC1mYXN0YXBpLm1keCIsInNsdWciOiIvZGV2ZWxvcC9weXRob24vZmFzdGFwaSIsInBlcm1hbGluayI6Ii9kZXZlbG9wL3B5dGhvbi9mYXN0YXBpIiwiZWRpdFVybCI6Imh0dHBzOi8vZ2l0aHViLmNvbS9yZWRpcy1kZXZlbG9wZXIvcmVkaXMtZGV2ZWxvcGVyL2VkaXQvbWFzdGVyL2RvY3MvZGV2ZWxvcC9weXRob24vZmFzdGFwaS9pbmRleC1mYXN0YXBpLm1keCIsInZlcnNpb24iOiJjdXJyZW50Iiwic2lkZWJhcl9sYWJlbCI6IlJlZGlzIHdpdGggRmFzdEFQSSIsInNpZGViYXIiOiJkb2NzIiwicHJldmlvdXMiOnsidGl0bGUiOiJQeXRob24gYW5kIFJlZGlzIiwicGVybWFsaW5rIjoiL2RldmVsb3AvcHl0aG9uLyJ9LCJuZXh0Ijp7InRpdGxlIjoiLk5FVCBhbmQgUmVkaXMiLCJwZXJtYWxpbmsiOiIvZGV2ZWxvcC9kb3RuZXQvIn19Oy8qIEBqc3hSdW50aW1lIGNsYXNzaWMgKi8gLyogQGpzeCBtZHggKi9pbXBvcnQgVGFicyBmcm9tJ0B0aGVtZS9UYWJzJztpbXBvcnQgVGFiSXRlbSBmcm9tJ0B0aGVtZS9UYWJJdGVtJztpbXBvcnQgdXNlQmFzZVVybCBmcm9tJ0Bkb2N1c2F1cnVzL3VzZUJhc2VVcmwnO2ltcG9ydCBSZWRpc0NhcmQgZnJvbSdAc2l0ZS9zcmMvdGhlbWUvUmVkaXNDYXJkJztleHBvcnQgY29uc3QgdG9jPVt7dmFsdWU6J0ludHJvZHVjdGlvbicsaWQ6J2ludHJvZHVjdGlvbicsY2hpbGRyZW46W119LHt2YWx1ZTonTGVhcm5pbmcgT2JqZWN0aXZlcycsaWQ6J2xlYXJuaW5nLW9iamVjdGl2ZXMnLGNoaWxkcmVuOltdfSx7dmFsdWU6J1ByZS1UdXRvcmlhbCBRdWl6JyxpZDoncHJlLXR1dG9yaWFsLXF1aXonLGNoaWxkcmVuOltdfSx7dmFsdWU6J1NldCBVcCB0aGUgSXNCaXRjb2luTGl0IFByb2plY3QnLGlkOidzZXQtdXAtdGhlLWlzYml0Y29pbmxpdC1wcm9qZWN0JyxjaGlsZHJlbjpbXX0se3ZhbHVlOidBYm91dCBSZWRpc1RpbWVTZXJpZXMnLGlkOidhYm91dC1yZWRpc3RpbWVzZXJpZXMnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0FuIEFzeW5jaW8gUHJpbWVyJyxpZDonYW4tYXN5bmNpby1wcmltZXInLGNoaWxkcmVuOltdfSx7dmFsdWU6J0luc3RhbGxpbmcgdGhlIFJlZGlzIENsaWVudCcsaWQ6J2luc3RhbGxpbmctdGhlLXJlZGlzLWNsaWVudCcsY2hpbGRyZW46W119LHt2YWx1ZTonSW50ZWdyYXRlIGFpb3JlZGlzLXB5IHdpdGggRmFzdEFQSScsaWQ6J2ludGVncmF0ZS1haW9yZWRpcy1weS13aXRoLWZhc3RhcGknLGNoaWxkcmVuOlt7dmFsdWU6J0NyZWF0aW5nIHRoZSBUaW1lc2VyaWVzJyxpZDonY3JlYXRpbmctdGhlLXRpbWVzZXJpZXMnLGNoaWxkcmVuOltdfSx7dmFsdWU6J1N0b3JpbmcgU2VudGltZW50IGFuZCBQcmljZSBEYXRhIGluIFJlZGlzVGltZVNlcmllcycsaWQ6J3N0b3Jpbmctc2VudGltZW50LWFuZC1wcmljZS1kYXRhLWluLXJlZGlzdGltZXNlcmllcycsY2hpbGRyZW46W119XX0se3ZhbHVlOidDYWxjdWxhdGluZyBUaHJlZS1Ib3VyIEF2ZXJhZ2VzIHdpdGggUmVkaXNUaW1lU2VyaWVzJyxpZDonY2FsY3VsYXRpbmctdGhyZWUtaG91ci1hdmVyYWdlcy13aXRoLXJlZGlzdGltZXNlcmllcycsY2hpbGRyZW46W119LHt2YWx1ZTonQ2FjaGluZyBEYXRhIHdpdGggUmVkaXMnLGlkOidjYWNoaW5nLWRhdGEtd2l0aC1yZWRpcycsY2hpbGRyZW46W3t2YWx1ZTonV3JpdGluZyBDYWNoZSBEYXRhIHRvIFJlZGlzJyxpZDond3JpdGluZy1jYWNoZS1kYXRhLXRvLXJlZGlzJyxjaGlsZHJlbjpbXX0se3ZhbHVlOidSZWFkaW5nIENhY2hlIERhdGEgdG8gUmVkaXMnLGlkOidyZWFkaW5nLWNhY2hlLWRhdGEtdG8tcmVkaXMnLGNoaWxkcmVuOltdfV19LHt2YWx1ZTonU3VtbWFyeScsaWQ6J3N1bW1hcnknLGNoaWxkcmVuOltdfV07Y29uc3QgbGF5b3V0UHJvcHM9e3RvY307Y29uc3QgTURYTGF5b3V0PSJ3cmFwcGVyIjtleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNRFhDb250ZW50KHtjb21wb25lbnRzLC4uLnByb3BzfSl7cmV0dXJuIG1keChNRFhMYXlvdXQsX2V4dGVuZHMoe30sbGF5b3V0UHJvcHMscHJvcHMse2NvbXBvbmVudHM6Y29tcG9uZW50cyxtZHhUeXBlOiJNRFhMYXlvdXQifSksbWR4KCJwIixudWxsLGBUaGlzIHR1dG9yaWFsIGhlbHBzIHlvdSBnZXQgc3RhcnRlZCB3aXRoIFJlZGlzIGFuZCBGYXN0QVBJLmApLG1keCgiaDIiLHsiaWQiOiJpbnRyb2R1Y3Rpb24ifSxgSW50cm9kdWN0aW9uYCksbWR4KCJwIixudWxsLG1keCgiYSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InAifSx7ImhyZWYiOiJodHRwczovL2dpdGh1Yi5jb20vdGlhbmdvbG8vZmFzdGFwaSJ9KSxgRmFzdEFQSWApLGAgaXMgYSBQeXRob24gd2ViIGZyYW1ld29yayBiYXNlZCBvbgp0aGUgYCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJocmVmIjoiaHR0cHM6Ly93d3cuc3RhcmxldHRlLmlvLyJ9KSxgU3RhcmxldHRlYCksYCBtaWNyb2ZyYW1ld29yay4gV2l0aCBkZWVwIHN1cHBvcnQgZm9yCmFzeW5jaW8sIEZhc3RBUEkgaXMgaW5kZWVkIGAsbWR4KCJlbSIse3BhcmVudE5hbWU6InAifSxgdmVyeSBmYXN0YCksYC4gRmFzdEFQSSBhbHNvIGRpc3Rpbmd1aXNoZXMgaXRzZWxmIHdpdGgKZmVhdHVyZXMgbGlrZSBhdXRvbWF0aWMgYCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJocmVmIjoiaHR0cHM6Ly9vcGVuYXBpcy5vcmcvIn0pLGBPcGVuQVBJIChPQVMpYCksYCBkb2N1bWVudGF0aW9uIGZvciB5b3VyIEFQSSwKZWFzeS10by11c2UgZGF0YSB2YWxpZGF0aW9uIHRvb2xzLCBhbmQgbW9yZS5gKSxtZHgoInAiLG51bGwsYE9mIGNvdXJzZSwgdGhlIGJlc3Qgd2F5IHRvIGAsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYG1ha2UgeW91ciBGYXN0QVBJIHNlcnZpY2UgZXZlbiBmYXN0ZXJgKSxgIGlzIHRvIHVzZQpSZWRpcy4gVW5saWtlIG1vc3QgZGF0YWJhc2VzLCBSZWRpcyBleGNlbHMgYXQgbG93LWxhdGVuY3kgYWNjZXNzIGJlY2F1c2UgaXQncyBhbiBpbi1tZW1vcnkgZGF0YWJhc2UuYCksbWR4KCJwIixudWxsLGBJbiB0aGlzIHR1dG9yaWFsLCB3ZSdsbCB3YWxrIHRocm91Z2ggdGhlIHN0ZXBzIG5lY2Vzc2FyeSB0byB1c2UgUmVkaXMgd2l0aApGYXN0QVBJLiBXZSdyZSBnb2luZyB0byBidWlsZCBgLG1keCgiZW0iLHtwYXJlbnROYW1lOiJwIn0sYElzQml0Y29pbkxpdGApLGAsIGFuIEFQSSB0aGF0IHN0b3JlcyBCaXRjb2luCnNlbnRpbWVudCBhbmQgcHJpY2UgYXZlcmFnZXMgaW4gYCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJocmVmIjoiaHR0cHM6Ly9vc3MucmVkaXNsYWJzLmNvbS9yZWRpc3RpbWVzZXJpZXMvIn0pLGBSZWRpc1RpbWVTZXJpZXNgKSxgLCB0aGVuIHJvbGxzIHRoZXNlIGF2ZXJhZ2VzIHVwIGZvcgp0aGUgbGFzdCB0aHJlZSBob3Vycy5gKSxtZHgoInAiLG51bGwsYE5leHQsIGxldCdzIGxvb2sgYXQgdGhlIGxlYXJuaW5nIG9iamVjdGl2ZXMgb2YgdGhpcyB0dXRvcmlhbC5gKSxtZHgoImgyIix7ImlkIjoibGVhcm5pbmctb2JqZWN0aXZlcyJ9LGBMZWFybmluZyBPYmplY3RpdmVzYCksbWR4KCJwIixudWxsLGBUaGUgbGVhcm5pbmcgb2JqZWN0aXZlcyBvZiB0aGlzIHR1dG9yaWFsIGFyZTpgKSxtZHgoIm9sIixudWxsLG1keCgibGkiLHtwYXJlbnROYW1lOiJvbCJ9LGBMZWFybiBob3cgdG8gaW5zdGFsbCBhaW9yZWRpcy1weSBhbmQgY29ubmVjdCB0byBSZWRpc2ApLG1keCgibGkiLHtwYXJlbnROYW1lOiJvbCJ9LGBMZWFybiBob3cgdG8gaW50ZWdyYXRlIGFpb3JlZGlzLXB5IHdpdGggRmFzdEFQSWApLG1keCgibGkiLHtwYXJlbnROYW1lOiJvbCJ9LGBMZWFybiBob3cgdG8gdXNlIFJlZGlzVGltZVNlcmllcyB0byBzdG9yZSBhbmQgcXVlcnkgdGltZXNlcmllcyBkYXRhYCksbWR4KCJsaSIse3BhcmVudE5hbWU6Im9sIn0sYExlYXJuIGhvdyB0byB1c2UgUmVkaXMgYXMgYSBjYWNoZSB3aXRoIGFpb3JlZGlzLXB5YCkpLG1keCgicCIsbnVsbCxgTGV0J3MgZ2V0IHN0YXJ0ZWQhYCksbWR4KCJoMiIseyJpZCI6InByZS10dXRvcmlhbC1xdWl6In0sYFByZS1UdXRvcmlhbCBRdWl6YCksbWR4KCJwIixudWxsLGBXYW50IHRvIGNoZWNrIGdhcHMgaW4geW91ciBrbm93bGVkZ2Ugb2YgUmVkaXMgYW5kIEZhc3RBUEkgYmVmb3JlIHlvdSBjb250aW51ZT8gVGFrZSBvdXIgc2hvcnQgcHJlLXR1dG9yaWFsIHF1aXohYCksbWR4KCJpZnJhbWUiLHtzcmM6Imh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2Zvcm1zL2QvZS8xRkFJcFFMU2ZGbUJXTHRtOG9Mb3VhaVQzd1hwYmdabThEZi1GVl94RnZudVhFV2ZiQ29oM2Nsdy92aWV3Zm9ybT9lbWJlZGRlZD10cnVlIix3aWR0aDoiNjQwIixoZWlnaHQ6IjUyNCIsZnJhbWVib3JkZXI6IjAiLG1hcmdpbmhlaWdodDoiMCIsbWFyZ2lud2lkdGg6IjAifSwiTG9hZGluZ1x1MjAyNiIpLG1keCgicCIsbnVsbCxgWW91IGNhbiBhbHNvIGAsbWR4KCJhIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicCJ9LHsiaHJlZiI6Imh0dHBzOi8vZm9ybXMuZ2xlL2VYaWlWY2dYcUc5VU5hckc2In0pLGB2aXNpdCB0aGUgcXVpeiBkaXJlY3RseWApLGAuYCksbWR4KCJoMiIseyJpZCI6InNldC11cC10aGUtaXNiaXRjb2lubGl0LXByb2plY3QifSxgU2V0IFVwIHRoZSBJc0JpdGNvaW5MaXQgUHJvamVjdGApLG1keCgicCIsbnVsbCxgWW91IGNhbiBhY2hpZXZlIHRoZSBsZWFybmluZyBvYmplY3RpdmVzIG9mIHRoaXMgdHV0b3JpYWwgYnkgcmVhZGluZyB0aHJvdWdoIHRoZQp0ZXh0IGFuZCBjb2RlIGV4YW1wbGVzIHRoYXQgZm9sbG93LmApLG1keCgicCIsbnVsbCxgSG93ZXZlciwgd2UgcmVjb21tZW5kIHRoYXQgeW91IHNldCB1cCB0aGUgZXhhbXBsZSBwcm9qZWN0IHlvdXJzZWxmLCBzbyB0aGF0IHlvdQpjYW4gdHJ5IG91dCBzb21lIG9mIHRoZSBjb2RlIGFzIHlvdSBsZWFybi4gVGhlIHByb2plY3QgaGFzIGEgcGVybWlzc2l2ZSBsaWNlbnNlCnRoYXQgYWxsb3dzIHlvdSB0byB1c2UgaXQgZnJlZWx5LmApLG1keCgicCIsbnVsbCxgVG8gZ2V0IHN0YXJ0ZWQsIGAsbWR4KCJhIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicCJ9LHsiaHJlZiI6Imh0dHBzOi8vZ2l0aHViLmNvbS9yZWRpcy1kZXZlbG9wZXIvZmFzdGFwaS1yZWRpcy10dXRvcmlhbCJ9KSxgZm9yayB0aGUgZXhhbXBsZSBwcm9qZWN0IG9uCkdpdEh1YmApLGAuYCksbWR4KCJwIixudWxsLG1keCgiYSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InAifSx7ImhyZWYiOiJodHRwczovL2dpdGh1Yi5jb20vcmVkaXMtZGV2ZWxvcGVyL2Zhc3RhcGktcmVkaXMtdHV0b3JpYWwvYmxvYi9tYXN0ZXIvUkVBRE1FLm1kIn0pLGBGb2xsb3cgdGhlIFJFQURNRWApLGAKdG8gdGhlIHByb2plY3QgcnVubmluZy5gKSxtZHgoImgyIix7ImlkIjoiYWJvdXQtcmVkaXN0aW1lc2VyaWVzIn0sYEFib3V0IFJlZGlzVGltZVNlcmllc2ApLG1keCgicCIsbnVsbCxgUmVkaXNUaW1lU2VyaWVzIGlzIGEgc291cmNlIGF2YWlsYWJsZSBSZWRpcyBNb2R1bGUgdGhhdCBhZGRzIGEgdGltZXNlcmllcyBkYXRhIHR5cGUgdG8gUmVkaXMuIFRpbWVzZXJpZXMgaXMgYSBncmVhdCB3YXkgdG8gbW9kZWwgYW55IGRhdGEgdGhhdCB5b3Ugd2FudCB0byBxdWVyeSBvdmVyIHRpbWUsIGxpa2UgaW4gdGhpcyBjYXNlLCB0aGUgZXZlci1jaGFuZ2luZyBwcmljZSBvZiBCaXRjb2luLmApLG1keCgicCIsbnVsbCxgWW91IGNhbiBnZXQgc3RhcnRlZCBieSBmb2xsb3dpbmcgdGhlIGAsbWR4KCJhIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicCJ9LHsiaHJlZiI6Imh0dHBzOi8vb3NzLnJlZGlzbGFicy5jb20vcmVkaXN0aW1lc2VyaWVzLyNzZXR1cCJ9KSxgc2V0dXAgaW5zdHJ1Y3Rpb25zYCksYCBpbiB0aGUgUmVkaXNUaW1lU2VyaWVzIGRvY3VtZW50YXRpb24uYCksbWR4KCJwIixudWxsLGBIb3dldmVyLCBub3RlIHRoYXQgdGhpcyB0dXRvcmlhbCdzIGV4YW1wbGUgcHJvamVjdCBjb25maWd1cmVzIFJlZGlzVGltZVNlcmllcyBhdXRvbWF0aWNhbGx5IGZvciB5b3Ugd2l0aCB0aGUgYCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJocmVmIjoiaHR0cHM6Ly9odWIuZG9ja2VyLmNvbS9yL3JlZGlzbGFicy9yZWRpc21vZCJ9KSxgcmVkaXNtb2RgKSxgIERvY2tlciBpbWFnZS5gKSxtZHgoImgyIix7ImlkIjoiYW4tYXN5bmNpby1wcmltZXIifSxgQW4gQXN5bmNpbyBQcmltZXJgKSxtZHgoInAiLG51bGwsYFRoZSBgLG1keCgiZW0iLHtwYXJlbnROYW1lOiJwIn0sYElzQml0Y29pbkxpdGApLGAgcHJvamVjdCBpcyBjb21wbGV0ZWx5IGFzeW5jLiBUaGF0IG1lYW5zIHdlIHVzZSBhbgphc3luY2lvLWNvbXBhdGlibGUgUmVkaXMgY2xpZW50IGNhbGxlZApgLG1keCgiYSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InAifSx7ImhyZWYiOiJodHRwczovL2dpdGh1Yi5jb20vYWlvLWxpYnMvYWlvcmVkaXMtcHkifSksYGFpb3JlZGlzLXB5YCksYCBhbmQgRmFzdEFQSSdzIGFzeW5jCmZlYXR1cmVzLmApLG1keCgicCIsbnVsbCxgSWYgeW91IGAsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYGFyZW4ndCBmYW1pbGlhciB3aXRoIGFzeW5jaW9gKSxgLCB0YWtlIGEgZmV3IG1pbnV0ZXMgdG8gd2F0Y2ggdGhpcwpwcmltZXIgb24gYXN5bmNpbyBiZWZvcmUgY29udGludWluZzpgKSxtZHgoImlmcmFtZSIse3dpZHRoOiI1NjAiLGhlaWdodDoiMzE1IixzcmM6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL1hibDdYakZZc040Iix0aXRsZToiWW91VHViZSB2aWRlbyBwbGF5ZXIiLGZyYW1lYm9yZGVyOiIwIixhbGxvdzoiYWNjZWxlcm9tZXRlcjsgYXV0b3BsYXk7IGNsaXBib2FyZC13cml0ZTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZSIsYWxsb3dmdWxsc2NyZWVuOnRydWV9KSxtZHgoImgyIix7ImlkIjoiaW5zdGFsbGluZy10aGUtcmVkaXMtY2xpZW50In0sYEluc3RhbGxpbmcgdGhlIFJlZGlzIENsaWVudGApLG1keCgicCIsbnVsbCxgV2UncmUgZ29pbmcgdG8gc3RhcnQgdGhpcyB0dXRvcmlhbCBhc3N1bWluZyB0aGF0IHlvdSBoYXZlIGEgRmFzdEFQSSBwcm9qZWN0IHRvCndvcmsgd2l0aC4gV2UnbGwgdXNlIHRoZSBgLG1keCgiZW0iLHtwYXJlbnROYW1lOiJwIn0sYElzQml0Y29pbkxpdGApLGAgcHJvamVjdCBmb3Igb3VyIGV4YW1wbGVzLmApLG1keCgicCIsbnVsbCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJocmVmIjoiaHR0cHM6Ly9weXRob24tcG9ldHJ5Lm9yZy8ifSksYFBvZXRyeWApLGAgaXMgdGhlIGJlc3Qgd2F5IHRvIG1hbmFnZSBQeXRob24gZGVwZW5kZW5jaWVzIHRvZGF5LCBzbyB3ZSdsbCB1c2UgaXQgaW4gdGhpcyB0dXRvcmlhbC5gKSxtZHgoInAiLG51bGwsYElzQml0Y29pbkxpdCBpbmNsdWRlcyBhIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBweXByb2plY3QudG9tbGApLGAgZmlsZSB0aGF0IFBvZXRyeSB1c2VzIHRvIG1hbmFnZSB0aGUgcHJvamVjdCdzIGRpcmVjdG9yaWVzLCBidXQgaWYgeW91IGhhZCBub3QgYWxyZWFkeSBjcmVhdGVkIG9uZSwgeW91IGNvdWxkIGRvIHNvIGxpa2UgdGhpczpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7fSksYCAgICAkIHBvZXRyeSBpbml0ICAgCmApKSxtZHgoInAiLG51bGwsYE9uY2UgeW91IGhhdmUgYSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgcHlwcm9qZWN0LnRvbWxgKSxgIGZpbGUsIGFuZCBhc3N1bWluZyB5b3UgYWxyZWFkeSBhZGRlZCBGYXN0QVBJIGFuZCBhbnkgb3RoZXIgbmVjZXNzYXJ5IGRlcGVuZGVuY2llcywgeW91IGNvdWxkIGFkZCBhaW9yZWRpcy1weSB0byB5b3VyIHByb2plY3QgbGlrZSB0aGlzOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHt9KSxgICAgICQgcG9ldHJ5IGFkZCBhaW9yZWRpcy1weUAyLjAuMGIxCmApKSxtZHgoInAiLG51bGwsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYE5PVEVgKSxgOiBUaGlzIHR1dG9yaWFsIHVzZXMgYSBiZXRhIHZlcnNpb24gb2YgYWlvcmVkaXMtcHkgMi4wLiBUaGUgMi4wIHZlcnNpb24gb2YgYWlvcmVkaXMtcHkgZmVhdHVyZXMgYW4gQVBJIHRoYXQgbWF0Y2hlcyB0aGUgbW9zdCBwb3B1bGFyIHN5bmNocm9ub3VzIFJlZGlzIGNsaWVudCBmb3IgUHl0aG9uLCBgLG1keCgiYSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InAifSx7ImhyZWYiOiJodHRwczovL2dpdGh1Yi5jb20vYW5keW1jY3VyZHkvcmVkaXMtcHkifSksYHJlZGlzLXB5YCksYC5gKSxtZHgoInAiLG51bGwsYFRoZSBhaW9yZWRpcy1weSBjbGllbnQgaXMgbm93IGluc3RhbGxlZC4gVGltZSB0byB3cml0ZSBzb21lIGNvZGUhYCksbWR4KCJoMiIseyJpZCI6ImludGVncmF0ZS1haW9yZWRpcy1weS13aXRoLWZhc3RhcGkifSxgSW50ZWdyYXRlIGFpb3JlZGlzLXB5IHdpdGggRmFzdEFQSWApLG1keCgicCIsbnVsbCxgV2UncmUgZ29pbmcgdG8gdXNlIFJlZGlzIGZvciBhIGZldyB0aGluZ3MgaW4gdGhpcyBGYXN0QVBJIGFwcDpgKSxtZHgoIm9sIixudWxsLG1keCgibGkiLHtwYXJlbnROYW1lOiJvbCJ9LGBTdG9yaW5nIDMwLXNlY29uZCBhdmVyYWdlcyBvZiBzZW50aW1lbnQgYW5kIHByaWNlIGZvciB0aGUgbGFzdCAyNCBob3VycyB3aXRoIFJlZGlzVGltZVNlcmllc2ApLG1keCgibGkiLHtwYXJlbnROYW1lOiJvbCJ9LGBSb2xsaW5nIHVwIHRoZXNlIGF2ZXJhZ2VzIGludG8gYSB0aHJlZS1ob3VyIHNuYXBzaG90IHdpdGggUmVkaXNUaW1lU2VyaWVzYCksbWR4KCJsaSIse3BhcmVudE5hbWU6Im9sIn0sYENhY2hpbmcgdGhlIHRocmVlLWhvdXIgc25hcHNob3RgKSksbWR4KCJwIixudWxsLGBMZXQncyBsb29rIGF0IGVhY2ggb2YgdGhlc2UgaW50ZWdyYXRpb24gcG9pbnRzIGluIG1vcmUgZGV0YWlsLmApLG1keCgiaDMiLHsiaWQiOiJjcmVhdGluZy10aGUtdGltZXNlcmllcyJ9LGBDcmVhdGluZyB0aGUgVGltZXNlcmllc2ApLG1keCgicCIsbnVsbCxgVGhlIGRhdGEgZm9yIG91ciBhcHAgY29uc2lzdHMgb2YgMzAtc2Vjb25kIGF2ZXJhZ2VzIG9mIEJpdGNvaW4gcHJpY2VzIGFuZCBzZW50aW1lbnQgcmF0aW5ncyBmb3IgdGhlIGxhc3QgMjQgaG91cnMuIFdlIHB1bGwgdGhlc2UgZnJvbSB0aGUgYCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJocmVmIjoiaHR0cHM6Ly9zZW50aWNyeXB0LmNvbS9kb2NzLmh0bWwifSksYFNlbnRpQ3J5cHQgQVBJYCksYC5gKSxtZHgoInAiLG51bGwsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYE5PVEVgKSxgOiBXZSBoYXZlIG5vIGFmZmlsaWF0aW9uIHdpdGggU2VudGlDcnlwdCBvciBhbnkgaWRlYSBob3cgYWNjdXJhdGUgdGhlc2UgbnVtYmVycyBhcmUuIFRoaXMgZXhhbXBsZSBpcyBgLG1keCgic3Ryb25nIix7cGFyZW50TmFtZToicCJ9LGBqdXN0IGZvciBmdW5gKSxgIWApLG1keCgicCIsbnVsbCxgV2UncmUgZ29pbmcgdG8gc3RvcmUgcHJpY2UgYW5kIHNlbnRpbWVudCBhdmVyYWdlcyBpbiBhIHRpbWVzZXJpZXMgd2l0aCBSZWRpc1RpbWVTZXJpZXMsIHNvIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHRoYXQgd2hlbiB0aGUgYXBwIHN0YXJ0cyB1cCwgdGhlIHRpbWVzZXJpZXMgZXhpc3RzLmApLG1keCgicCIsbnVsbCxgV2UgY2FuIHVzZSBhIGAsbWR4KCJhIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicCJ9LHsiaHJlZiI6Imh0dHBzOi8vZmFzdGFwaS50aWFuZ29sby5jb20vYWR2YW5jZWQvZXZlbnRzLyJ9KSxgc3RhcnR1cCBldmVudGApLGAgdG8gYWNjb21wbGlzaCB0aGlzLiBEb2luZyBzbyBsb29rcyBsaWtlIHRoZSBmb2xsb3dpbmc6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1weXRob24ifSksYEBhcHAub25fZXZlbnQoJ3N0YXJ0dXAnKQphc3luYyBkZWYgc3RhcnR1cF9ldmVudCgpOgogICAga2V5cyA9IEtleXMoKQogICAgYXdhaXQgaW5pdGlhbGl6ZV9yZWRpcyhrZXlzKQpgKSksbWR4KCJwIixudWxsLGBXZSdsbCB1c2UgdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBUUy5DUkVBVEVgKSxgIFJlZGlzVGltZVNlcmllcyBjb21tYW5kIHRvIGNyZWF0ZSB0aGUgdGltZXNlcmllcyB3aXRoaW4gb3VyIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBpbml0aWFsaXplX3JlZGlzKClgKSxgIGZ1bmN0aW9uOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcHl0aG9uIn0pLGBhc3luYyBkZWYgbWFrZV90aW1lc2VyaWVzKGtleSk6CiAgICAiIiIKICAgIENyZWF0ZSBhIHRpbWVzZXJpZXMgd2l0aCB0aGUgUmVkaXMga2V5IFxga2V5XGAuCgogICAgV2UnbGwgdXNlIHRoZSBkdXBsaWNhdGUgcG9saWN5IGtub3duIGFzICJmaXJzdCwiIHdoaWNoIGlnbm9yZXMKICAgIGR1cGxpY2F0ZSBwYWlycyBvZiB0aW1lc3RhbXAgYW5kIHZhbHVlcyBpZiB3ZSBhZGQgdGhlbS4KCiAgICBCZWNhdXNlIG9mIHRoaXMsIHdlIGRvbid0IHdvcnJ5IGFib3V0IGhhbmRsaW5nIHRoaXMgbG9naWMKICAgIG91cnNlbHZlcyAtLSBidXQgbm90ZSB0aGF0IHRoZXJlIGlzIGEgcGVyZm9ybWFuY2UgY29zdCB0byB3cml0ZXMKICAgIHVzaW5nIHRoaXMgcG9saWN5LgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgYXdhaXQgcmVkaXMuZXhlY3V0ZV9jb21tYW5kKAogICAgICAgICAgICAnVFMuQ1JFQVRFJywga2V5LAogICAgICAgICAgICAnRFVQTElDQVRFX1BPTElDWScsICdmaXJzdCcsCiAgICAgICAgKQogICAgZXhjZXB0IFJlc3BvbnNlRXJyb3IgYXMgZToKICAgICAgICAjIFRpbWUgc2VyaWVzIHByb2JhYmx5IGFscmVhZHkgZXhpc3RzCiAgICAgICAgbG9nLmluZm8oJ0NvdWxkIG5vdCBjcmVhdGUgdGltZXNlcmllcyAlcywgZXJyb3I6ICVzJywga2V5LCBlKQoKYCkpLG1keCgicCIsbnVsbCxtZHgoInN0cm9uZyIse3BhcmVudE5hbWU6InAifSxgVElQYCksYDogQW4gaW50ZXJlc3RpbmcgcG9pbnQgdG8gbm90ZSBmcm9tIHRoaXMgY29kZSBpcyB0aGF0IHdoZW4gd2UgY3JlYXRlIGEgdGltZXNlcmllcywgd2UgY2FuIHVzZSB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYERVUExJQ0FURV9QT0xJQ1lgKSxgIG9wdGlvbiB0byBzcGVjaWZ5IGhvdyB0byBoYW5kbGUgZHVwbGljYXRlIHBhaXJzIG9mIHRpbWVzdGFtcCBhbmQgdmFsdWVzLmApLG1keCgiaDMiLHsiaWQiOiJzdG9yaW5nLXNlbnRpbWVudC1hbmQtcHJpY2UtZGF0YS1pbi1yZWRpc3RpbWVzZXJpZXMifSxgU3RvcmluZyBTZW50aW1lbnQgYW5kIFByaWNlIERhdGEgaW4gUmVkaXNUaW1lU2VyaWVzYCksbWR4KCJwIixudWxsLGBBIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAvcmVmcmVzaGApLGAgZW5kcG9pbnQgZXhpc3RzIGluIHRoZSBhcHAgdG8gYWxsb3cgYSBjbGllbnQgdG8gdHJpZ2dlciBhIHJlZnJlc2ggb2YgdGhlIDMwLXNlY29uZCBhdmVyYWdlcy4gVGhpcyBpcyB0aGUgZW50aXJlIGZ1bmN0aW9uOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcHl0aG9uIn0pLGBAYXBwLnBvc3QoJy9yZWZyZXNoJykKYXN5bmMgZGVmIHJlZnJlc2goYmFja2dyb3VuZF90YXNrczogQmFja2dyb3VuZFRhc2tzLCBrZXlzOiBLZXlzID0gRGVwZW5kcyhtYWtlX2tleXMpKToKICAgIGFzeW5jIHdpdGggaHR0cHguQXN5bmNDbGllbnQoKSBhcyBjbGllbnQ6CiAgICAgICAgZGF0YSA9IGF3YWl0IGNsaWVudC5nZXQoU0VOVElNRU5UX0FQSV9VUkwpCiAgICBhd2FpdCBwZXJzaXN0KGtleXMsIGRhdGEuanNvbigpKQogICAgZGF0YSA9IGF3YWl0IGNhbGN1bGF0ZV90aHJlZV9ob3Vyc19vZl9kYXRhKGtleXMpCiAgICBiYWNrZ3JvdW5kX3Rhc2tzLmFkZF90YXNrKHNldF9jYWNoZSwgZGF0YSwga2V5cykKCmApKSxtZHgoInAiLG51bGwsYEFzIGlzIG9mdGVuIHRoZSBjYXNlIHdpdGggUHl0aG9uLCBhIGxvdCBoYXBwZW5zIGluIGEgZmV3IGxpbmVzLCBzbyBsZXQncyB3YWxrIHRocm91Z2ggdGhlbS5gKSxtZHgoInAiLG51bGwsYFRoZSBmaXJzdCB0aGluZyB3ZSBkbyBpcyBnZXQgdGhlIGxhdGVzdCBzZW50aW1lbnQgYW5kIHByaWNlIGRhdGEgZnJvbSBTZW50aUNyeXB0LiBUaGUgcmVzcG9uc2UgZGF0YSBsb29rcyBsaWtlIHRoaXM6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1qc29uIn0pLGBbCiAgICB7CiAgICAgICAgImNvdW50IjogNzI1OSwKICAgICAgICAidGltZXN0YW1wIjogMTYyNTU5MjYyNi4zNDUyMDM0LAogICAgICAgICJyYXRlIjogMC4wLAogICAgICAgICJsYXN0IjogMC4zMywKICAgICAgICAic3VtIjogMTQyNS44MiwKICAgICAgICAibWVhbiI6IDAuMiwKICAgICAgICAibWVkaWFuIjogMC4yMywKICAgICAgICAiYnRjX3ByaWNlIjogIjMzODg1LjIzIgogICAgfSwgCiAgICAvLy4uLiBNYW55IG1vcmUgZW50cmllcwpdCmApKSxtZHgoInAiLG51bGwsYFRoZW4gd2Ugc2F2ZSB0aGUgZGF0YSBpbnRvIHR3byB0aW1lc2VyaWVzIGluIFJlZGlzIHdpdGggdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBwZXJzaXN0KClgKSxgIGZ1bmN0aW9uLiBUaGF0IGVuZHMgdXAgY2FsbGluZyBhbm90aGVyIGhlbHBlciwgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGFkZF9tYW55X3RvX3RpbWVzZXJpZXMoKWApLGAsIGxpa2UgdGhpczpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXB5dGhvbiJ9KSxgICAgIGF3YWl0IGFkZF9tYW55X3RvX3RpbWVzZXJpZXMoCiAgICAgICAgKAogICAgICAgICAgICAodHNfcHJpY2Vfa2V5LCAnYnRjX3ByaWNlJyksCiAgICAgICAgICAgICh0c19zZW50aW1lbnRfa2V5LCAnbWVhbicpLAogICAgICAgICksIGRhdGEsCiAgICApCmApKSxtZHgoInAiLG51bGwsYFRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgYWRkX21hbnlfdG9fdGltZXNlcmllcygpYCksYCBmdW5jdGlvbiB0YWtlcyBhIGxpc3Qgb2YgKHRpbWVzZXJpZXMga2V5LCBzYW1wbGUga2V5KSBwYWlycyBhbmQgYSBsaXN0IG9mIHNhbXBsZXMgZnJvbSBTZW50aUNyeXB0LiBGb3IgZWFjaCBzYW1wbGUsIGl0IHJlYWRzIHRoZSB2YWx1ZSBvZiB0aGUgc2FtcGxlIGtleSBpbiB0aGUgU2VudGlDcnlwdCBzYW1wbGUsIGxpa2UgImJ0Y19wcmljZSwiIGFuZCBhZGRzIHRoYXQgdmFsdWUgdG8gdGhlIGdpdmVuIHRpbWVzZXJpZXMga2V5LmApLG1keCgicCIsbnVsbCxgSGVyZSdzIHRoZSBmdW5jdGlvbjpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXB5dGhvbiJ9KSxgYXN5bmMgZGVmIGFkZF9tYW55X3RvX3RpbWVzZXJpZXMoCiAgICBrZXlfcGFpcnM6IEl0ZXJhYmxlW1R1cGxlW3N0ciwgc3RyXV0sCiAgICBkYXRhOiBCaXRjb2luU2VudGltZW50cwopOgogICAgIiIiCiAgICBBZGQgbWFueSBzYW1wbGVzIHRvIGEgc2luZ2xlIHRpbWVzZXJpZXMga2V5LgoKICAgIFxga2V5X3BhaXJzXGAgaXMgYW4gaXRlcmF0YmxlIG9mIHR1cGxlcyBjb250YWluaW5nIGluIHRoZSAwdGggcG9zaXRpb24gdGhlCiAgICB0aW1lc3RhbXAga2V5IGludG8gd2hpY2ggdG8gaW5zZXJ0IGVudHJpZXMgYW5kIHRoZSAxdGggcG9zaXRpb24gdGhlIG5hbWUKICAgIG9mIHRoZSBrZXkgd2l0aGluIHRoIFxgZGF0YVxgIGRpY3QgdG8gZmluZCB0aGUgc2FtcGxlLgogICAgIiIiCiAgICBwYXJ0aWFsID0gZnVuY3Rvb2xzLnBhcnRpYWwocmVkaXMuZXhlY3V0ZV9jb21tYW5kLCAnVFMuTUFERCcpCiAgICBmb3IgZGF0YXBvaW50IGluIGRhdGE6CiAgICAgICAgZm9yIHRpbWVzZXJpZXNfa2V5LCBzYW1wbGVfa2V5IGluIGtleV9wYWlyczoKICAgICAgICAgICAgcGFydGlhbCA9IGZ1bmN0b29scy5wYXJ0aWFsKAogICAgICAgICAgICAgICAgcGFydGlhbCwgdGltZXNlcmllc19rZXksIGludCgKICAgICAgICAgICAgICAgICAgICBmbG9hdChkYXRhcG9pbnRbJ3RpbWVzdGFtcCddKSAqIDEwMDAsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgZGF0YXBvaW50W3NhbXBsZV9rZXldLAogICAgICAgICAgICApCiAgICByZXR1cm4gYXdhaXQgcGFydGlhbCgpCmApKSxtZHgoInAiLG51bGwsYFRoaXMgY29kZSBpcyBkZW5zZSwgc28gbGV0J3MgYnJlYWsgaXQgZG93bi5gKSxtZHgoInAiLG51bGwsYFdlJ3JlIHVzaW5nIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgVFMuTUFERGApLGAgUmVkaXNUaW1lU2VyaWVzIGNvbW1hbmQgdG8gYWRkIG1hbnkgc2FtcGxlcyB0byBhIHRpbWVzZXJpZXMuIFdlIHVzZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgVFMuTUFERGApLGAgYmVjYXVzZSBkb2luZyBzbyBpcyBmYXN0ZXIgdGhhbiBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgVFMuQUREYCksYCBmb3IgYWRkaW5nIGJhdGNoZXMgb2Ygc2FtcGxlcyB0byBhIHRpbWVzZXJpZXMuYCksbWR4KCJwIixudWxsLGBUaGlzIHJlc3VsdHMgaW4gYSBzaW5nbGUgbGFyZ2UgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFRTLk1BRERgKSxgIGNhbGwgdGhhdCBhZGRzIHByaWNlIGRhdGEgdG8gdGhlIHByaWNlIHRpbWVzZXJpZXMgYW5kIHNlbnRpbWVudCBkYXRhIHRvIHRoZSBzZW50aW1lbnQgdGltZXNlcmllcy4gQ29udmVuaWVudGx5LCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgVFMuTUFERGApLGAgY2FuIGFkZCBzYW1wbGVzIHRvIG11bHRpcGxlIHRpbWVzZXJpZXMgaW4gYSBzaW5nbGUgY2FsbC5gKSxtZHgoImgyIix7ImlkIjoiY2FsY3VsYXRpbmctdGhyZWUtaG91ci1hdmVyYWdlcy13aXRoLXJlZGlzdGltZXNlcmllcyJ9LGBDYWxjdWxhdGluZyBUaHJlZS1Ib3VyIEF2ZXJhZ2VzIHdpdGggUmVkaXNUaW1lU2VyaWVzYCksbWR4KCJwIixudWxsLGBDbGllbnRzIHVzZSBJc0JpdGNvaW5MaXQgdG8gZ2V0IHRoZSBhdmVyYWdlIHByaWNlIGFuZCBzZW50aW1lbnQgZm9yIGVhY2ggb2YgdGhlIGxhc3QgdGhyZWUgaG91cnMuIEJ1dCBzbyBmYXIsIHdlJ3ZlIG9ubHkgc3RvcmVkIDMwLXNlY29uZCBhdmVyYWdlcyBpbiBSZWRpcy4gSG93IGRvIHdlIGNhbGN1bGF0ZSB0aGUgYXZlcmFnZSBvZiB0aGVzZSBhdmVyYWdlcyBmb3IgdGhlIGxhc3QgdGhyZWUgaG91cnM/YCksbWR4KCJwIixudWxsLGBXaGVuIHdlIHJ1biBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgL3JlZnJlc2hgKSxgLCB3ZSBjYWxsIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBjYWxjdWxhdGVfdGhyZWVfaG91cnNfb2ZfZGF0YSgpYCksYCB0byBkbyBzby4gVGhlIGZ1bmN0aW9uIGxvb2tzIGxpa2UgdGhpczpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXB5dGhvbiJ9KSxgYXN5bmMgZGVmIGNhbGN1bGF0ZV90aHJlZV9ob3Vyc19vZl9kYXRhKGtleXM6IEtleXMpIC0+IERpY3Rbc3RyLCBzdHJdOgogICAgc2VudGltZW50X2tleSA9IGtleXMudGltZXNlcmllc19zZW50aW1lbnRfa2V5KCkKICAgIHByaWNlX2tleSA9IGtleXMudGltZXNlcmllc19wcmljZV9rZXkoKQogICAgdGhyZWVfaG91cnNfYWdvX21zID0gaW50KChub3coKSAtIHRpbWVkZWx0YShob3Vycz0zKSkudGltZXN0YW1wKCkgKiAxMDAwKQoKICAgIHNlbnRpbWVudCA9IGF3YWl0IGdldF9ob3VybHlfYXZlcmFnZShzZW50aW1lbnRfa2V5LCB0aHJlZV9ob3Vyc19hZ29fbXMpCiAgICBwcmljZSA9IGF3YWl0IGdldF9ob3VybHlfYXZlcmFnZShwcmljZV9rZXksIHRocmVlX2hvdXJzX2Fnb19tcykKCiAgICBsYXN0X3RocmVlX2hvdXJzID0gW3sKICAgICAgICAncHJpY2UnOiBkYXRhWzBdWzFdLCAnc2VudGltZW50JzogZGF0YVsxXVsxXSwKICAgICAgICAndGltZSc6IGRhdGV0aW1lLmZyb210aW1lc3RhbXAoZGF0YVswXVswXSAvIDEwMDAsIHR6PXRpbWV6b25lLnV0YyksCiAgICB9CiAgICAgICAgZm9yIGRhdGEgaW4gemlwKHByaWNlLCBzZW50aW1lbnQpXQoKICAgIHJldHVybiB7CiAgICAgICAgJ2hvdXJseV9hdmVyYWdlX29mX2F2ZXJhZ2VzJzogbGFzdF90aHJlZV9ob3VycywKICAgICAgICAnc2VudGltZW50X2RpcmVjdGlvbic6IGdldF9kaXJlY3Rpb24obGFzdF90aHJlZV9ob3VycywgJ3NlbnRpbWVudCcpLAogICAgICAgICdwcmljZV9kaXJlY3Rpb24nOiBnZXRfZGlyZWN0aW9uKGxhc3RfdGhyZWVfaG91cnMsICdwcmljZScpLAogICAgfQpgKSksbWR4KCJwIixudWxsLGBUaGVyZSBpcyBtb3JlIGdvaW5nIG9uIGhlcmUgdGhhbiB3ZSBuZWVkIHRvIGtub3cgZm9yIHRoaXMgdHV0b3JpYWwuIEFzIGEgc3VtbWFyeSwgbW9zdCBvZiB0aGlzIGNvZGUgZXhpc3RzIHRvIHN1cHBvcnQgY2FsbHMgdG8gYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGdldF9ob3VybHlfYXZlcmFnZSgpYCksYC4gYCksbWR4KCJwIixudWxsLGBUaGF0IGZ1bmN0aW9uIGlzIHdoZXJlIHRoZSBjb3JlIGxvZ2ljIGV4aXN0cyB0byBjYWxjdWxhdGUgYXZlcmFnZXMgZm9yIHRoZSBsYXN0IHRocmVlIGhvdXJzLCBzbyBsZXQncyBzZWUgd2hhdCBpdCBjb250YWluczpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXB5dGhvbiJ9KSxgYXN5bmMgZGVmIGdldF9ob3VybHlfYXZlcmFnZSh0c19rZXk6IHN0ciwgdG9wX29mX3RoZV9ob3VyOiBpbnQpOgogICAgcmVzcG9uc2UgPSBhd2FpdCByZWRpcy5leGVjdXRlX2NvbW1hbmQoCiAgICAgICAgJ1RTLlJBTkdFJywgdHNfa2V5LCB0b3Bfb2ZfdGhlX2hvdXIsICcrJywKICAgICAgICAnQUdHUkVHQVRJT04nLCAnYXZnJywgSE9VUkxZX0JVQ0tFVCwKICAgICkKICAgICMgVGhlIHJlc3BvbnNlIGlzIGEgbGlzdCBvZiB0aGUgc3RydWN0dXJlIFt0aW1lc3RhbXAsIGF2ZXJhZ2VdLgogICAgcmV0dXJuIHJlc3BvbnNlCmApKSxtZHgoInAiLG51bGwsYEhlcmUsIHdlIHVzZSB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFRTLlJBTkdFYCksYCBjb21tYW5kIHRvIGdldCB0aGUgc2FtcGxlcyBpbiB0aGUgdGltZXNlcmllcyBmcm9tIHRoZSAidG9wIiBvZiB0aGUgaG91ciB0aHJlZSBob3VycyBhZ28sIHVudGlsIHRoZSBsYXRlc3Qgc2FtcGxlIGluIHRoZSBzZXJpZXMuIFdpdGggdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBBR0dSRUdBVEVgKSxgIHBhcmFtZXRlciwgd2UgZ2V0IGJhY2sgdGhlIGF2ZXJhZ2VzIG9mIHRoZSBzYW1wbGVzIGluIGhvdXJseSBidWNrZXRzLmApLG1keCgicCIsbnVsbCxgU28gd2hlcmUgZG9lcyB0aGlzIGxlYXZlIHVzPyBXaXRoIGAsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYGF2ZXJhZ2VzIG9mIHRoZSBhdmVyYWdlc2ApLGAsIG9uZSBmb3IgZWFjaCBvZiB0aGUgbGFzdCB0aHJlZSBob3Vycy5gKSxtZHgoImgyIix7ImlkIjoiY2FjaGluZy1kYXRhLXdpdGgtcmVkaXMifSxgQ2FjaGluZyBEYXRhIHdpdGggUmVkaXNgKSxtZHgoInAiLG51bGwsYExldCdzIHJldmlldy4gV2UgaGF2ZSBjb2RlIHRoYXQgYWNoaWV2ZXMgdGhlIGZvbGxvd2luZzpgKSxtZHgoIm9sIixudWxsLG1keCgibGkiLHtwYXJlbnROYW1lOiJvbCJ9LGBHZXRzIHRoZSBsYXRlc3Qgc2VudGltZW50IGFuZCBwcmljZSBkYXRhIGZyb20gU2VudGlDcnlwdC5gKSxtZHgoImxpIix7cGFyZW50TmFtZToib2wifSxgU2F2ZXMgdGhlIGRhdGEgaW50byB0d28gdGltZXNlcmllcyBpbiBSZWRpcy5gKSxtZHgoImxpIix7cGFyZW50TmFtZToib2wifSxgQ2FsY3VsYXRlcyB0aGUgYXZlcmFnZSBvZiB0aGUgYXZlcmFnZXMgZm9yIHRoZSBsYXN0IHRocmVlIGhvdXJzLmApKSxtZHgoInAiLG51bGwsYFRoZSBzbmFwc2hvdCBvZiBhdmVyYWdlcyBmb3IgdGhlIGxhc3QgdGhyZWUgaG91cnMgaXMgdGhlIGRhdGEgd2Ugd2FudCB0byBzZXJ2ZSBjbGllbnRzIHdoZW4gdGhleSBoaXQgdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAvaXMtYml0Y29pbi1saXRgKSxgIGVuZHBvaW50LiBXZSBjb3VsZCBydW4gdGhpcyBjYWxjdWxhdGlvbiBldmVyeSB0aW1lIGEgY2xpZW50IHJlcXVlc3RzIGRhdGEsIGJ1dCB0aGF0IHdvdWxkIGJlIGluZWZmaWNpZW50LiBMZXQncyBjYWNoZSBpdCBpbiBSZWRpcyFgKSxtZHgoInAiLG51bGwsYEZpcnN0LCB3ZSdsbCBsb29rIGF0IGAsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYHdyaXRpbmcgdG8gdGhlIGNhY2hlYCksYC4gVGhlbiB3ZSdsbCBzZWUgaG93IEZhc3RBUEkgYCxtZHgoInN0cm9uZyIse3BhcmVudE5hbWU6InAifSxgcmVhZHMgZnJvbWApLGAgdGhlIGNhY2hlLmApLG1keCgiaDMiLHsiaWQiOiJ3cml0aW5nLWNhY2hlLWRhdGEtdG8tcmVkaXMifSxgV3JpdGluZyBDYWNoZSBEYXRhIHRvIFJlZGlzYCksbWR4KCJwIixudWxsLGBUYWtlIGEgY2xvc2VyIGxvb2sgYXQgdGhlIGxhc3QgbGluZSBvZiB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHJlZnJlc2goKWApLGAgZnVuY3Rpb246YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1weXRob24ifSksYCAgICBiYWNrZ3JvdW5kX3Rhc2tzLmFkZF90YXNrKHNldF9jYWNoZSwgZGF0YSwga2V5cykKYCkpLG1keCgicCIsbnVsbCxgSW4gRmFzdEFQSSwgeW91IGNhbiBydW4gY29kZSBvdXRzaWRlIG9mIGEgd2ViIHJlcXVlc3QgYWZ0ZXIgcmV0dXJuaW5nIGEgcmVzcG9uc2UuIFRoaXMgZmVhdHVyZSBpcyBjYWxsZWQgYCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJocmVmIjoiaHR0cHM6Ly9mYXN0YXBpLnRpYW5nb2xvLmNvbS90dXRvcmlhbC9iYWNrZ3JvdW5kLXRhc2tzLyJ9KSxtZHgoImVtIix7cGFyZW50TmFtZToiYSJ9LGBiYWNrZ3JvdW5kIHRhc2tzYCkpLGAuYCksbWR4KCJwIixudWxsLGBUaGlzIGlzIG5vdCBhcyByb2J1c3QgYXMgdXNpbmcgYSBiYWNrZ3JvdW5kIHRhc2sgbGlicmFyeSBsaWtlIGAsbWR4KCJhIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicCJ9LHsiaHJlZiI6Imh0dHBzOi8vZG9jcy5jZWxlcnlwcm9qZWN0Lm9yZy9lbi9zdGFibGUvZ2V0dGluZy1zdGFydGVkL2ludHJvZHVjdGlvbi5odG1sIn0pLGBDZWxlcnlgKSxgLiBJbnN0ZWFkLCBCYWNrZ3JvdW5kIFRhc2tzIGFyZSBhIHNpbXBsZSB3YXkgdG8gcnVuIGNvZGUgb3V0c2lkZSBvZiBhIHdlYiByZXF1ZXN0LCB3aGljaCBpcyBhIGdyZWF0IGZpdCBmb3IgdGhpbmdzIGxpa2UgdXBkYXRpbmcgYSBjYWNoZS5gKSxtZHgoInAiLG51bGwsYFdoZW4geW91IGNhbGwgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGFkZF90YXNrKClgKSxgLCB5b3UgcGFzcyBpbiBhIGZ1bmN0aW9uIGFuZCBhIGxpc3Qgb2YgYXJndW1lbnRzLiBIZXJlLCB3ZSBwYXNzIGluIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBzZXRfY2FjaGUoKWApLGAuIFRoaXMgZnVuY3Rpb24gc2F2ZXMgdGhlIHRocmVlLWhvdXIgYXZlcmFnZXMgc3VtbWFyeSB0byBSZWRpcy4gTGV0J3MgbG9vayBhdCBob3cgaXQgd29ya3M6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1weXRob24ifSksYGFzeW5jIGRlZiBzZXRfY2FjaGUoZGF0YSwga2V5czogS2V5cyk6CiAgICBkZWYgc2VyaWFsaXplX2RhdGVzKHYpOgogICAgICAgIHJldHVybiB2Lmlzb2Zvcm1hdCgpIGlmIGlzaW5zdGFuY2UodiwgZGF0ZXRpbWUpIGVsc2UgdgoKICAgIGF3YWl0IHJlZGlzLnNldCgKICAgICAgICBrZXlzLmNhY2hlX2tleSgpLAogICAgICAgIGpzb24uZHVtcHMoZGF0YSwgZGVmYXVsdD1zZXJpYWxpemVfZGF0ZXMpLAogICAgICAgIGV4PVRXT19NSU5VVEVTLAogICAgKQpgKSksbWR4KCJwIixudWxsLGBGaXJzdCwgd2Ugc2VyaWFsaXplIHRoZSB0aHJlZS1ob3VyIHN1bW1hcnkgZGF0YSB0byBKU09OIGFuZCBzYXZlIGl0IHRvIFJlZGlzLiBXZSB1c2UgdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBleGApLGAgcGFyYW1ldGVyIHRvIHNldCB0aGUgZXhwaXJhdGlvbiB0aW1lIGZvciB0aGUgZGF0YSB0byB0d28gbWludXRlcy5gKSxtZHgoInAiLG51bGwsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYFRJUGApLGA6IFlvdSBuZWVkIHRvIHByb3ZpZGUgYSBkZWZhdWx0IHNlcmlhbGl6ZXIgZm9yIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxganNvbi5kdW1wcygpYCksYCBmdW5jdGlvbiBzbyB0aGF0IGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBkdW1wcygpYCksYCBrbm93cyBob3cgdG8gc2VyaWFsaXplIGRhdGV0aW1lIG9iamVjdHMuYCksbWR4KCJwIixudWxsLGBUaGlzIG1lYW5zIHRoYXQgYWZ0ZXIgZXZlcnkgcmVmcmVzaCwgd2UndmUgcHJpbWVkIHRoZSBjYWNoZS4gVGhlIGNhY2hlIGlzbid0IHByaW1lZCBmb3IgbG9uZyAtLSBvbmx5IHR3byBtaW51dGVzIC0tIGJ1dCBpdCdzIHNvbWV0aGluZyFgKSxtZHgoImgzIix7ImlkIjoicmVhZGluZy1jYWNoZS1kYXRhLXRvLXJlZGlzIn0sYFJlYWRpbmcgQ2FjaGUgRGF0YSB0byBSZWRpc2ApLG1keCgicCIsbnVsbCxgV2UgaGF2ZW4ndCBldmVuIHNlZW4gdGhlIEFQSSBlbmRwb2ludCB0aGF0IGNsaWVudHMgd2lsbCB1c2UgeWV0ISBIZXJlIGl0IGlzOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcHl0aG9uIn0pLGBAYXBwLmdldCgnL2lzLWJpdGNvaW4tbGl0JykKYXN5bmMgZGVmIGJpdGNvaW4oYmFja2dyb3VuZF90YXNrczogQmFja2dyb3VuZFRhc2tzLCBrZXlzOiBLZXlzID0gRGVwZW5kcyhtYWtlX2tleXMpKToKICAgIGRhdGEgPSBhd2FpdCBnZXRfY2FjaGUoa2V5cykKCiAgICBpZiBub3QgZGF0YToKICAgICAgICBkYXRhID0gYXdhaXQgY2FsY3VsYXRlX3RocmVlX2hvdXJzX29mX2RhdGEoa2V5cykKICAgICAgICBiYWNrZ3JvdW5kX3Rhc2tzLmFkZF90YXNrKHNldF9jYWNoZSwgZGF0YSwga2V5cykKCiAgICByZXR1cm4gZGF0YQoKYCkpLG1keCgicCIsbnVsbCxgVG8gdXNlIHRoaXMgZW5kcG9pbnQsIGNsaWVudHMgbWFrZSBhIEdFVCByZXF1ZXN0IHRvIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAvaXMtYml0Y29pbi1saXRgKSxgLiBUaGVuIHdlIHRyeSB0byBnZXQgdGhlIGNhY2hlZCB0aHJlZS1ob3VyIHN1bW1hcnkgZnJvbSBSZWRpcy4gSWYgd2UgY2FuJ3QsIHdlIGNhbGN1bGF0ZSB0aGUgdGhyZWUtaG91ciBzdW1tYXJ5LCByZXR1cm4gaXQsIGFuZCB0aGVuIHNhdmUgaXQgb3V0c2lkZSBvZiB0aGUgd2ViIHJlcXVlc3QuYCksbWR4KCJwIixudWxsLGBXZSd2ZSBhbHJlYWR5IHNlZW4gaG93IGNhbGN1bGF0aW5nIHRoZSBzdW1tYXJ5IGRhdGEgd29ya3MsIGFuZCB3ZSBqdXN0IGV4cGxvcmVkIHNhdmluZyB0aGUgc3VtbWFyeSBkYXRhIHRvIFJlZGlzLiBTbywgbGV0J3MgbG9vayBhdCB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGdldF9jYWNoZSgpYCksYCBmdW5jdGlvbiwgd2hlcmUgd2UgcmVhZCB0aGUgY2FjaGVkIGRhdGE6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1weXRob24ifSksYGRlZiBkYXRldGltZV9wYXJzZXIoZGN0KToKICAgIGZvciBrLCB2IGluIGRjdC5pdGVtcygpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uodiwgc3RyKSBhbmQgdi5lbmRzd2l0aCgnKzAwOjAwJyk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGRjdFtrXSA9IGRhdGV0aW1lLmRhdGV0aW1lLmZyb21pc29mb3JtYXQodikKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwogICAgcmV0dXJuIGRjdAoKCmFzeW5jIGRlZiBnZXRfY2FjaGUoa2V5czogS2V5cyk6CiAgICBjdXJyZW50X2hvdXJfY2FjaGVfa2V5ID0ga2V5cy5jYWNoZV9rZXkoKQogICAgY3VycmVudF9ob3VyX3N0YXRzID0gYXdhaXQgcmVkaXMuZ2V0KGN1cnJlbnRfaG91cl9jYWNoZV9rZXkpCgogICAgaWYgY3VycmVudF9ob3VyX3N0YXRzOgogICAgICAgIHJldHVybiBqc29uLmxvYWRzKGN1cnJlbnRfaG91cl9zdGF0cywgb2JqZWN0X2hvb2s9ZGF0ZXRpbWVfcGFyc2VyKQpgKSksbWR4KCJwIixudWxsLGBSZW1lbWJlciB0aGF0IHdoZW4gd2Ugc2VyaWFsaXplZCB0aGUgc3VtbWFyeSBkYXRhIHRvIEpTT04sIHdlIG5lZWRlZCB0byBwcm92aWRlIGEgZGVmYXVsdCBzZXJpYWxpemVyIGZvciBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxganNvbi5kdW1wcygpYCksYCB0aGF0IHVuZGVyc3Rvb2QgZGF0ZXRpbWUgb2JqZWN0cy4gTm93IHRoYXQgd2UncmUgYCxtZHgoImVtIix7cGFyZW50TmFtZToicCJ9LGBkZXNlcmlhbGl6aW5nYCksYCB0aGF0IGRhdGEsIHdlIG5lZWQgdG8gZ2l2ZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxganNvbi5sb2FkcygpYCksYCBhbiAib2JqZWN0IGhvb2siIHRoYXQgdW5kZXJzdGFuZHMgZGF0ZXRpbWUgc3RyaW5ncy4gVGhhdCdzIHdoYXQgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGRhdGV0aW1lX3BhcnNlcigpYCksYCBkb2VzLmApLG1keCgicCIsbnVsbCxgT3RoZXIgdGhhbiBwYXJzaW5nIGRhdGVzLCB0aGlzIGNvZGUgaXMgcmVsYXRpdmVseSBzdHJhaWdodGZvcndhcmQuIFdlIGdldCB0aGUgY3VycmVudCBob3VyJ3MgY2FjaGUga2V5LCBhbmQgdGhlbiB3ZSB0cnkgdG8gZ2V0IHRoZSBjYWNoZWQgZGF0YSBmcm9tIFJlZGlzLiBJZiB3ZSBjYW4ndCwgd2UgcmV0dXJuIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBOb25lYCksYC5gKSxtZHgoImgyIix7ImlkIjoic3VtbWFyeSJ9LGBTdW1tYXJ5YCksbWR4KCJwIixudWxsLGBQdXR0aW5nIGFsbCB0aGUgcGllY2VzIHRvZ2V0aGVyLCB3ZSBub3cgaGF2ZSBhIEZhc3RBUEkgYXBwIHRoYXQgY2FuIHJldHJpZXZlIEJpdGNvaW4gcHJpY2UgYW5kIHNlbnRpbWVudCBhdmVyYWdlcywgc3RvcmUgdGhlIGF2ZXJhZ2VzIGluIFJlZGlzLCBjYWNoZSB0aHJlZS1ob3VyIHN1bW1hcnkgZGF0YSBpbiBSZWRpcywgYW5kIHNlcnZlIHRoZSBkYXRhIHRvIGNsaWVudHMuIE5vdCB0b28gc2hhYmJ5IWApLG1keCgicCIsbnVsbCxgSGVyZSBhcmUgYSBmZXcgYCxtZHgoInN0cm9uZyIse3BhcmVudE5hbWU6InAifSxgbm90ZXMgdG8gY29uc2lkZXJgKSxgOmApLG1keCgib2wiLG51bGwsbWR4KCJsaSIse3BhcmVudE5hbWU6Im9sIn0sYFdlIG1hbnVhbGx5IGNvbnRyb2xsZWQgY2FjaGluZyBpbiB0aGlzIHR1dG9yaWFsLCBidXQgeW91IGNhbiBhbHNvIHVzZSBhIGxpYnJhcnkgbGlrZSBgLG1keCgiYSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6ImxpIn0seyJocmVmIjoiaHR0cHM6Ly9naXRodWIuY29tL2Fpby1saWJzL2Fpb2NhY2hlIn0pLGBhaW9jYWNoZWApLGAgdG8gY2FjaGUgZGF0YSBpbiBSZWRpcy5gKSxtZHgoImxpIix7cGFyZW50TmFtZToib2wifSxgV2UgcmFuIFJlZGlzVGltZVNlcmllcyBjb21tYW5kcyBsaWtlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToibGkifSxgVFMuTUFERGApLGAgdXNpbmcgdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToibGkifSxgZXhlY3V0ZV9jb21tYW5kKClgKSxgIG1ldGhvZCBpbiBhaW9yZWRpcy1weS4gSWYgeW91IGFyZSBpbnN0ZWFkIHVzaW5nIHJlZGlzLXB5IGluIGEgc3luY2hyb25vdXMgcHJvamVjdCwgeW91IGNhbiB1c2UgdGhlIGAsbWR4KCJhIixfZXh0ZW5kcyh7cGFyZW50TmFtZToibGkifSx7ImhyZWYiOiJodHRwczovL2dpdGh1Yi5jb20vUmVkaXNUaW1lU2VyaWVzL3JlZGlzdGltZXNlcmllcy1weSJ9KSxgcmVkaXN0aW1lc2VyaWVzLXB5YCksYCBsaWJyYXJ5IHRvIHJ1biBSZWRpc1RpbWVTZXJpZXMgY29tbWFuZHMuYCkpKTt9O01EWENvbnRlbnQuaXNNRFhDb21wb25lbnQ9dHJ1ZTs="},{"version":3,"sources":["/Users/ajeetraina/projects/8sep/redis-developer.github.io/docs/develop/python/fastapi/index-fastapi.mdx"],"names":["React","mdx","frontMatter","id","title","sidebar_label","slug","metadata","Tabs","TabItem","useBaseUrl","RedisCard","toc","value","children","layoutProps","MDXLayout","MDXContent","components","props","isMDXComponent"],"mappings":"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","sourcesContent":["\n  import React from 'react';\n  import { mdx } from '@mdx-js/react';\n\n  export const frontMatter = {\n\tid: 'index-fastapi',\n\ttitle: 'Using Redis with FastAPI',\n\tsidebar_label: 'Redis with FastAPI',\n\tslug: '/develop/python/fastapi'\n};\nexport const metadata = {\n  \"unversionedId\": \"develop/python/fastapi/index-fastapi\",\n  \"id\": \"develop/python/fastapi/index-fastapi\",\n  \"isDocsHomePage\": false,\n  \"title\": \"Using Redis with FastAPI\",\n  \"description\": \"This tutorial helps you get started with Redis and FastAPI.\",\n  \"source\": \"@site/docs/develop/python/fastapi/index-fastapi.mdx\",\n  \"slug\": \"/develop/python/fastapi\",\n  \"permalink\": \"/develop/python/fastapi\",\n  \"editUrl\": \"https://github.com/redis-developer/redis-developer/edit/master/docs/develop/python/fastapi/index-fastapi.mdx\",\n  \"version\": \"current\",\n  \"sidebar_label\": \"Redis with FastAPI\",\n  \"sidebar\": \"docs\",\n  \"previous\": {\n    \"title\": \"Python and Redis\",\n    \"permalink\": \"/develop/python/\"\n  },\n  \"next\": {\n    \"title\": \".NET and Redis\",\n    \"permalink\": \"/develop/dotnet/\"\n  }\n};\n  /* @jsxRuntime classic */\n/* @jsx mdx */\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport useBaseUrl from '@docusaurus/useBaseUrl';\nimport RedisCard from '@site/src/theme/RedisCard';\nexport const toc = [{\n  value: 'Introduction',\n  id: 'introduction',\n  children: []\n}, {\n  value: 'Learning Objectives',\n  id: 'learning-objectives',\n  children: []\n}, {\n  value: 'Pre-Tutorial Quiz',\n  id: 'pre-tutorial-quiz',\n  children: []\n}, {\n  value: 'Set Up the IsBitcoinLit Project',\n  id: 'set-up-the-isbitcoinlit-project',\n  children: []\n}, {\n  value: 'About RedisTimeSeries',\n  id: 'about-redistimeseries',\n  children: []\n}, {\n  value: 'An Asyncio Primer',\n  id: 'an-asyncio-primer',\n  children: []\n}, {\n  value: 'Installing the Redis Client',\n  id: 'installing-the-redis-client',\n  children: []\n}, {\n  value: 'Integrate aioredis-py with FastAPI',\n  id: 'integrate-aioredis-py-with-fastapi',\n  children: [{\n    value: 'Creating the Timeseries',\n    id: 'creating-the-timeseries',\n    children: []\n  }, {\n    value: 'Storing Sentiment and Price Data in RedisTimeSeries',\n    id: 'storing-sentiment-and-price-data-in-redistimeseries',\n    children: []\n  }]\n}, {\n  value: 'Calculating Three-Hour Averages with RedisTimeSeries',\n  id: 'calculating-three-hour-averages-with-redistimeseries',\n  children: []\n}, {\n  value: 'Caching Data with Redis',\n  id: 'caching-data-with-redis',\n  children: [{\n    value: 'Writing Cache Data to Redis',\n    id: 'writing-cache-data-to-redis',\n    children: []\n  }, {\n    value: 'Reading Cache Data to Redis',\n    id: 'reading-cache-data-to-redis',\n    children: []\n  }]\n}, {\n  value: 'Summary',\n  id: 'summary',\n  children: []\n}];\n\nconst layoutProps = {\n  toc\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`This tutorial helps you get started with Redis and FastAPI.`}</p>\n    <h2 {...{\n      \"id\": \"introduction\"\n    }}>{`Introduction`}</h2>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://github.com/tiangolo/fastapi\"\n      }}>{`FastAPI`}</a>{` is a Python web framework based on\nthe `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.starlette.io/\"\n      }}>{`Starlette`}</a>{` microframework. With deep support for\nasyncio, FastAPI is indeed `}<em parentName=\"p\">{`very fast`}</em>{`. FastAPI also distinguishes itself with\nfeatures like automatic `}<a parentName=\"p\" {...{\n        \"href\": \"https://openapis.org/\"\n      }}>{`OpenAPI (OAS)`}</a>{` documentation for your API,\neasy-to-use data validation tools, and more.`}</p>\n    <p>{`Of course, the best way to `}<strong parentName=\"p\">{`make your FastAPI service even faster`}</strong>{` is to use\nRedis. Unlike most databases, Redis excels at low-latency access because it's an in-memory database.`}</p>\n    <p>{`In this tutorial, we'll walk through the steps necessary to use Redis with\nFastAPI. We're going to build `}<em parentName=\"p\">{`IsBitcoinLit`}</em>{`, an API that stores Bitcoin\nsentiment and price averages in `}<a parentName=\"p\" {...{\n        \"href\": \"https://oss.redislabs.com/redistimeseries/\"\n      }}>{`RedisTimeSeries`}</a>{`, then rolls these averages up for\nthe last three hours.`}</p>\n    <p>{`Next, let's look at the learning objectives of this tutorial.`}</p>\n    <h2 {...{\n      \"id\": \"learning-objectives\"\n    }}>{`Learning Objectives`}</h2>\n    <p>{`The learning objectives of this tutorial are:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Learn how to install aioredis-py and connect to Redis`}</li>\n      <li parentName=\"ol\">{`Learn how to integrate aioredis-py with FastAPI`}</li>\n      <li parentName=\"ol\">{`Learn how to use RedisTimeSeries to store and query timeseries data`}</li>\n      <li parentName=\"ol\">{`Learn how to use Redis as a cache with aioredis-py`}</li>\n    </ol>\n    <p>{`Let's get started!`}</p>\n    <h2 {...{\n      \"id\": \"pre-tutorial-quiz\"\n    }}>{`Pre-Tutorial Quiz`}</h2>\n    <p>{`Want to check gaps in your knowledge of Redis and FastAPI before you continue? Take our short pre-tutorial quiz!`}</p>\n    <iframe src=\"https://docs.google.com/forms/d/e/1FAIpQLSfFmBWLtm8oLouaiT3wXpbgZm8Df-FV_xFvnuXEWfbCoh3clw/viewform?embedded=true\" width=\"640\" height=\"524\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading</iframe>\n    <p>{`You can also `}<a parentName=\"p\" {...{\n        \"href\": \"https://forms.gle/eXiiVcgXqG9UNarG6\"\n      }}>{`visit the quiz directly`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"set-up-the-isbitcoinlit-project\"\n    }}>{`Set Up the IsBitcoinLit Project`}</h2>\n    <p>{`You can achieve the learning objectives of this tutorial by reading through the\ntext and code examples that follow.`}</p>\n    <p>{`However, we recommend that you set up the example project yourself, so that you\ncan try out some of the code as you learn. The project has a permissive license\nthat allows you to use it freely.`}</p>\n    <p>{`To get started, `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/redis-developer/fastapi-redis-tutorial\"\n      }}>{`fork the example project on\nGitHub`}</a>{`.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://github.com/redis-developer/fastapi-redis-tutorial/blob/master/README.md\"\n      }}>{`Follow the README`}</a>{`\nto the project running.`}</p>\n    <h2 {...{\n      \"id\": \"about-redistimeseries\"\n    }}>{`About RedisTimeSeries`}</h2>\n    <p>{`RedisTimeSeries is a source available Redis Module that adds a timeseries data type to Redis. Timeseries is a great way to model any data that you want to query over time, like in this case, the ever-changing price of Bitcoin.`}</p>\n    <p>{`You can get started by following the `}<a parentName=\"p\" {...{\n        \"href\": \"https://oss.redislabs.com/redistimeseries/#setup\"\n      }}>{`setup instructions`}</a>{` in the RedisTimeSeries documentation.`}</p>\n    <p>{`However, note that this tutorial's example project configures RedisTimeSeries automatically for you with the `}<a parentName=\"p\" {...{\n        \"href\": \"https://hub.docker.com/r/redislabs/redismod\"\n      }}>{`redismod`}</a>{` Docker image.`}</p>\n    <h2 {...{\n      \"id\": \"an-asyncio-primer\"\n    }}>{`An Asyncio Primer`}</h2>\n    <p>{`The `}<em parentName=\"p\">{`IsBitcoinLit`}</em>{` project is completely async. That means we use an\nasyncio-compatible Redis client called\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/aio-libs/aioredis-py\"\n      }}>{`aioredis-py`}</a>{` and FastAPI's async\nfeatures.`}</p>\n    <p>{`If you `}<strong parentName=\"p\">{`aren't familiar with asyncio`}</strong>{`, take a few minutes to watch this\nprimer on asyncio before continuing:`}</p>\n    <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/Xbl7XjFYsN4\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n    <h2 {...{\n      \"id\": \"installing-the-redis-client\"\n    }}>{`Installing the Redis Client`}</h2>\n    <p>{`We're going to start this tutorial assuming that you have a FastAPI project to\nwork with. We'll use the `}<em parentName=\"p\">{`IsBitcoinLit`}</em>{` project for our examples.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://python-poetry.org/\"\n      }}>{`Poetry`}</a>{` is the best way to manage Python dependencies today, so we'll use it in this tutorial.`}</p>\n    <p>{`IsBitcoinLit includes a `}<inlineCode parentName=\"p\">{`pyproject.toml`}</inlineCode>{` file that Poetry uses to manage the project's directories, but if you had not already created one, you could do so like this:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`    $ poetry init   \n`}</code></pre>\n    <p>{`Once you have a `}<inlineCode parentName=\"p\">{`pyproject.toml`}</inlineCode>{` file, and assuming you already added FastAPI and any other necessary dependencies, you could add aioredis-py to your project like this:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`    $ poetry add aioredis-py@2.0.0b1\n`}</code></pre>\n    <p><strong parentName=\"p\">{`NOTE`}</strong>{`: This tutorial uses a beta version of aioredis-py 2.0. The 2.0 version of aioredis-py features an API that matches the most popular synchronous Redis client for Python, `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/andymccurdy/redis-py\"\n      }}>{`redis-py`}</a>{`.`}</p>\n    <p>{`The aioredis-py client is now installed. Time to write some code!`}</p>\n    <h2 {...{\n      \"id\": \"integrate-aioredis-py-with-fastapi\"\n    }}>{`Integrate aioredis-py with FastAPI`}</h2>\n    <p>{`We're going to use Redis for a few things in this FastAPI app:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Storing 30-second averages of sentiment and price for the last 24 hours with RedisTimeSeries`}</li>\n      <li parentName=\"ol\">{`Rolling up these averages into a three-hour snapshot with RedisTimeSeries`}</li>\n      <li parentName=\"ol\">{`Caching the three-hour snapshot`}</li>\n    </ol>\n    <p>{`Let's look at each of these integration points in more detail.`}</p>\n    <h3 {...{\n      \"id\": \"creating-the-timeseries\"\n    }}>{`Creating the Timeseries`}</h3>\n    <p>{`The data for our app consists of 30-second averages of Bitcoin prices and sentiment ratings for the last 24 hours. We pull these from the `}<a parentName=\"p\" {...{\n        \"href\": \"https://senticrypt.com/docs.html\"\n      }}>{`SentiCrypt API`}</a>{`.`}</p>\n    <p><strong parentName=\"p\">{`NOTE`}</strong>{`: We have no affiliation with SentiCrypt or any idea how accurate these numbers are. This example is `}<strong parentName=\"p\">{`just for fun`}</strong>{`!`}</p>\n    <p>{`We're going to store price and sentiment averages in a timeseries with RedisTimeSeries, so we want to make sure that when the app starts up, the timeseries exists.`}</p>\n    <p>{`We can use a `}<a parentName=\"p\" {...{\n        \"href\": \"https://fastapi.tiangolo.com/advanced/events/\"\n      }}>{`startup event`}</a>{` to accomplish this. Doing so looks like the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`@app.on_event('startup')\nasync def startup_event():\n    keys = Keys()\n    await initialize_redis(keys)\n`}</code></pre>\n    <p>{`We'll use the `}<inlineCode parentName=\"p\">{`TS.CREATE`}</inlineCode>{` RedisTimeSeries command to create the timeseries within our `}<inlineCode parentName=\"p\">{`initialize_redis()`}</inlineCode>{` function:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`async def make_timeseries(key):\n    \"\"\"\n    Create a timeseries with the Redis key \\`key\\`.\n\n    We'll use the duplicate policy known as \"first,\" which ignores\n    duplicate pairs of timestamp and values if we add them.\n\n    Because of this, we don't worry about handling this logic\n    ourselves -- but note that there is a performance cost to writes\n    using this policy.\n    \"\"\"\n    try:\n        await redis.execute_command(\n            'TS.CREATE', key,\n            'DUPLICATE_POLICY', 'first',\n        )\n    except ResponseError as e:\n        # Time series probably already exists\n        log.info('Could not create timeseries %s, error: %s', key, e)\n\n`}</code></pre>\n    <p><strong parentName=\"p\">{`TIP`}</strong>{`: An interesting point to note from this code is that when we create a timeseries, we can use the `}<inlineCode parentName=\"p\">{`DUPLICATE_POLICY`}</inlineCode>{` option to specify how to handle duplicate pairs of timestamp and values.`}</p>\n    <h3 {...{\n      \"id\": \"storing-sentiment-and-price-data-in-redistimeseries\"\n    }}>{`Storing Sentiment and Price Data in RedisTimeSeries`}</h3>\n    <p>{`A `}<inlineCode parentName=\"p\">{`/refresh`}</inlineCode>{` endpoint exists in the app to allow a client to trigger a refresh of the 30-second averages. This is the entire function:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`@app.post('/refresh')\nasync def refresh(background_tasks: BackgroundTasks, keys: Keys = Depends(make_keys)):\n    async with httpx.AsyncClient() as client:\n        data = await client.get(SENTIMENT_API_URL)\n    await persist(keys, data.json())\n    data = await calculate_three_hours_of_data(keys)\n    background_tasks.add_task(set_cache, data, keys)\n\n`}</code></pre>\n    <p>{`As is often the case with Python, a lot happens in a few lines, so let's walk through them.`}</p>\n    <p>{`The first thing we do is get the latest sentiment and price data from SentiCrypt. The response data looks like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`[\n    {\n        \"count\": 7259,\n        \"timestamp\": 1625592626.3452034,\n        \"rate\": 0.0,\n        \"last\": 0.33,\n        \"sum\": 1425.82,\n        \"mean\": 0.2,\n        \"median\": 0.23,\n        \"btc_price\": \"33885.23\"\n    }, \n    //... Many more entries\n]\n`}</code></pre>\n    <p>{`Then we save the data into two timeseries in Redis with the `}<inlineCode parentName=\"p\">{`persist()`}</inlineCode>{` function. That ends up calling another helper, `}<inlineCode parentName=\"p\">{`add_many_to_timeseries()`}</inlineCode>{`, like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`    await add_many_to_timeseries(\n        (\n            (ts_price_key, 'btc_price'),\n            (ts_sentiment_key, 'mean'),\n        ), data,\n    )\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`add_many_to_timeseries()`}</inlineCode>{` function takes a list of (timeseries key, sample key) pairs and a list of samples from SentiCrypt. For each sample, it reads the value of the sample key in the SentiCrypt sample, like \"btc_price,\" and adds that value to the given timeseries key.`}</p>\n    <p>{`Here's the function:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`async def add_many_to_timeseries(\n    key_pairs: Iterable[Tuple[str, str]],\n    data: BitcoinSentiments\n):\n    \"\"\"\n    Add many samples to a single timeseries key.\n\n    \\`key_pairs\\` is an iteratble of tuples containing in the 0th position the\n    timestamp key into which to insert entries and the 1th position the name\n    of the key within th \\`data\\` dict to find the sample.\n    \"\"\"\n    partial = functools.partial(redis.execute_command, 'TS.MADD')\n    for datapoint in data:\n        for timeseries_key, sample_key in key_pairs:\n            partial = functools.partial(\n                partial, timeseries_key, int(\n                    float(datapoint['timestamp']) * 1000,\n                ),\n                datapoint[sample_key],\n            )\n    return await partial()\n`}</code></pre>\n    <p>{`This code is dense, so let's break it down.`}</p>\n    <p>{`We're using the `}<inlineCode parentName=\"p\">{`TS.MADD`}</inlineCode>{` RedisTimeSeries command to add many samples to a timeseries. We use `}<inlineCode parentName=\"p\">{`TS.MADD`}</inlineCode>{` because doing so is faster than `}<inlineCode parentName=\"p\">{`TS.ADD`}</inlineCode>{` for adding batches of samples to a timeseries.`}</p>\n    <p>{`This results in a single large `}<inlineCode parentName=\"p\">{`TS.MADD`}</inlineCode>{` call that adds price data to the price timeseries and sentiment data to the sentiment timeseries. Conveniently, `}<inlineCode parentName=\"p\">{`TS.MADD`}</inlineCode>{` can add samples to multiple timeseries in a single call.`}</p>\n    <h2 {...{\n      \"id\": \"calculating-three-hour-averages-with-redistimeseries\"\n    }}>{`Calculating Three-Hour Averages with RedisTimeSeries`}</h2>\n    <p>{`Clients use IsBitcoinLit to get the average price and sentiment for each of the last three hours. But so far, we've only stored 30-second averages in Redis. How do we calculate the average of these averages for the last three hours?`}</p>\n    <p>{`When we run `}<inlineCode parentName=\"p\">{`/refresh`}</inlineCode>{`, we call `}<inlineCode parentName=\"p\">{`calculate_three_hours_of_data()`}</inlineCode>{` to do so. The function looks like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`async def calculate_three_hours_of_data(keys: Keys) -> Dict[str, str]:\n    sentiment_key = keys.timeseries_sentiment_key()\n    price_key = keys.timeseries_price_key()\n    three_hours_ago_ms = int((now() - timedelta(hours=3)).timestamp() * 1000)\n\n    sentiment = await get_hourly_average(sentiment_key, three_hours_ago_ms)\n    price = await get_hourly_average(price_key, three_hours_ago_ms)\n\n    last_three_hours = [{\n        'price': data[0][1], 'sentiment': data[1][1],\n        'time': datetime.fromtimestamp(data[0][0] / 1000, tz=timezone.utc),\n    }\n        for data in zip(price, sentiment)]\n\n    return {\n        'hourly_average_of_averages': last_three_hours,\n        'sentiment_direction': get_direction(last_three_hours, 'sentiment'),\n        'price_direction': get_direction(last_three_hours, 'price'),\n    }\n`}</code></pre>\n    <p>{`There is more going on here than we need to know for this tutorial. As a summary, most of this code exists to support calls to `}<inlineCode parentName=\"p\">{`get_hourly_average()`}</inlineCode>{`. `}</p>\n    <p>{`That function is where the core logic exists to calculate averages for the last three hours, so let's see what it contains:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`async def get_hourly_average(ts_key: str, top_of_the_hour: int):\n    response = await redis.execute_command(\n        'TS.RANGE', ts_key, top_of_the_hour, '+',\n        'AGGREGATION', 'avg', HOURLY_BUCKET,\n    )\n    # The response is a list of the structure [timestamp, average].\n    return response\n`}</code></pre>\n    <p>{`Here, we use the `}<inlineCode parentName=\"p\">{`TS.RANGE`}</inlineCode>{` command to get the samples in the timeseries from the \"top\" of the hour three hours ago, until the latest sample in the series. With the `}<inlineCode parentName=\"p\">{`AGGREGATE`}</inlineCode>{` parameter, we get back the averages of the samples in hourly buckets.`}</p>\n    <p>{`So where does this leave us? With `}<strong parentName=\"p\">{`averages of the averages`}</strong>{`, one for each of the last three hours.`}</p>\n    <h2 {...{\n      \"id\": \"caching-data-with-redis\"\n    }}>{`Caching Data with Redis`}</h2>\n    <p>{`Let's review. We have code that achieves the following:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Gets the latest sentiment and price data from SentiCrypt.`}</li>\n      <li parentName=\"ol\">{`Saves the data into two timeseries in Redis.`}</li>\n      <li parentName=\"ol\">{`Calculates the average of the averages for the last three hours.`}</li>\n    </ol>\n    <p>{`The snapshot of averages for the last three hours is the data we want to serve clients when they hit the `}<inlineCode parentName=\"p\">{`/is-bitcoin-lit`}</inlineCode>{` endpoint. We could run this calculation every time a client requests data, but that would be inefficient. Let's cache it in Redis!`}</p>\n    <p>{`First, we'll look at `}<strong parentName=\"p\">{`writing to the cache`}</strong>{`. Then we'll see how FastAPI `}<strong parentName=\"p\">{`reads from`}</strong>{` the cache.`}</p>\n    <h3 {...{\n      \"id\": \"writing-cache-data-to-redis\"\n    }}>{`Writing Cache Data to Redis`}</h3>\n    <p>{`Take a closer look at the last line of the `}<inlineCode parentName=\"p\">{`refresh()`}</inlineCode>{` function:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`    background_tasks.add_task(set_cache, data, keys)\n`}</code></pre>\n    <p>{`In FastAPI, you can run code outside of a web request after returning a response. This feature is called `}<a parentName=\"p\" {...{\n        \"href\": \"https://fastapi.tiangolo.com/tutorial/background-tasks/\"\n      }}><em parentName=\"a\">{`background tasks`}</em></a>{`.`}</p>\n    <p>{`This is not as robust as using a background task library like `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.celeryproject.org/en/stable/getting-started/introduction.html\"\n      }}>{`Celery`}</a>{`. Instead, Background Tasks are a simple way to run code outside of a web request, which is a great fit for things like updating a cache.`}</p>\n    <p>{`When you call `}<inlineCode parentName=\"p\">{`add_task()`}</inlineCode>{`, you pass in a function and a list of arguments. Here, we pass in `}<inlineCode parentName=\"p\">{`set_cache()`}</inlineCode>{`. This function saves the three-hour averages summary to Redis. Let's look at how it works:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`async def set_cache(data, keys: Keys):\n    def serialize_dates(v):\n        return v.isoformat() if isinstance(v, datetime) else v\n\n    await redis.set(\n        keys.cache_key(),\n        json.dumps(data, default=serialize_dates),\n        ex=TWO_MINUTES,\n    )\n`}</code></pre>\n    <p>{`First, we serialize the three-hour summary data to JSON and save it to Redis. We use the `}<inlineCode parentName=\"p\">{`ex`}</inlineCode>{` parameter to set the expiration time for the data to two minutes.`}</p>\n    <p><strong parentName=\"p\">{`TIP`}</strong>{`: You need to provide a default serializer for the `}<inlineCode parentName=\"p\">{`json.dumps()`}</inlineCode>{` function so that `}<inlineCode parentName=\"p\">{`dumps()`}</inlineCode>{` knows how to serialize datetime objects.`}</p>\n    <p>{`This means that after every refresh, we've primed the cache. The cache isn't primed for long -- only two minutes -- but it's something!`}</p>\n    <h3 {...{\n      \"id\": \"reading-cache-data-to-redis\"\n    }}>{`Reading Cache Data to Redis`}</h3>\n    <p>{`We haven't even seen the API endpoint that clients will use yet! Here it is:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`@app.get('/is-bitcoin-lit')\nasync def bitcoin(background_tasks: BackgroundTasks, keys: Keys = Depends(make_keys)):\n    data = await get_cache(keys)\n\n    if not data:\n        data = await calculate_three_hours_of_data(keys)\n        background_tasks.add_task(set_cache, data, keys)\n\n    return data\n\n`}</code></pre>\n    <p>{`To use this endpoint, clients make a GET request to `}<inlineCode parentName=\"p\">{`/is-bitcoin-lit`}</inlineCode>{`. Then we try to get the cached three-hour summary from Redis. If we can't, we calculate the three-hour summary, return it, and then save it outside of the web request.`}</p>\n    <p>{`We've already seen how calculating the summary data works, and we just explored saving the summary data to Redis. So, let's look at the `}<inlineCode parentName=\"p\">{`get_cache()`}</inlineCode>{` function, where we read the cached data:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`def datetime_parser(dct):\n    for k, v in dct.items():\n        if isinstance(v, str) and v.endswith('+00:00'):\n            try:\n                dct[k] = datetime.datetime.fromisoformat(v)\n            except:\n                pass\n    return dct\n\n\nasync def get_cache(keys: Keys):\n    current_hour_cache_key = keys.cache_key()\n    current_hour_stats = await redis.get(current_hour_cache_key)\n\n    if current_hour_stats:\n        return json.loads(current_hour_stats, object_hook=datetime_parser)\n`}</code></pre>\n    <p>{`Remember that when we serialized the summary data to JSON, we needed to provide a default serializer for `}<inlineCode parentName=\"p\">{`json.dumps()`}</inlineCode>{` that understood datetime objects. Now that we're `}<em parentName=\"p\">{`deserializing`}</em>{` that data, we need to give `}<inlineCode parentName=\"p\">{`json.loads()`}</inlineCode>{` an \"object hook\" that understands datetime strings. That's what `}<inlineCode parentName=\"p\">{`datetime_parser()`}</inlineCode>{` does.`}</p>\n    <p>{`Other than parsing dates, this code is relatively straightforward. We get the current hour's cache key, and then we try to get the cached data from Redis. If we can't, we return `}<inlineCode parentName=\"p\">{`None`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"summary\"\n    }}>{`Summary`}</h2>\n    <p>{`Putting all the pieces together, we now have a FastAPI app that can retrieve Bitcoin price and sentiment averages, store the averages in Redis, cache three-hour summary data in Redis, and serve the data to clients. Not too shabby!`}</p>\n    <p>{`Here are a few `}<strong parentName=\"p\">{`notes to consider`}</strong>{`:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`We manually controlled caching in this tutorial, but you can also use a library like `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/aio-libs/aiocache\"\n        }}>{`aiocache`}</a>{` to cache data in Redis.`}</li>\n      <li parentName=\"ol\">{`We ran RedisTimeSeries commands like `}<inlineCode parentName=\"li\">{`TS.MADD`}</inlineCode>{` using the `}<inlineCode parentName=\"li\">{`execute_command()`}</inlineCode>{` method in aioredis-py. If you are instead using redis-py in a synchronous project, you can use the `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/RedisTimeSeries/redistimeseries-py\"\n        }}>{`redistimeseries-py`}</a>{` library to run RedisTimeSeries commands.`}</li>\n    </ol>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\n  "]}]}