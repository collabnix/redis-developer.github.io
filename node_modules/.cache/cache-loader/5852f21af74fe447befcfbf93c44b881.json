{"remainingRequest":"/Users/ajeetraina/staging/redis-developer.github.io/node_modules/babel-loader/lib/index.js??ref--11-1!/Users/ajeetraina/staging/redis-developer.github.io/node_modules/@docusaurus/mdx-loader/src/index.js??ref--11-2!/Users/ajeetraina/staging/redis-developer.github.io/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js??ref--11-3!/Users/ajeetraina/staging/redis-developer.github.io/docs/develop/java/spring/redis-and-spring-course/lesson_6/index-lesson_6.mdx","dependencies":[{"path":"/Users/ajeetraina/staging/redis-developer.github.io/docs/develop/java/spring/redis-and-spring-course/lesson_6/index-lesson_6.mdx","mtime":1631078110758},{"path":"/Users/ajeetraina/staging/redis-developer.github.io/.docusaurus/docusaurus-plugin-content-docs/default/site-docs-develop-java-spring-redis-and-spring-course-lesson-6-index-lesson-6-mdx-b8f.json","mtime":1631078548060},{"path":"/Users/ajeetraina/staging/redis-developer.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1604063546682},{"path":"/Users/ajeetraina/staging/redis-developer.github.io/node_modules/babel-loader/lib/index.js","mtime":1611637097949},{"path":"/Users/ajeetraina/staging/redis-developer.github.io/node_modules/@docusaurus/mdx-loader/src/index.js","mtime":1611637102291},{"path":"/Users/ajeetraina/staging/redis-developer.github.io/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js","mtime":1611637100994}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9leHRlbmRzIGZyb20iL1VzZXJzL2FqZWV0cmFpbmEvc3RhZ2luZy9yZWRpcy1kZXZlbG9wZXIuZ2l0aHViLmlvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzIjtpbXBvcnQgUmVhY3QgZnJvbSdyZWFjdCc7aW1wb3J0e21keH1mcm9tJ0BtZHgtanMvcmVhY3QnO2V4cG9ydCBjb25zdCBmcm9udE1hdHRlcj17aWQ6J2luZGV4LWxlc3Nvbl82Jyx0aXRsZTonRG9tYWluIE1vZGVscyB3aXRoIFJlZGlzSlNPTicsc2lkZWJhcl9sYWJlbDonRG9tYWluIE1vZGVscyB3LyBSZWRpc0pTT04nLHNsdWc6Jy9kZXZlbG9wL2phdmEvcmVkaXMtYW5kLXNwcmluZy1jb3Vyc2UvbGVzc29uXzYnfTtleHBvcnQgY29uc3QgbWV0YWRhdGE9eyJ1bnZlcnNpb25lZElkIjoiZGV2ZWxvcC9qYXZhL3NwcmluZy9yZWRpcy1hbmQtc3ByaW5nLWNvdXJzZS9sZXNzb25fNi9pbmRleC1sZXNzb25fNiIsImlkIjoiZGV2ZWxvcC9qYXZhL3NwcmluZy9yZWRpcy1hbmQtc3ByaW5nLWNvdXJzZS9sZXNzb25fNi9pbmRleC1sZXNzb25fNiIsImlzRG9jc0hvbWVQYWdlIjpmYWxzZSwidGl0bGUiOiJEb21haW4gTW9kZWxzIHdpdGggUmVkaXNKU09OIiwiZGVzY3JpcHRpb24iOiJPYmplY3RpdmVzIiwic291cmNlIjoiQHNpdGUvZG9jcy9kZXZlbG9wL2phdmEvc3ByaW5nL3JlZGlzLWFuZC1zcHJpbmctY291cnNlL2xlc3Nvbl82L2luZGV4LWxlc3Nvbl82Lm1keCIsInNsdWciOiIvZGV2ZWxvcC9qYXZhL3JlZGlzLWFuZC1zcHJpbmctY291cnNlL2xlc3Nvbl82IiwicGVybWFsaW5rIjoiL2RldmVsb3AvamF2YS9yZWRpcy1hbmQtc3ByaW5nLWNvdXJzZS9sZXNzb25fNiIsImVkaXRVcmwiOiJodHRwczovL2dpdGh1Yi5jb20vcmVkaXMtZGV2ZWxvcGVyL3JlZGlzLWRldmVsb3Blci9lZGl0L21hc3Rlci9kb2NzL2RldmVsb3AvamF2YS9zcHJpbmcvcmVkaXMtYW5kLXNwcmluZy1jb3Vyc2UvbGVzc29uXzYvaW5kZXgtbGVzc29uXzYubWR4IiwidmVyc2lvbiI6ImN1cnJlbnQiLCJzaWRlYmFyX2xhYmVsIjoiRG9tYWluIE1vZGVscyB3LyBSZWRpc0pTT04iLCJzaWRlYmFyIjoiZG9jcyIsInByZXZpb3VzIjp7InRpdGxlIjoiQm9va3MsIENhdGVnb3JpZXMgJiBUaGUgQ2F0YWxvZyIsInBlcm1hbGluayI6Ii9kZXZlbG9wL2phdmEvcmVkaXMtYW5kLXNwcmluZy1jb3Vyc2UvbGVzc29uXzUifSwibmV4dCI6eyJ0aXRsZSI6IlNlYXJjaCB3aXRoIFJlZGlTZWFyY2giLCJwZXJtYWxpbmsiOiIvZGV2ZWxvcC9qYXZhL3JlZGlzLWFuZC1zcHJpbmctY291cnNlL2xlc3Nvbl83In19Oy8qIEBqc3hSdW50aW1lIGNsYXNzaWMgKi8gLyogQGpzeCBtZHggKi9pbXBvcnQgdXNlQmFzZVVybCBmcm9tJ0Bkb2N1c2F1cnVzL3VzZUJhc2VVcmwnO2V4cG9ydCBjb25zdCB0b2M9W3t2YWx1ZTonT2JqZWN0aXZlcycsaWQ6J29iamVjdGl2ZXMnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0FnZW5kYScsaWQ6J2FnZW5kYScsY2hpbGRyZW46W119LHt2YWx1ZTonQ2FydHMgYW5kIENhcnQgSXRlbXMnLGlkOidjYXJ0cy1hbmQtY2FydC1pdGVtcycsY2hpbGRyZW46W119LHt2YWx1ZTonUmVkaXNKU09OJyxpZDoncmVkaXNqc29uJyxjaGlsZHJlbjpbXX0se3ZhbHVlOidKUmVkaXNKU09OJyxpZDonanJlZGlzanNvbicsY2hpbGRyZW46W119LHt2YWx1ZTonVGhlIE1vZGVscycsaWQ6J3RoZS1tb2RlbHMnLGNoaWxkcmVuOltdfSx7dmFsdWU6J1B1cmNoYXNlZCBCb29rcycsaWQ6J3B1cmNoYXNlZC1ib29rcycsY2hpbGRyZW46W119LHt2YWx1ZTonVGhlIENhcnQgUmVwb3NpdG9yeScsaWQ6J3RoZS1jYXJ0LXJlcG9zaXRvcnknLGNoaWxkcmVuOltdfSx7dmFsdWU6J1RoZSBDYXJ0IFNlcnZpY2UnLGlkOid0aGUtY2FydC1zZXJ2aWNlJyxjaGlsZHJlbjpbXX0se3ZhbHVlOidHZW5lcmF0aW5nIFJhbmRvbSBDYXJ0cycsaWQ6J2dlbmVyYXRpbmctcmFuZG9tLWNhcnRzJyxjaGlsZHJlbjpbXX1dO2NvbnN0IGxheW91dFByb3BzPXt0b2N9O2NvbnN0IE1EWExheW91dD0id3JhcHBlciI7ZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTURYQ29udGVudCh7Y29tcG9uZW50cywuLi5wcm9wc30pe3JldHVybiBtZHgoTURYTGF5b3V0LF9leHRlbmRzKHt9LGxheW91dFByb3BzLHByb3BzLHtjb21wb25lbnRzOmNvbXBvbmVudHMsbWR4VHlwZToiTURYTGF5b3V0In0pLG1keCgiaDMiLHsiaWQiOiJvYmplY3RpdmVzIn0sYE9iamVjdGl2ZXNgKSxtZHgoInAiLG51bGwsYEFkZCBhIEpTT04tYmFja2VkIGRvbWFpbiBtb2RlbCB0byBSZWRpMlJlYWQgdXNpbmcgdGhlIFJlZGlzSlNPTiBSZWRpcyBtb2R1bGUuYCksbWR4KCJoMyIseyJpZCI6ImFnZW5kYSJ9LGBBZ2VuZGFgKSxtZHgoInAiLG51bGwsYEluIHRoaXMgbGVzc29uLCB5b3UnbGwgbGVhcm4gaG93IHRvOmApLG1keCgidWwiLG51bGwsbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYFVzZSBKU09OIGRvY3VtZW50cyBhcyBleHRlbnNpb25zIG9mIHlvdXIgZG9tYWluLmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBJbXBsZW1lbnQgYSBjdXN0b20gU3ByaW5nIFJlcG9zaXRvcnkgdG8gd29yayB3aXRoIEpTT04gZG9jdW1lbnRzLmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBJbXBsZW1lbnQgdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToibGkifSxgQ2FydENvbnRyb2xsZXJgKSxgIHVzaW5nIHRoZSBKUmVkaXNKU09OIGNsaWVudCBsaWJyYXJ5LgpJZiB5b3UgZ2V0IHN0dWNrOmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBUaGUgcHJvZ3Jlc3MgbWFkZSBpbiB0aGlzIGxlc3NvbiBpcyBhdmFpbGFibGUgb24gdGhlIHJlZGkycmVhZCBnaXRodWIgcmVwb3NpdG9yeSBhdCBgLG1keCgiYSIse3BhcmVudE5hbWU6ImxpIiwiaHJlZiI6Imh0dHBzOi8vZ2l0aHViLmNvbS9yZWRpcy1kZXZlbG9wZXIvcmVkaTJyZWFkL3RyZWUvY291cnNlL21pbGVzdG9uZS02In0sYGh0dHBzOi8vZ2l0aHViLmNvbS9yZWRpcy1kZXZlbG9wZXIvcmVkaTJyZWFkL3RyZWUvY291cnNlL21pbGVzdG9uZS02YCkpKSxtZHgoImgzIix7ImlkIjoiY2FydHMtYW5kLWNhcnQtaXRlbXMifSxgQ2FydHMgYW5kIENhcnQgSXRlbXNgKSxtZHgoInAiLG51bGwsYFdlIHdpbGwgaW1wbGVtZW50IHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ2FydGApLGAgYW5kIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDYXJ0SXRlbWApLGAgbW9kZWxzIGJhY2tlZCBieSBhIGN1c3RvbSBTcHJpbmcgUmVwb3NpdG9yeSB0aGF0IHVzZXMgdGhlIFJlZGlzSlNPTiBBUEkgdmlhIHRoZSBKUmVkaXNKU09OIGNsaWVudCBsaWJyYXJ5LmApLG1keCgicCIsbnVsbCxgV2Ugd2lsbCByZXByZXNlbnQgYSB1c2Vy4oCZcyBjYXJ0IGFzIGEgSlNPTiBkb2N1bWVudCBjb250YWluaW5nIGNhcnQgaXRlbSBzdWJkb2N1bWVudHMuIEFzIHlvdSBjYW4gc2VlIGluIHRoZSBjbGFzcyBkaWFncmFtLCBhIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDYXJ0YCksYCBoYXMgemVybyBvciBtb3JlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDYXJ0SXRlbXNgKSxgLCBhbmQgaXQgYmVsb25ncyB0byBhIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBVc2VyYCksYC5gKSxtZHgoInAiLG51bGwsbWR4KCJpbWciLHthbHQ6IkNhcnRzIGFuZCBDYXJ0IEl0ZW1zIixzcmM6cmVxdWlyZSgiIXVybC1sb2FkZXI/bGltaXQ9MTAwMDAmbmFtZT1hc3NldHMvaW1hZ2VzL1tuYW1lXS1baGFzaF0uW2V4dF0mZmFsbGJhY2s9ZmlsZS1sb2FkZXIhLi9pbWFnZXMvY2FydHNfYW5kX2NhcnRpdGVtcy5wbmciKS5kZWZhdWx0fSkpLG1keCgiaDMiLHsiaWQiOiJyZWRpc2pzb24ifSxgUmVkaXNKU09OYCksbWR4KCJwIixudWxsLGBSZWRpc0pTT04gaXMgYSBSZWRpcyBtb2R1bGUgdGhhdCBsZXRzIHlvdSBzdG9yZSwgdXBkYXRlLCBhbmQgZmV0Y2ggSlNPTiB2YWx1ZXMgbmF0aXZlbHkgaW4gUmVkaXMuCkpTT04gY2FuIGJlIGEgYmV0dGVyIGZpdCBmb3IgbW9kZWxpbmcgY29tcGxleCBkYXRhIGluIFJlZGlzIHRoYW4gSGFzaGVzIGJlY2F1c2UsIHVubGlrZSBIYXNoZXMsCkpTT04gdmFsdWVzIGNhbiBjb250YWluIG5lc3RlZCBhcnJheXMgYW5kIG9iamVjdHMuYCksbWR4KCJoMyIseyJpZCI6ImpyZWRpc2pzb24ifSxgSlJlZGlzSlNPTmApLG1keCgicCIsbnVsbCxgSlJlZGlzSlNPTiAoYCxtZHgoImEiLHtwYXJlbnROYW1lOiJwIiwiaHJlZiI6Imh0dHBzOi8vZ2l0aHViLmNvbS9SZWRpc0pTT04vSlJlZGlzSlNPTiJ9LGBodHRwczovL2dpdGh1Yi5jb20vUmVkaXNKU09OL0pSZWRpc0pTT05gKSxgKSBpcyBhIEphdmEgY2xpZW50IHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIFJlZGlzSlNPTidzIFJlZGlzIEFQSSBhbmQgcHJvdmlkZXMgSmF2YSBzZXJpYWxpemF0aW9uIHVzaW5nIEdvb2dsZeKAmXMgR1NPTiBsaWJyYXJ5LmApLG1keCgiaDQiLHsiaWQiOiJhZGRpbmctanJlZGlzanNvbi1hcy1hLWRlcGVuZGVuY3kifSxgQWRkaW5nIEpSZWRpc0pTT04gYXMgYSBEZXBlbmRlbmN5YCksbWR4KCJwIixudWxsLGBXZSB3aWxsIHVzZSBhIFNOQVBTSE9UIHZlcnNpb24gb2YgSlJlZGlzSlNPTiB0byB0YWtlIGFkdmFudGFnZSBvZiBtb3JlIGFkdmFuY2VkIEpTT04gbWFuaXB1bGF0aW9uIGZlYXR1cmVzIHJlY2VudGx5IGludHJvZHVjZWQuCkFkZCB0aGUgc25hcHNob3RzLXJlcG8gdG8geW91ciBNYXZlbiBQT006YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIix7cGFyZW50TmFtZToicHJlIiwiY2xhc3NOYW1lIjoibGFuZ3VhZ2UteG1sIn0sYDxyZXBvc2l0b3JpZXM+CiAgPHJlcG9zaXRvcnk+CiAgICA8aWQ+c25hcHNob3RzLXJlcG88L2lkPgogICAgPHVybD5odHRwczovL29zcy5zb25hdHlwZS5vcmcvY29udGVudC9yZXBvc2l0b3JpZXMvc25hcHNob3RzPC91cmw+CiAgPC9yZXBvc2l0b3J5Pgo8L3JlcG9zaXRvcmllcz4KCkFuZCB0aGVuIHRoZSBKUmVkaXNKU09OIGRlcGVuZGVuY3kgdG8gdGhlIGRlcGVuZGVuY2llcyBibG9jazoKPGRlcGVuZGVuY3k+CiAgPGdyb3VwSWQ+Y29tLnJlZGlzbGFiczwvZ3JvdXBJZD4KICA8YXJ0aWZhY3RJZD5qcmVqc29uPC9hcnRpZmFjdElkPgogIDx2ZXJzaW9uPjEuNC4wLVNOQVBTSE9UPC92ZXJzaW9uPgo8L2RlcGVuZGVuY3k+CmApKSxtZHgoImgzIix7ImlkIjoidGhlLW1vZGVscyJ9LGBUaGUgTW9kZWxzYCksbWR4KCJoNCIseyJpZCI6InRoZS1jYXJ0aXRlbS1tb2RlbCJ9LGBUaGUgQ2FydEl0ZW0gTW9kZWxgKSxtZHgoInAiLG51bGwsYFdl4oCZbGwgc3RhcnQgd2l0aCB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENhcnRJdGVtIGApLGBtb2RlbC4gSXQgaG9sZHMgaW5mb3JtYXRpb24gYWJvdXQgYSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQm9va2ApLGAgaW4gdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDYXJ0YCksYDsgaXQgc3RvcmVzIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQm9va2ApLGAgSVNCTiAoaWQpLCBwcmljZSwgYW5kIHF1YW50aXR5IGFkZGVkIHRvIHRoZSBjYXJ0LgpBZGQgdGhlIGZpbGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNyYy9tYWluL2phdmEvY29tL3JlZGlzbGFicy9lZHUvcmVkaTJyZWFkL21vZGVscy9DYXJ0SXRlbS5qYXZhYCksYCB3aXRoIHRoZSBmb2xsb3dpbmcgY29udGVudHM6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIix7cGFyZW50TmFtZToicHJlIiwiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtamF2YSJ9LGBwYWNrYWdlIGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5tb2RlbHM7CgppbXBvcnQgbG9tYm9rLkJ1aWxkZXI7CmltcG9ydCBsb21ib2suRGF0YTsKCkBEYXRhCkBCdWlsZGVyCnB1YmxpYyBjbGFzcyBDYXJ0SXRlbSB7CiAgcHJpdmF0ZSBTdHJpbmcgaXNibjsKICBwcml2YXRlIERvdWJsZSBwcmljZTsKICBwcml2YXRlIExvbmcgcXVhbnRpdHk7Cn0KYCkpLG1keCgiaDQiLHsiaWQiOiJ0aGUtY2FydC1tb2RlbCJ9LGBUaGUgQ2FydCBNb2RlbGApLG1keCgicCIsbnVsbCxgVGhlIENhcnQgbW9kZWwgY29udGFpbnMgdGhlIElEIG9mIHRoZSBvd25pbmcgVXNlciBhbmQgYSBzZXQgb2YgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENhcnRJdGVtYCksYHMuIFV0aWxpdHkgbWV0aG9kcyBleGlzdCB0byByZXR1cm4gdGhlIHRvdGFsIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgY2FydCBhbmQgdGhlIHRvdGFsIGNvc3QuCkFkZCB0aGUgZmlsZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgc3JjL21haW4vamF2YS9jb20vcmVkaXNsYWJzL2VkdS9yZWRpMnJlYWQvbW9kZWxzL0NhcnQuamF2YWApLGAgd2l0aCB0aGUgZm9sbG93aW5nIGNvbnRlbnRzOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSxgcGFja2FnZSBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQubW9kZWxzOwoKaW1wb3J0IGphdmEudXRpbC5TZXQ7CgppbXBvcnQgbG9tYm9rLkJ1aWxkZXI7CmltcG9ydCBsb21ib2suRGF0YTsKaW1wb3J0IGxvbWJvay5TaW5ndWxhcjsKCkBEYXRhCkBCdWlsZGVyCnB1YmxpYyBjbGFzcyBDYXJ0IHsKICBwcml2YXRlIFN0cmluZyBpZDsKICBwcml2YXRlIFN0cmluZyB1c2VySWQ7CgogIEBTaW5ndWxhcgogIHByaXZhdGUgU2V0PENhcnRJdGVtPiBjYXJ0SXRlbXM7CgogIHB1YmxpYyBJbnRlZ2VyIGNvdW50KCkgewogICAgcmV0dXJuIGdldENhcnRJdGVtcygpLnNpemUoKTsKICB9CgogIHB1YmxpYyBEb3VibGUgZ2V0VG90YWwoKSB7CiAgICByZXR1cm4gY2FydEl0ZW1zIC8vCiAgICAgICAgLnN0cmVhbSgpIC8vCiAgICAgICAgLm1hcFRvRG91YmxlKGNpIC0+IGNpLmdldFByaWNlKCkgKiBjaS5nZXRRdWFudGl0eSgpKSAvLwogICAgICAgIC5zdW0oKTsKICB9Cn0KYCkpLG1keCgiaDMiLHsiaWQiOiJwdXJjaGFzZWQtYm9va3MifSxgUHVyY2hhc2VkIEJvb2tzYCksbWR4KCJwIixudWxsLGBBZnRlciBhIHVzZXIgY2hlY2tzIG91dCwgd2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHRoZSBib29rcyB0aGUgdXNlciBub3cgb3ducy4gVG8ga2VlcCBpdCBzaW1wbGUsCndlIHdpbGwgYWRkIGEgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFNldDxCb29rPmApLGAgdG8gdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBVc2VyYCksYCBtb2RlbCBhbm5vdGF0ZWQgd2l0aCB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYEBSZWZlcmVuY2VgKSxgIGFubm90YXRpb24uCldl4oCZbGwgYWxzbyBpbmNsdWRlIGEgdXRpbGl0eSBtZXRob2QgdGhhdCBhZGRzIGJvb2tzIHRvIHRoZSB1c2Vy4oCZcyBjb2xsZWN0aW9uIG9mIGJvb2tzIG93bmVkLgpNYWtlIHRoZSBjaGFuZ2VzIGJlbG93IHRvIHRoZSBVc2VyIG1vZGVsOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSxgLy8gLi4uCkBSZWRpc0hhc2gKcHVibGljIGNsYXNzIFVzZXIgewoKICAvLy4uLgoKIEBSZWZlcmVuY2UKIEBKc29uSWRlbnRpdHlSZWZlcmVuY2UoYWx3YXlzQXNJZCA9IHRydWUpCiBwcml2YXRlIFNldDxSb2xlPiByb2xlcyA9IG5ldyBIYXNoU2V0PFJvbGU+KCk7CgogcHVibGljIHZvaWQgYWRkUm9sZShSb2xlIHJvbGUpIHsKICAgcm9sZXMuYWRkKHJvbGUpOwogfQoKIEBSZWZlcmVuY2UKIEBKc29uSWRlbnRpdHlSZWZlcmVuY2UoYWx3YXlzQXNJZCA9IHRydWUpCiBwcml2YXRlIFNldDxCb29rPiBib29rcyA9IG5ldyBIYXNoU2V0PEJvb2s+KCk7CgogcHVibGljIHZvaWQgYWRkQm9vayhCb29rIGJvb2spIHsKICAgYm9va3MuYWRkKGJvb2spOwogfQoKfQpgKSksbWR4KCJwIixudWxsLGBUaGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYEBSZWZlcmVuY2VgKSxgIGFubm90YXRpb24gd29ya3MgZm9yIG91ciBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgU2V0YCksYHMgaW4gdGhlIGNvbnRleHQgb2YgUmVkaXMgc2VyaWFsaXphdGlvbiwgYnV0IHlvdSBtaWdodCBoYXZlIG5vdGljZWQgdGhhdAp0aGUgcm9sZXMgd2VyZSBiZWluZyBmdWxseSBzZXJpYWxpemVkIGludG8gdGhlIHJlc3VsdGluZyBKU09OIHBheWxvYWQgYnkgSmFja3Nvbi4KV2Ugd2lsbCBhZGQgdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBASnNvbklkZW50aXR5UmVmZXJlbmNlIGApLGB3aXRoIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgYWx3YXlzQXNJZGApLGAgcGFyYW1ldGVyIHNldCB0byBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgdHJ1ZWApLGAsIHdoaWNoLCBnaXZlbiB0aGUgcHJvcGVyIG1ldGEtaW5mb3JtYXRpb24gaW4gdGhlIHRhcmdldCBjbGFzc2VzIChgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQm9va2ApLGAgYW5kIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBSb2xlYCksYCksIHdpbGwgbWFrZSBKYWNrc29uIHNlcmlhbGl6ZSBjb2xsZWN0aW9ucyBvZiB0aGVzZSBvYmplY3RzIGFzIElEcy4KVGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBASnNvbklkZW50aXR5SW5mb2ApLGAgYW5ub3RhdGlvbiBhbGxvd3MgdXMgdG8gc2V0IGEgZ2VuZXJhdG9yIChgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgT2JqZWN0SWRHZW5lcmF0b3IuUHJvcGVydHlHZW5lcmF0b3JgKSxgKSB1c2luZyB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGlkYCksYCBwcm9wZXJ0eSB0byBkaXJlY3QgaG93IHRoZSBzZXJpYWxpemF0aW9uIHdpbGwgaGFwcGVuIGluIHRoZSBwcmVzZW5jZSBvZiB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYEBKc29uSWRlbnRpdHlSZWZlcmVuY2VgKSxgIGFubm90YXRpb24uCkFkZCB0aGUgYW5ub3RhdGlvbiB0byB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYEJvb2tgKSxgIG1vZGVsIGFzIHNob3duOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSxgQERhdGEKQEVxdWFsc0FuZEhhc2hDb2RlKG9ubHlFeHBsaWNpdGx5SW5jbHVkZWQgPSB0cnVlKQpASnNvbklkZW50aXR5SW5mbygKICAgICAgICBnZW5lcmF0b3IgPSBPYmplY3RJZEdlbmVyYXRvcnMuUHJvcGVydHlHZW5lcmF0b3IuY2xhc3MsCiAgICAgICAgcHJvcGVydHkgPSAiaWQiKQpAUmVkaXNIYXNoCnB1YmxpYyBjbGFzcyBCb29rIHsKLy8uLi4KfQpgKSksbWR4KCJwIixudWxsLGBTaW1pbGFybHksIHdl4oCZbGwgYWRkIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQEpzb25JZGVudGl0eUluZm9gKSxgIHRvIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgUm9sZWApLGAgbW9kZWw6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIix7cGFyZW50TmFtZToicHJlIiwiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtamF2YSJ9LGBARGF0YQpAQnVpbGRlcgpASnNvbklkZW50aXR5SW5mbygKICAgICAgICBnZW5lcmF0b3IgPSBPYmplY3RJZEdlbmVyYXRvcnMuUHJvcGVydHlHZW5lcmF0b3IuY2xhc3MsCiAgICAgICAgcHJvcGVydHkgPSAiaWQiKQpAUmVkaXNIYXNoCnB1YmxpYyBjbGFzcyBSb2xlIHsKLy8uLi4KfQpgKSksbWR4KCJwIixudWxsLGBOb3csIHdoZW4gSlNPTiBzZXJpYWxpemF0aW9uIG9jY3VycyBpbiB0aGUgUkVTVCBjb250cm9sbGVycywgdGhlIHVzZXIgY29sbGVjdGlvbiB3aWxsIGluY2x1ZGUgdGhlIHJvbGVzIGFzIEpTT04gYXJyYXlzIG9mIHJvbGUgSURzLiBUaGUgdXNlciBjb2xsZWN0aW9uIHdpbGwgYWxzbyBpbmNsdWRlIHRoZSBuZXdseSBhZGRlZCBjb2xsZWN0aW9uIG9mIGJvb2tzIGFzIGFuIGFycmF5IG9mIGJvb2sgSURzLmApLG1keCgiaDMiLHsiaWQiOiJ0aGUtY2FydC1yZXBvc2l0b3J5In0sYFRoZSBDYXJ0IFJlcG9zaXRvcnlgKSxtZHgoInAiLG51bGwsYFJlZGlzSlNPTiBpcyBub3QgeWV0IHNlYW1sZXNzbHkgaW50ZWdyYXRlZCB3aXRoIFNwcmluZywgYnV0IHRoYXQgZG9lcyBub3QgcHJldmVudCB1cyBmcm9tIHVzaW5nIFJlZGlzSlNPTiB0aGUg4oCcU3ByaW5nIFdheeKAnS4gV2UgaGF2ZSBwcm92aWRlZCBhbiBpbXBsZW1lbnRhdGlvbiBvZiBTcHJpbmfigJlzIENydWRSZXBvc2l0b3J5IHNvIHRoYXQgd2UgY2FuIGltcGxlbWVudCBvdXIgc2VydmljZXMgYW5kIGNvbnRyb2xsZXJzLgpBZGQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9jb20vcmVkaXNsYWJzL2VkdS9yZWRpMnJlYWQvcmVwb3NpdG9yaWVzL0NhcnRSZXBvc2l0b3J5LmphdmEgd2l0aCB0aGUgZm9sbG93aW5nIGNvbnRlbnRzOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSxgcGFja2FnZSBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQucmVwb3NpdG9yaWVzOwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk9wdGlvbmFsOwppbXBvcnQgamF2YS51dGlsLlVVSUQ7CmltcG9ydCBqYXZhLnV0aWwuc3RyZWFtLkNvbGxlY3RvcnM7CmltcG9ydCBqYXZhLnV0aWwuc3RyZWFtLlN0cmVhbVN1cHBvcnQ7CgppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVscy5DYXJ0OwppbXBvcnQgY29tLnJlZGlzbGFicy5tb2R1bGVzLnJlanNvbi5KUmVKU09OOwoKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5yZWRpcy5jb3JlLkhhc2hPcGVyYXRpb25zOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLnJlZGlzLmNvcmUuUmVkaXNUZW1wbGF0ZTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5yZWRpcy5jb3JlLlNldE9wZXJhdGlvbnM7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEucmVwb3NpdG9yeS5DcnVkUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5SZXBvc2l0b3J5OwoKQFJlcG9zaXRvcnkKcHVibGljIGNsYXNzIENhcnRSZXBvc2l0b3J5IGltcGxlbWVudHMgQ3J1ZFJlcG9zaXRvcnk8Q2FydCwgU3RyaW5nPiB7CgogIHByaXZhdGUgSlJlSlNPTiByZWRpc0pzb24gPSBuZXcgSlJlSlNPTigpOwogIHByaXZhdGUgZmluYWwgc3RhdGljIFN0cmluZyBpZFByZWZpeCA9IENhcnQuY2xhc3MuZ2V0TmFtZSgpOwoKICBAQXV0b3dpcmVkCiAgcHJpdmF0ZSBSZWRpc1RlbXBsYXRlPFN0cmluZywgU3RyaW5nPiB0ZW1wbGF0ZTsKCiAgcHJpdmF0ZSBTZXRPcGVyYXRpb25zPFN0cmluZywgU3RyaW5nPiByZWRpc1NldHMoKSB7CiAgICByZXR1cm4gdGVtcGxhdGUub3BzRm9yU2V0KCk7CiAgfQoKICBwcml2YXRlIEhhc2hPcGVyYXRpb25zPFN0cmluZywgU3RyaW5nLCBTdHJpbmc+IHJlZGlzSGFzaCgpIHsKICAgIHJldHVybiB0ZW1wbGF0ZS5vcHNGb3JIYXNoKCk7CiAgfQoKICBAT3ZlcnJpZGUKICBwdWJsaWMgPFMgZXh0ZW5kcyBDYXJ0PiBTIHNhdmUoUyBjYXJ0KSB7CiAgICAvLyBzZXQgY2FydCBpZAogICAgaWYgKGNhcnQuZ2V0SWQoKSA9PSBudWxsKSB7CiAgICAgIGNhcnQuc2V0SWQoVVVJRC5yYW5kb21VVUlEKCkudG9TdHJpbmcoKSk7CiAgICB9CiAgICBTdHJpbmcga2V5ID0gZ2V0S2V5KGNhcnQpOwogICAgcmVkaXNKc29uLnNldChrZXksIGNhcnQpOwogICAgcmVkaXNTZXRzKCkuYWRkKGlkUHJlZml4LCBrZXkpOwogICAgcmVkaXNIYXNoKCkucHV0KCJjYXJ0cy1ieS11c2VyLWlkLWlkeCIsIGNhcnQuZ2V0VXNlcklkKCkudG9TdHJpbmcoKSwgY2FydC5nZXRJZCgpLnRvU3RyaW5nKCkpOwoKICAgIHJldHVybiBjYXJ0OwogIH0KCiAgQE92ZXJyaWRlCiAgcHVibGljIDxTIGV4dGVuZHMgQ2FydD4gSXRlcmFibGU8Uz4gc2F2ZUFsbChJdGVyYWJsZTxTPiBjYXJ0cykgewogICAgcmV0dXJuIFN0cmVhbVN1cHBvcnQgLy8KICAgICAgICAuc3RyZWFtKGNhcnRzLnNwbGl0ZXJhdG9yKCksIGZhbHNlKSAvLwogICAgICAgIC5tYXAoY2FydCAtPiBzYXZlKGNhcnQpKSAvLwogICAgICAgIC5jb2xsZWN0KENvbGxlY3RvcnMudG9MaXN0KCkpOwogIH0KCiAgQE92ZXJyaWRlCiAgcHVibGljIE9wdGlvbmFsPENhcnQ+IGZpbmRCeUlkKFN0cmluZyBpZCkgewogICAgQ2FydCBjYXJ0ID0gcmVkaXNKc29uLmdldChnZXRLZXkoaWQpLCBDYXJ0LmNsYXNzKTsKICAgIHJldHVybiBPcHRpb25hbC5vZk51bGxhYmxlKGNhcnQpOwogIH0KCiAgQE92ZXJyaWRlCiAgcHVibGljIGJvb2xlYW4gZXhpc3RzQnlJZChTdHJpbmcgaWQpIHsKICAgIHJldHVybiB0ZW1wbGF0ZS5oYXNLZXkoZ2V0S2V5KGlkKSk7CiAgfQoKICBAT3ZlcnJpZGUKICBwdWJsaWMgSXRlcmFibGU8Q2FydD4gZmluZEFsbCgpIHsKICAgIFN0cmluZ1tdIGtleXMgPSByZWRpc1NldHMoKS5tZW1iZXJzKGlkUHJlZml4KS5zdHJlYW0oKS50b0FycmF5KFN0cmluZ1tdOjpuZXcpOwogICAgcmV0dXJuIChJdGVyYWJsZTxDYXJ0PikgcmVkaXNKc29uLm1nZXQoQ2FydC5jbGFzcywga2V5cyk7CiAgfQoKICBAT3ZlcnJpZGUKICBwdWJsaWMgSXRlcmFibGU8Q2FydD4gZmluZEFsbEJ5SWQoSXRlcmFibGU8U3RyaW5nPiBpZHMpIHsKICAgIFN0cmluZ1tdIGtleXMgPSBTdHJlYW1TdXBwb3J0LnN0cmVhbShpZHMuc3BsaXRlcmF0b3IoKSwgZmFsc2UpIC8vCiAgICAgIC5tYXAoaWQgLT4gZ2V0S2V5KGlkKSkudG9BcnJheShTdHJpbmdbXTo6bmV3KTsKICAgIHJldHVybiAoSXRlcmFibGU8Q2FydD4pIHJlZGlzSnNvbi5tZ2V0KENhcnQuY2xhc3MsIGtleXMpOwogIH0KCiAgQE92ZXJyaWRlCiAgcHVibGljIGxvbmcgY291bnQoKSB7CiAgICByZXR1cm4gcmVkaXNTZXRzKCkuc2l6ZShpZFByZWZpeCk7CiAgfQoKICBAT3ZlcnJpZGUKICBwdWJsaWMgdm9pZCBkZWxldGVCeUlkKFN0cmluZyBpZCkgewogICAgcmVkaXNKc29uLmRlbChnZXRLZXkoaWQpKTsKICB9CgogIEBPdmVycmlkZQogIHB1YmxpYyB2b2lkIGRlbGV0ZShDYXJ0IGNhcnQpIHsKICAgIGRlbGV0ZUJ5SWQoY2FydC5nZXRJZCgpKTsKICB9CgogIEBPdmVycmlkZQogIHB1YmxpYyB2b2lkIGRlbGV0ZUFsbChJdGVyYWJsZTw/IGV4dGVuZHMgQ2FydD4gY2FydHMpIHsKICAgIExpc3Q8U3RyaW5nPiBrZXlzID0gU3RyZWFtU3VwcG9ydCAvLwogICAgICAgIC5zdHJlYW0oY2FydHMuc3BsaXRlcmF0b3IoKSwgZmFsc2UpIC8vCiAgICAgICAgLm1hcChjYXJ0IC0+IGlkUHJlZml4ICsgY2FydC5nZXRJZCgpKSAvLwogICAgICAgIC5jb2xsZWN0KENvbGxlY3RvcnMudG9MaXN0KCkpOwogICAgcmVkaXNTZXRzKCkuZ2V0T3BlcmF0aW9ucygpLmRlbGV0ZShrZXlzKTsKICB9CgogIEBPdmVycmlkZQogIHB1YmxpYyB2b2lkIGRlbGV0ZUFsbCgpIHsKICAgIHJlZGlzU2V0cygpLmdldE9wZXJhdGlvbnMoKS5kZWxldGUocmVkaXNTZXRzKCkubWVtYmVycyhpZFByZWZpeCkpOwogIH0KCiAgcHVibGljIE9wdGlvbmFsPENhcnQ+IGZpbmRCeVVzZXJJZChMb25nIGlkKSB7CiAgICBTdHJpbmcgY2FydElkID0gcmVkaXNIYXNoKCkuZ2V0KCJjYXJ0cy1ieS11c2VyLWlkLWlkeCIsIGlkLnRvU3RyaW5nKCkpOwogICAgcmV0dXJuIChjYXJ0SWQgIT0gbnVsbCkgPyBmaW5kQnlJZChjYXJ0SWQpIDogT3B0aW9uYWwuZW1wdHkoKTsKICB9CgogIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGdldEtleShDYXJ0IGNhcnQpIHsKICAgIHJldHVybiBTdHJpbmcuZm9ybWF0KCIlczolcyIsIGlkUHJlZml4LCBjYXJ0LmdldElkKCkpOwogIH0KCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgZ2V0S2V5KFN0cmluZyBpZCkgewogICAgcmV0dXJuIFN0cmluZy5mb3JtYXQoIiVzOiVzIiwgaWRQcmVmaXgsIGlkKTsKICB9Cgp9CmApKSxtZHgoInAiLG51bGwsYEFzIHdpdGggdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBAUmVkaXNIYXNoYCksYCBhbm5vdGF0ZWQgZW50aXRpZXMsIG91ciBDYXJ0cyBhcmUgbWFpbnRhaW5lZCB3aXRoIGEgY29sbGVjdGlvbiBvZiBSZWRpcyBKU09OIG9iamVjdHMgYW5kIGEgUmVkaXMgU2V0IHRvIG1haW50YWluIHRoZSBjb2xsZWN0aW9uIG9mIGtleXMuYCksbWR4KCJoMyIseyJpZCI6InRoZS1jYXJ0LXNlcnZpY2UifSxgVGhlIENhcnQgU2VydmljZWApLG1keCgicCIsbnVsbCxgQXMgU3ByaW5nIGFwcGxpY2F0aW9ucyBnZXQgbW9yZSBjb21wbGV4LCB1c2luZyB0aGUgcmVwb3NpdG9yaWVzIGRpcmVjdGx5IG9uIHlvdXIgY29udHJvbGxlcnMgb3ZlcmNvbXBsaWNhdGVzIHRoZSBjb250cm9sbGVycyBhbmQgZGl2ZXJ0cyBmcm9tIHRoZSByZXNwb25zaWJpbGl0eSB0byBjb250cm9sCnJvdXRpbmcgYW5kIGRlYWwgd2l0aCBpbmNvbWluZyBwYXJhbWV0ZXJzIGFuZCBvdXRnb2luZyBKU09OIHBheWxvYWRzLgpBbiBhcHByb2FjaCB0byBrZWVwIGJvdGggbW9kZWxzIGFuZCBjb250cm9sbGVycyBmcm9tIGdldHRpbmcgYmxvYXRlZCB3aXRoIGJ1c2luZXNzIGxvZ2ljICjigJxmYXTigJ0gbW9kZWxzIGFuZCDigJxmYXTigJ0gY29udHJvbGxlcnMpIGlzIHRvIGludHJvZHVjZSBhIGJ1c2luZXNzIGxvZ2ljIHNlcnZpY2UgbGF5ZXIuCldl4oCZbGwgZG8gc28gZm9yIHRoZSBjYXJ0IGJ1c2luZXNzIGxvZ2ljIGJ5IGludHJvZHVjaW5nIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ2FydFNlcnZpY2VgKSxgLiBUaGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENhcnRTZXJ2aWNlYCksYCBpbnRyb2R1Y2VzIGZvdXIgY2FydC1yZWxhdGVkIGJ1c2luZXNzIG1ldGhvZHM6YCksbWR4KCJ1bCIsbnVsbCxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJsaSJ9LGBnZXRgKSxgOiBGaW5kcyBhIGNhcnQgYnkgaWRgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJsaSJ9LGBhZGRUb0NhcnRgKSxgOiBBZGRzIGEgY2FydCBpdGVtIHRvIGEgY2FydGApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYHJlbW92ZUZyb21DYXJ0YCksYDogUmVtb3ZlcyBhbiBpc2JuIGZyb20gdGhlIGNhcnTigJlzIHNldCBvZiBjYXJ0IGl0ZW1zYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToibGkifSxgY2hlY2tvdXRgKSxgOiBHaXZlbiBhIGNhcnQgSUQsIGFkZHMgdGhlIGNvbnRlbnRzIHRvIHRoZSB1c2Vy4oCZcyBjb2xsZWN0aW9uIG9mIG93bmVkIGJvb2tzYCkpLG1keCgicCIsbnVsbCxgQWRkIHRoZSBmaWxlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBzcmMvbWFpbi9qYXZhL2NvbS9yZWRpc2xhYnMvZWR1L3JlZGkycmVhZC9zZXJ2aWNlcy9DYXJ0U2VydmljZS5qYXZhYCksYCB3aXRoIHRoZSBmb2xsb3dpbmcgY29udGVudHM6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIix7cGFyZW50TmFtZToicHJlIiwiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtamF2YSJ9LGBwYWNrYWdlIGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5zZXJ2aWNlczsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuT3B0aW9uYWw7CmltcG9ydCBqYXZhLnV0aWwuT3B0aW9uYWxMb25nOwppbXBvcnQgamF2YS51dGlsLnN0cmVhbS5Mb25nU3RyZWFtOwoKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5tb2RlbHMuQm9vazsKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5tb2RlbHMuQ2FydDsKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5tb2RlbHMuQ2FydEl0ZW07CmltcG9ydCBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQubW9kZWxzLlVzZXI7CmltcG9ydCBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQucmVwb3NpdG9yaWVzLkJvb2tSZXBvc2l0b3J5OwppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLnJlcG9zaXRvcmllcy5DYXJ0UmVwb3NpdG9yeTsKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5yZXBvc2l0b3JpZXMuVXNlclJlcG9zaXRvcnk7CmltcG9ydCBjb20ucmVkaXNsYWJzLm1vZHVsZXMucmVqc29uLkpSZUpTT047CmltcG9ydCBjb20ucmVkaXNsYWJzLm1vZHVsZXMucmVqc29uLlBhdGg7CgppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLlNlcnZpY2U7CgpAU2VydmljZQpwdWJsaWMgY2xhc3MgQ2FydFNlcnZpY2UgewoKIEBBdXRvd2lyZWQKIHByaXZhdGUgQ2FydFJlcG9zaXRvcnkgY2FydFJlcG9zaXRvcnk7CgogQEF1dG93aXJlZAogcHJpdmF0ZSBCb29rUmVwb3NpdG9yeSBib29rUmVwb3NpdG9yeTsKCiBAQXV0b3dpcmVkCiBwcml2YXRlIFVzZXJSZXBvc2l0b3J5IHVzZXJSZXBvc2l0b3J5OwoKIHByaXZhdGUgSlJlSlNPTiByZWRpc0pzb24gPSBuZXcgSlJlSlNPTigpOwoKIFBhdGggY2FydEl0ZW1zUGF0aCA9IFBhdGgub2YoIi5jYXJ0SXRlbXMiKTsKCiBwdWJsaWMgQ2FydCBnZXQoU3RyaW5nIGlkKSB7CiAgIHJldHVybiBjYXJ0UmVwb3NpdG9yeS5maW5kQnlJZChpZCkuZ2V0KCk7CiB9CgogcHVibGljIHZvaWQgYWRkVG9DYXJ0KFN0cmluZyBpZCwgQ2FydEl0ZW0gaXRlbSkgewogICBPcHRpb25hbDxCb29rPiBib29rID0gYm9va1JlcG9zaXRvcnkuZmluZEJ5SWQoaXRlbS5nZXRJc2JuKCkpOwogICBpZiAoYm9vay5pc1ByZXNlbnQoKSkgewogICAgIFN0cmluZyBjYXJ0S2V5ID0gQ2FydFJlcG9zaXRvcnkuZ2V0S2V5KGlkKTsKICAgICBpdGVtLnNldFByaWNlKGJvb2suZ2V0KCkuZ2V0UHJpY2UoKSk7CiAgICAgcmVkaXNKc29uLmFyckFwcGVuZChjYXJ0S2V5LCBjYXJ0SXRlbXNQYXRoLCBpdGVtKTsKICAgfQogfQoKIHB1YmxpYyB2b2lkIHJlbW92ZUZyb21DYXJ0KFN0cmluZyBpZCwgU3RyaW5nIGlzYm4pIHsKICAgT3B0aW9uYWw8Q2FydD4gY2FydEZpbmRlciA9IGNhcnRSZXBvc2l0b3J5LmZpbmRCeUlkKGlkKTsKICAgaWYgKGNhcnRGaW5kZXIuaXNQcmVzZW50KCkpIHsKICAgICBDYXJ0IGNhcnQgPSBjYXJ0RmluZGVyLmdldCgpOwogICAgIFN0cmluZyBjYXJ0S2V5ID0gQ2FydFJlcG9zaXRvcnkuZ2V0S2V5KGNhcnQuZ2V0SWQoKSk7CiAgICAgTGlzdDxDYXJ0SXRlbT4gY2FydEl0ZW1zID0gbmV3IEFycmF5TGlzdDxDYXJ0SXRlbT4oY2FydC5nZXRDYXJ0SXRlbXMoKSk7CiAgICAgT3B0aW9uYWxMb25nIGNhcnRJdGVtSW5kZXggPSAgTG9uZ1N0cmVhbS5yYW5nZSgwLCBjYXJ0SXRlbXMuc2l6ZSgpKS5maWx0ZXIoaSAtPiBjYXJ0SXRlbXMuZ2V0KChpbnQpIGkpLmdldElzYm4oKS5lcXVhbHMoaXNibikpLmZpbmRGaXJzdCgpOwogICAgIGlmIChjYXJ0SXRlbUluZGV4LmlzUHJlc2VudCgpKSB7CiAgICAgICByZWRpc0pzb24uYXJyUG9wKGNhcnRLZXksIENhcnRJdGVtLmNsYXNzLCBjYXJ0SXRlbXNQYXRoLCBjYXJ0SXRlbUluZGV4LmdldEFzTG9uZygpKTsKICAgICB9CiAgIH0KIH0KCiBwdWJsaWMgdm9pZCBjaGVja291dChTdHJpbmcgaWQpIHsKICAgQ2FydCBjYXJ0ID0gY2FydFJlcG9zaXRvcnkuZmluZEJ5SWQoaWQpLmdldCgpOwogICBVc2VyIHVzZXIgPSB1c2VyUmVwb3NpdG9yeS5maW5kQnlJZChjYXJ0LmdldFVzZXJJZCgpKS5nZXQoKTsKICAgY2FydC5nZXRDYXJ0SXRlbXMoKS5mb3JFYWNoKGNhcnRJdGVtIC0+IHsKICAgICBCb29rIGJvb2sgPSBib29rUmVwb3NpdG9yeS5maW5kQnlJZChjYXJ0SXRlbS5nZXRJc2JuKCkpLmdldCgpOwogICAgIHVzZXIuYWRkQm9vayhib29rKTsKICAgfSk7CiAgIHVzZXJSZXBvc2l0b3J5LnNhdmUodXNlcik7CiAgIC8vIGNhcnRSZXBvc2l0b3J5LmRlbGV0ZShjYXJ0KTsKIH0KfQpgKSksbWR4KCJwIixudWxsLGBUaGUgc2VydmljZSBpbXBsZW1lbnRzIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgYWRkVG9DYXJ0YCksYCBhbmQgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHJlbW92ZUZyb21DYXJ0IGApLGBtZXRob2RzIG5hdGl2ZWx5IGF0IHRoZSBKU09OIGxldmVsIHVzaW5nIEpTT05QYXRoIHN5bnRheCB0byBhZGQgYW5kIHJlbW92ZSBpdGVtcyBmcm9tIHRoZSBjYXJ0LgpMZXTigJlzIGRlbHZlIGRlZXBlciBpbnRvIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGVzZSBtZXRob2RzLmApLG1keCgiaDQiLHsiaWQiOiJhZGRpbmctaXRlbXMtdG8tdGhlLWNhcnQifSxgQWRkaW5nIEl0ZW1zIHRvIHRoZSBjYXJ0YCksbWR4KCJwIixudWxsLGBJbiB0aGUgYWRkVG9DYXJ0IG1ldGhvZDpgKSxtZHgoInVsIixudWxsLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBXZSBzZWFyY2ggZm9yIHRoZSBjYXJ0IGJ5IElEYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYElmIHdlIGZpbmQgdGhlIGNhcmQsIHRoZW4gd2Ugc2VhcmNoIGZvciB0aGUgYm9vayB0byBiZSBhZGRlZCB0byB0aGUgY2FydCBieSBJU0JOIHVzaW5nIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYEJvb2tSZXBvc2l0b3J5YCkpLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBJZiB3ZSBmaW5kIHRoZSBib29rLCB3ZSBhZGQgdGhlIGJvb2vigJlzIGN1cnJlbnQgcHJpY2UgdG8gdGhlIGl0ZW0gKHdlIGRvbuKAmXQgd2FudCBjdXN0b21lcnMgc2V0dGluZyB0aGVpciBvd24gcHJpY2VzKWApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBXZSB0aGVuIHVzZSB0aGUgSlNPTi5BUlJBUFBFTkQgY29tbWFuZCB0byBpbnNlcnQgdGhlIEpTT04gb2JqZWN0IGludG8gdGhlIEpTT04gYXJyYXkgYXQgdGhlIEpTT05QYXRoIGV4cHJlc3Npb24gYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJsaSJ9LGAiLmNhcnRJdGVtcyJgKSkpLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSxgcHVibGljIHZvaWQgYWRkVG9DYXJ0KFN0cmluZyBpZCwgQ2FydEl0ZW0gaXRlbSkgewogIE9wdGlvbmFsPEJvb2s+IGJvb2sgPSBib29rUmVwb3NpdG9yeS5maW5kQnlJZChpdGVtLmdldElzYm4oKSk7CiAgaWYgKGJvb2suaXNQcmVzZW50KCkpIHsKICAgIFN0cmluZyBjYXJ0S2V5ID0gQ2FydFJlcG9zaXRvcnkuZ2V0S2V5KGlkKTsKICAgIGl0ZW0uc2V0UHJpY2UoYm9vay5nZXQoKS5nZXRQcmljZSgpKTsKICAgIHJlZGlzSnNvbi5hcnJBcHBlbmQoY2FydEtleSwgY2FydEl0ZW1zUGF0aCwgaXRlbSk7CiAgfQp9CmApKSxtZHgoImg0Iix7ImlkIjoicmVtb3ZpbmctaXRlbXMtZnJvbS10aGUtY2FydCJ9LGBSZW1vdmluZyBJdGVtcyBmcm9tIHRoZSBjYXJ0YCksbWR4KCJwIixudWxsLGBJbiB0aGUgcmVtb3ZlRnJvbUNhcnQgbWV0aG9kOgpXZSBzZWFyY2ggZm9yIHRoZSBjYXJ0IGJ5IElELmApLG1keCgidWwiLG51bGwsbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYElmIHdlIGZpbmQgdGhlIGNhcnQsIHdlIHNlYXJjaCBmb3IgdGhlIGluZGV4IG9mIHRoZSBpdGVtIHRvIGJlIHJlbW92ZWQgaW4gdGhlIGFycmF5IG9mIGNhcnQgaXRlbXMuYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYElmIHdlIGZpbmQgdGhlIGl0ZW0sIHdlIHVzZSB0aGUgSlNPTi5BUlJQT1AgY29tbWFuZCB0byByZW1vdmUgdGhlIGl0ZW0gYnkgaXRzIGluZGV4IGF0IHRoZSBKU09OUGF0aCBleHByZXNzaW9uIOKAnC5jYXJ0SXRlbXPigJ0uYCkpLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSxgcHVibGljIHZvaWQgcmVtb3ZlRnJvbUNhcnQoU3RyaW5nIGlkLCBTdHJpbmcgaXNibikgewogIE9wdGlvbmFsPENhcnQ+IGNhcnRGaW5kZXIgPSBjYXJ0UmVwb3NpdG9yeS5maW5kQnlJZChpZCk7CiAgaWYgKGNhcnRGaW5kZXIuaXNQcmVzZW50KCkpIHsKICAgIENhcnQgY2FydCA9IGNhcnRGaW5kZXIuZ2V0KCk7CiAgICBTdHJpbmcgY2FydEtleSA9IENhcnRSZXBvc2l0b3J5LmdldEtleShjYXJ0LmdldElkKCkpOwogICAgTGlzdDxDYXJ0SXRlbT4gY2FydEl0ZW1zID0gbmV3IEFycmF5TGlzdDxDYXJ0SXRlbT4oY2FydC5nZXRDYXJ0SXRlbXMoKSk7CiAgICBPcHRpb25hbExvbmcgY2FydEl0ZW1JbmRleCA9ICBMb25nU3RyZWFtLnJhbmdlKDAsIGNhcnRJdGVtcy5zaXplKCkpLmZpbHRlcihpIC0+IGNhcnRJdGVtcy5nZXQoKGludCkgaSkuZ2V0SXNibigpLmVxdWFscyhpc2JuKSkuZmluZEZpcnN0KCk7CiAgICBpZiAoY2FydEl0ZW1JbmRleC5pc1ByZXNlbnQoKSkgewogICAgICByZWRpc0pzb24uYXJyUG9wKGNhcnRLZXksIENhcnRJdGVtLmNsYXNzLCBjYXJ0SXRlbXNQYXRoLCBjYXJ0SXRlbUluZGV4LmdldEFzTG9uZygpKTsKICAgIH0KICB9Cn0KYCkpLG1keCgiaDMiLHsiaWQiOiJnZW5lcmF0aW5nLXJhbmRvbS1jYXJ0cyJ9LGBHZW5lcmF0aW5nIFJhbmRvbSBDYXJ0c2ApLG1keCgicCIsbnVsbCxgV2Ugbm93IGhhdmUgYWxsIHRoZSBwaWVjZXMgaW4gcGxhY2UgdG8gY3JlYXRlIGEgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENvbW1hbmRMaW5lUnVubmVyYCksYCB0aGF0IGNhbiBnZW5lcmF0ZSByYW5kb20gY2FydHMgZm9yIG91ciB1c2Vycy4KQXMgZG9uZSBwcmV2aW91c2x5LCB3ZSB3aWxsIHNldCB0aGUgbnVtYmVyIG9mIGNhcnRzIGdlbmVyYXRlZCB1c2luZyBhbiBhcHBsaWNhdGlvbiBwcm9wZXJ0eS4gVG8gZG8gc28sIGFkZCB0aGUgZm9sbG93aW5nIHRvIHRoZSBmaWxlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBzcmMvbWFpbi9yZXNvdXJjZXMvYXBwbGljYXRpb24ucHJvcGVydGllc2ApLGA6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIix7cGFyZW50TmFtZToicHJlIiwiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtamF2YSJ9LGBhcHAubnVtYmVyT2ZDYXJ0cz0yNTAwCmApKSxtZHgoInAiLG51bGwsYFRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ3JlYXRlQ2FydHNgKSxgIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDb21tYW5kTGluZVJ1bm5lcmApLGAgaXMgc2hvd24gYmVsb3cuIEFkZCBpdCB0byB0aGUgYm9vdCBwYWNrYWdlLmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSxgcGFja2FnZSBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQuYm9vdDsKCmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRpbC5SYW5kb207CmltcG9ydCBqYXZhLnV0aWwuU2V0OwppbXBvcnQgamF2YS51dGlsLnN0cmVhbS5JbnRTdHJlYW07CgppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVscy5Cb29rOwppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVscy5DYXJ0OwppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVscy5DYXJ0SXRlbTsKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5tb2RlbHMuVXNlcjsKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5yZXBvc2l0b3JpZXMuQm9va1JlcG9zaXRvcnk7CmltcG9ydCBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQucmVwb3NpdG9yaWVzLkNhcnRSZXBvc2l0b3J5OwppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLnNlcnZpY2VzLkNhcnRTZXJ2aWNlOwoKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLlZhbHVlOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5ib290LkNvbW1hbmRMaW5lUnVubmVyOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jb3JlLmFubm90YXRpb24uT3JkZXI7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEucmVkaXMuY29yZS5SZWRpc1RlbXBsYXRlOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLkNvbXBvbmVudDsKCmltcG9ydCBsb21ib2suZXh0ZXJuLnNsZjRqLlNsZjRqOwoKQENvbXBvbmVudApAT3JkZXIoNSkKQFNsZjRqCnB1YmxpYyBjbGFzcyBDcmVhdGVDYXJ0cyBpbXBsZW1lbnRzIENvbW1hbmRMaW5lUnVubmVyIHsKCiAgQEF1dG93aXJlZAogIHByaXZhdGUgUmVkaXNUZW1wbGF0ZTxTdHJpbmcsIFN0cmluZz4gcmVkaXNUZW1wbGF0ZTsKCiAgQEF1dG93aXJlZAogIENhcnRSZXBvc2l0b3J5IGNhcnRSZXBvc2l0b3J5OwoKICBAQXV0b3dpcmVkCiAgQm9va1JlcG9zaXRvcnkgYm9va1JlcG9zaXRvcnk7CgogIEBBdXRvd2lyZWQKICBDYXJ0U2VydmljZSBjYXJ0U2VydmljZTsKCiAgQFZhbHVlKCJcJHthcHAubnVtYmVyT2ZDYXJ0c30iKQogIHByaXZhdGUgSW50ZWdlciBudW1iZXJPZkNhcnRzOwoKICBAT3ZlcnJpZGUKICBwdWJsaWMgdm9pZCBydW4oU3RyaW5nLi4uIGFyZ3MpIHRocm93cyBFeGNlcHRpb24gewogICAgaWYgKGNhcnRSZXBvc2l0b3J5LmNvdW50KCkgPT0gMCkgewogICAgICBSYW5kb20gcmFuZG9tID0gbmV3IFJhbmRvbSgpOwoKICAgICAgLy8gbG9vcHMgZm9yIHRoZSBudW1iZXIgb2YgY2FydHMgdG8gY3JlYXRlCiAgICAgIEludFN0cmVhbS5yYW5nZSgwLCBudW1iZXJPZkNhcnRzKS5mb3JFYWNoKG4gLT4gewogICAgICAgIC8vIGdldCBhIHJhbmRvbSB1c2VyCiAgICAgICAgU3RyaW5nIHVzZXJJZCA9IHJlZGlzVGVtcGxhdGUub3BzRm9yU2V0KCkvLwogICAgICAgICAgICAucmFuZG9tTWVtYmVyKFVzZXIuY2xhc3MuZ2V0TmFtZSgpKTsKCiAgICAgICAgLy8gbWFrZSBhIGNhcnQgZm9yIHRoZSB1c2VyCiAgICAgICAgQ2FydCBjYXJ0ID0gQ2FydC5idWlsZGVyKCkvLwogICAgICAgICAgICAudXNlcklkKHVzZXJJZCkgLy8KICAgICAgICAgICAgLmJ1aWxkKCk7CgogICAgICAgIC8vIGdldCBiZXR3ZWVuIDEgYW5kIDcgYm9va3MKICAgICAgICBTZXQ8Qm9vaz4gYm9va3MgPSBnZXRSYW5kb21Cb29rcyhib29rUmVwb3NpdG9yeSwgNyk7CgogICAgICAgIC8vIGFkZCB0byBjYXJ0CiAgICAgICAgY2FydC5zZXRDYXJ0SXRlbXMoZ2V0Q2FydEl0ZW1zRm9yQm9va3MoYm9va3MpKTsKCiAgICAgICAgLy8gc2F2ZSB0aGUgY2FydAogICAgICAgIGNhcnRSZXBvc2l0b3J5LnNhdmUoY2FydCk7CgogICAgICAgIC8vIHJhbmRvbWx5IGNoZWNrb3V0IGNhcnRzCiAgICAgICAgaWYgKHJhbmRvbS5uZXh0Qm9vbGVhbigpKSB7CiAgICAgICAgICBjYXJ0U2VydmljZS5jaGVja291dChjYXJ0LmdldElkKCkpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBsb2cuaW5mbygiPj4+PiBDcmVhdGVkIENhcnRzLi4uIik7CiAgICB9CiAgfQoKICBwcml2YXRlIFNldDxCb29rPiBnZXRSYW5kb21Cb29rcyhCb29rUmVwb3NpdG9yeSBib29rUmVwb3NpdG9yeSwgaW50IG1heCkgewogICAgUmFuZG9tIHJhbmRvbSA9IG5ldyBSYW5kb20oKTsKICAgIGludCBob3dNYW55ID0gcmFuZG9tLm5leHRJbnQobWF4KSArIDE7CiAgICBTZXQ8Qm9vaz4gYm9va3MgPSBuZXcgSGFzaFNldDxCb29rPigpOwogICAgSW50U3RyZWFtLnJhbmdlKDEsIGhvd01hbnkpLmZvckVhY2gobiAtPiB7CiAgICAgIFN0cmluZyByYW5kb21Cb29rSWQgPSByZWRpc1RlbXBsYXRlLm9wc0ZvclNldCgpLnJhbmRvbU1lbWJlcihCb29rLmNsYXNzLmdldE5hbWUoKSk7CiAgICAgIGJvb2tzLmFkZChib29rUmVwb3NpdG9yeS5maW5kQnlJZChyYW5kb21Cb29rSWQpLmdldCgpKTsKICAgIH0pOwoKICAgIHJldHVybiBib29rczsKICB9CgogIHByaXZhdGUgU2V0PENhcnRJdGVtPiBnZXRDYXJ0SXRlbXNGb3JCb29rcyhTZXQ8Qm9vaz4gYm9va3MpIHsKICAgIFNldDxDYXJ0SXRlbT4gaXRlbXMgPSBuZXcgSGFzaFNldDxDYXJ0SXRlbT4oKTsKICAgIGJvb2tzLmZvckVhY2goYm9vayAtPiB7CiAgICAgIENhcnRJdGVtIGl0ZW0gPSBDYXJ0SXRlbS5idWlsZGVyKCkvLwogICAgICAgICAgLmlzYm4oYm9vay5nZXRJZCgpKSAvLwogICAgICAgICAgLnByaWNlKGJvb2suZ2V0UHJpY2UoKSkgLy8KICAgICAgICAgIC5xdWFudGl0eSgxTCkgLy8KICAgICAgICAgIC5idWlsZCgpOwogICAgICBpdGVtcy5hZGQoaXRlbSk7CiAgICB9KTsKCiAgICByZXR1cm4gaXRlbXM7CiAgfQp9CmApKSxtZHgoInAiLG51bGwsYExldOKAmXMgYnJlYWsgZG93biB0aGUgQ3JlYXRlQ2FydHMgY2xhc3M6YCksbWR4KCJ1bCIsbnVsbCxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgQXMgd2l0aCBvdGhlciBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYENvbW1hbmRMaW5lUnVubmVyYCksYHMsIHdlIGNoZWNrIHRoYXQgdGhlcmUgYXJlIG5vIGNhcnRzIGNyZWF0ZWQuYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYEZvciBlYWNoIGNhcnQgdG8gYmUgY3JlYXRlZCwgd2VgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgUmV0cmlldmUgYSByYW5kb20gdXNlci5gKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgQ3JlYXRlIGEgY2FydCBmb3IgdGhlIHVzZXIuYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYFJldHJpZXZlIGJldHdlZW4gMSBhbmQgNyBib29rcy5gKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgQWRkIHRoZSBjYXJ0IGl0ZW1zIHRvIHRoZSBjYXJ0IGZvciB0aGUgcmV0cmlldmVkIGJvb2tzLmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBSYW5kb21seSDigJxjaGVja291dOKAnSB0aGUgY2FydC5gKSksbWR4KCJwIixudWxsLGBUaGVyZSBhcmUgdHdvIHByaXZhdGUgdXRpbGl0eSBtZXRob2RzIGF0IHRoZSBib3R0b20gb2YgdGhlIGNsYXNzIHRvIGdldCBhIHJhbmRvbSBudW1iZXIgb2YgYm9va3MgYW5kIHRvIGNyZWF0ZSBjYXJ0IGl0ZW1zIGZyb20gYSBzZXQgb2YgYm9va3MuClVwb24gc2VydmVyIHN0YXJ0IChhZnRlciBzb21lIENQVSBjeWNsZXMpIHlvdSBzaG91bGQgc2VlOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLWJhc2gifSxgMjAyMS0wNC0wNCAxNDo1ODowOC43MzcgIElORk8gMzE0NTkgLS0tIFsgIHJlc3RhcnRlZE1haW5dIGMuci5lZHUucmVkaTJyZWFkLmJvb3QuQ3JlYXRlQ2FydHMgICAgICAgOiA+Pj4+IENyZWF0ZWQgQ2FydHMuLi4KYCkpLG1keCgicCIsbnVsbCxgV2UgY2FuIG5vdyB1c2UgdGhlIFJlZGlzIENMSSB0byBnZXQgYSByYW5kb20gY2FydCBrZXkgZnJvbSB0aGUgY2FydCBzZXQsIGNoZWNrIHRoZSB0eXBlIG9mIG9uZSBvZiB0aGUga2V5cyAoUmVKU09OLVJMKSBhbmQgdXNlIHRoZSBKU09OLkdFVCBjb21tYW5kIHRvIHJldHJpZXZlIHRoZSBKU09OIHBheWxvYWQ6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIix7cGFyZW50TmFtZToicHJlIiwiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9LGAxMjcuMC4wLjE6NjM3OT4gU1JBTkRNRU1CRVIgImNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5tb2RlbHMuQ2FydCIKImNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5tb2RlbHMuQ2FydDpkY2Q2YTZjMy01OWQ2LTQzYjQtODc1MC01NTNkMTU5Y2RlYjgiCjEyNy4wLjAuMTo2Mzc5PiBUWVBFICJjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQubW9kZWxzLkNhcnQ6ZGNkNmE2YzMtNTlkNi00M2I0LTg3NTAtNTUzZDE1OWNkZWI4IgpSZUpTT04tUkwKMTI3LjAuMC4xOjYzNzk+IEpTT04uR0VUICJjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQubW9kZWxzLkNhcnQ6ZGNkNmE2YzMtNTlkNi00M2I0LTg3NTAtNTUzZDE1OWNkZWI4Igoie1xcImlkXFwiOlxcImRjZDZhNmMzLTU5ZDYtNDNiNC04NzUwLTU1M2QxNTljZGViOFxcIixcXCJ1c2VySWRcXCI6XFwiLTMzNTY5NjkyOTE4Mjc1OTgxNzJcXCIsXFwiY2FydEl0ZW1zXFwiOlt7XFwiaXNiblxcIjpcXCIxNzg0MzkxMDkzXFwiLFxcInByaWNlXFwiOjE3LjE5MDAwMDAwMDAwMDAwMSxcXCJxdWFudGl0eVxcIjoxfSx7XFwiaXNiblxcIjpcXCIzNjYyNDMzNTI0XFwiLFxcInByaWNlXFwiOjU5Ljk5MDAwMDAwMDAwMDAwMixcXCJxdWFudGl0eVxcIjoxfV19IgpgKSksbWR4KCJoNCIseyJpZCI6InRoZS1jYXJ0LWNvbnRyb2xsZXIifSxgVGhlIENhcnQgQ29udHJvbGxlcmApLG1keCgicCIsbnVsbCxgVGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDYXJ0Q29udHJvbGxlcmApLGAgaXMgbW9zdGx5IGEgcGFzcy10aHJvdWdoIHRvIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ2FydFNlcnZpY2VgKSxgIChhcyBjb250cm9sbGVycyBhcmUgaW50ZW5kZWQgdG8gYmUpLmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSxgcGFja2FnZSBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQuY29udHJvbGxlcnM7CgppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVscy5DYXJ0OwppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVscy5DYXJ0SXRlbTsKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5zZXJ2aWNlcy5DYXJ0U2VydmljZTsKCmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5BdXRvd2lyZWQ7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLndlYi5iaW5kLmFubm90YXRpb24uRGVsZXRlTWFwcGluZzsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5HZXRNYXBwaW5nOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLlBhdGhWYXJpYWJsZTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5Qb3N0TWFwcGluZzsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5SZXF1ZXN0Qm9keTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5SZXF1ZXN0TWFwcGluZzsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5SZXN0Q29udHJvbGxlcjsKCkBSZXN0Q29udHJvbGxlcgpAUmVxdWVzdE1hcHBpbmcoIi9hcGkvY2FydHMiKQpwdWJsaWMgY2xhc3MgQ2FydENvbnRyb2xsZXIgewoKICBAQXV0b3dpcmVkCiAgcHJpdmF0ZSBDYXJ0U2VydmljZSBjYXJ0U2VydmljZTsKCiAgQEdldE1hcHBpbmcoIi97aWR9IikKICBwdWJsaWMgQ2FydCBnZXQoQFBhdGhWYXJpYWJsZSgiaWQiKSBTdHJpbmcgaWQpIHsKICAgIHJldHVybiBjYXJ0U2VydmljZS5nZXQoaWQpOwogIH0KCiAgQFBvc3RNYXBwaW5nKCIve2lkfSIpCiAgcHVibGljIHZvaWQgYWRkVG9DYXJ0KEBQYXRoVmFyaWFibGUoImlkIikgU3RyaW5nIGlkLCBAUmVxdWVzdEJvZHkgQ2FydEl0ZW0gaXRlbSkgewogICAgY2FydFNlcnZpY2UuYWRkVG9DYXJ0KGlkLCBpdGVtKTsKICB9CgogIEBEZWxldGVNYXBwaW5nKCIve2lkfSIpCiAgcHVibGljIHZvaWQgcmVtb3ZlRnJvbUNhcnQoQFBhdGhWYXJpYWJsZSgiaWQiKSBTdHJpbmcgaWQsIEBSZXF1ZXN0Qm9keSBTdHJpbmcgaXNibikgewogICAgY2FydFNlcnZpY2UucmVtb3ZlRnJvbUNhcnQoaWQsIGlzYm4pOwogIH0KCiAgQFBvc3RNYXBwaW5nKCIve2lkfS9jaGVja291dCIpCiAgcHVibGljIHZvaWQgY2hlY2tvdXQoQFBhdGhWYXJpYWJsZSgiaWQiKSBTdHJpbmcgaWQpIHsKICAgIGNhcnRTZXJ2aWNlLmNoZWNrb3V0KGlkKTsKICB9Cgp9CmApKSxtZHgoInAiLG51bGwsYExldOKAmXMgdXNlIGN1cmwgdG8gcmVxdWVzdCBhIGNhcnQgYnkgaXRzIElEOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLWJhc2gifSxgY3VybCAtLWxvY2F0aW9uIC0tcmVxdWVzdCBHRVQgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvY2FydHMvZGNkNmE2YzMtNTlkNi00M2I0LTg3NTAtNTUzZDE1OWNkZWI4JwpgKSksbWR4KCJwIixudWxsLGBXaGljaCBzaG91bGQgcmV0dXJuIGEgcGF5bG9hZCBsaWtlOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIse3BhcmVudE5hbWU6InByZSIsImNsYXNzTmFtZSI6Imxhbmd1YWdlLWpzb24ifSxgewogICAgImlkIjogImRjZDZhNmMzLTU5ZDYtNDNiNC04NzUwLTU1M2QxNTljZGViOCIsCiAgICAidXNlcklkIjogIi0zMzU2OTY5MjkxODI3NTk4MTcyIiwKICAgICJjYXJ0SXRlbXMiOiBbCiAgICAgICAgewogICAgICAgICAgICAiaXNibiI6ICIxNzg0MzkxMDkzIiwKICAgICAgICAgICAgInByaWNlIjogMTcuMTksCiAgICAgICAgICAgICJxdWFudGl0eSI6IDEKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgImlzYm4iOiAiMzY2MjQzMzUyNCIsCiAgICAgICAgICAgICJwcmljZSI6IDU5Ljk5LAogICAgICAgICAgICAicXVhbnRpdHkiOiAxCiAgICAgICAgfQogICAgXSwKICAgICJ0b3RhbCI6IDc3LjE4Cn0KYCkpKTt9O01EWENvbnRlbnQuaXNNRFhDb21wb25lbnQ9dHJ1ZTs="},null]}