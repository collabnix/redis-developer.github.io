{"remainingRequest":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/babel-loader/lib/index.js??ref--8-1!/Users/ajeetraina/projects/8sep/redis-developer.github.io/src/theme/Search/index.js","dependencies":[{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/src/theme/Search/index.js","mtime":1631077489390},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1631077703630},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/babel-loader/lib/index.js","mtime":1631077703341}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlYWN0LHt1c2VFZmZlY3R9ZnJvbSdyZWFjdCc7aW1wb3J0IFJlZGlzU2l0ZVNlYXJjaCBmcm9tJ0BhYnJvb2tpbnMtcmVkaXMvcmVkaXMtc2l0ZXNlYXJjaC1mcm9udGVuZC9kaXN0L3JlZGlzLXNpdGVzZWFyY2guZXNtJztjb25zdCBTRUFSQ0hfQVBJX1VSTD0iaHR0cHM6Ly9zZWFyY2gtc2VydmljZS5yZWRpc2xhYnMuY29tL3NlYXJjaCI7Y29uc3QgU0VBUkNIX1NJVEU9Imh0dHBzOi8vZGV2ZWxvcGVyLnJlZGlzLmNvbSI7Y29uc3QgVEhJUlRZX1NFQ09ORFM9MzAwMDA7Y29uc3QgU0VBUkNIX0xPR089JzxhIGNsYXNzPSJwb3dlcmVkLWJ5LXJlZGlzZWFyY2giIGhyZWY9Imh0dHBzOi8vb3NzLnJlZGlzbGFicy5jb20vcmVkaXNlYXJjaC8iPjwvYT4nO2Z1bmN0aW9uIGVzY2FwZUh0bWwoc3RyKXtyZXR1cm4gc3RyLnJlcGxhY2UoL1smPD4iJ1wvXS9nLGZ1bmN0aW9uKHMpe3ZhciBlbnRpdHlNYXA9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6JyZxdW90OycsIiciOicmIzM5OycsIi8iOicmI3gyRjsnfTtyZXR1cm4gZW50aXR5TWFwW3NdO30pO31mdW5jdGlvbiBzZXRXaXRoRXhwaXJ5KGtleSx2YWx1ZSx0dGwpe2NvbnN0IG5vdz1uZXcgRGF0ZSgpO2NvbnN0IGl0ZW09e3ZhbHVlOnZhbHVlLGV4cGlyeTpub3cuZ2V0VGltZSgpK3R0bH07bG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LEpTT04uc3RyaW5naWZ5KGl0ZW0pKTt9ZnVuY3Rpb24gZ2V0V2l0aEV4cGlyeShrZXkpe2NvbnN0IGl0ZW1TdHI9bG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtpZighaXRlbVN0cil7cmV0dXJuIG51bGw7fWNvbnN0IGl0ZW09SlNPTi5wYXJzZShpdGVtU3RyKTtjb25zdCBub3c9bmV3IERhdGUoKTtpZihub3cuZ2V0VGltZSgpPml0ZW0uZXhwaXJ5KXtsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO3JldHVybiBudWxsO31yZXR1cm4gaXRlbS52YWx1ZTt9ZnVuY3Rpb24gU2VhcmNoKHByb3BzKXt2YXIgaW5pdGlhbGl6ZWQ9ZmFsc2U7dXNlRWZmZWN0KGZ1bmN0aW9uIG9uRmlyc3RNb3VudCgpe2NvbnN0IHNlYXJjaExvZ289ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlZGlzZWFyY2gtbG9nbycpLHNlYXJjaERpdj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcmVkaXMtc2l0ZXNlYXJjaCIpO3ZhciBsYXN0UXVlcnk7aW5pdGlhbGl6ZWQ9dHJ1ZTtzZWFyY2hMb2dvLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsZT0+e2UucHJldmVudERlZmF1bHQoKTt9KTtzZWFyY2hEaXYuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIixlPT57fSk7bmV3IFJlZGlzU2l0ZVNlYXJjaCgnI3JlZGlzLXNpdGVzZWFyY2gnLHtkZWJvdW5jZVRpbWU6Mix6SW5kZXg6MTAwLHNlYXJjaDppbnB1dD0+e2NvbnN0IHRyaW1tZWRJbnB1dD1pbnB1dC50cmltKCk7Y29uc3QgdXJsPWAke1NFQVJDSF9BUElfVVJMfT9xPSR7dHJpbW1lZElucHV0fSomc2l0ZT0ke1NFQVJDSF9TSVRFfWA7aWYoaW5wdXQubGVuZ3RoPT09MCl7cmV0dXJuW107fXRyeXt4aHIuYWJvcnQoKTt9Y2F0Y2goZSl7fS8vIFNhdmUgdGhlIHF1ZXJ5IHNvIHdlIGNhbiBhcHBlbmQgaXQgdG8gYSBzZWxlY3RlZCByZXN1bHQgVVJMIGxhdGVyLgovLyBXZSB1c2UgdGhpcyB0byB0cmFjayBzZWFyY2ggcXVlcmllcy4KbGFzdFF1ZXJ5PXRyaW1tZWRJbnB1dDtjb25zdCBjYWNoZWRSZXN1bHRzPWdldFdpdGhFeHBpcnkodXJsKTtpZihjYWNoZWRSZXN1bHRzKXtyZXR1cm4gY2FjaGVkUmVzdWx0czt9cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmU9PntmZXRjaCh1cmwpLmNhdGNoKGZ1bmN0aW9uKGVycil7Y29uc29sZS5lcnJvcignRXJyb3IgcXVlcnlpbmcgc2VhcmNoIEFQSTogJyxlcnIpO3Jlc29sdmUoW10pO30pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe2lmKHJlc3BvbnNlPT09dW5kZWZpbmVkfHwhcmVzcG9uc2Uub2spe2NvbnNvbGUuZXJyb3IoJ0Vycm9yIHF1ZXJ5aW5nIHNlYXJjaCBBUEk6ICcscmVzcG9uc2UpO3Jlc29sdmUoW10pO3JldHVybjt9cmV0dXJuIHJlc3BvbnNlLmpzb24oKTt9KS50aGVuKGZ1bmN0aW9uKGRhdGEpe2lmKGRhdGE9PT11bmRlZmluZWR8fCFkYXRhKXtyZXR1cm47fS8vIFB1c2ggYSBmYWtlICdubyByZXN1bHRzJyBkb2N1bWVudCBpZiB0aGVyZSB3ZXJlIG5vIHJlc3VsdHMuCnZhciByZXN1bHRzO2lmKCFkYXRhLnJlc3VsdHMubGVuZ3RoKXtjb25zdCBzYWZlSW5wdXQ9ZXNjYXBlSHRtbCh0cmltbWVkSW5wdXQpO3Jlc3VsdHM9W3t0aXRsZTonTm8gcmVzdWx0cycsc2VjdGlvbl90aXRsZTpgTm8gcmVzdWx0cyBmb3VuZCBmb3IgJyR7c2FmZUlucHV0fSdgLGJvZHk6JycsaGllcmFyY2h5OlsnJ119XTt9ZWxzZXtyZXN1bHRzPWRhdGEucmVzdWx0czt9c2V0V2l0aEV4cGlyeSh1cmwscmVzdWx0cyxUSElSVFlfU0VDT05EUyk7cmVzb2x2ZShyZXN1bHRzKTt9KTt9KTt9LHJlbmRlclJlc3VsdDoocmVzdWx0LHByb3BzKT0+e2xldCBzZWN0aW9uVGl0bGU9IiIsaGFzU2VjdGlvblRpdGxlPXJlc3VsdC5zZWN0aW9uX3RpdGxlIT09IiI7aWYoaGFzU2VjdGlvblRpdGxlKXtzZWN0aW9uVGl0bGU9YAogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic2VhcmNoLXNlY3Rpb24tdGl0bGUiPgogICAgICAgICAgICAgICR7cmVzdWx0LnNlY3Rpb25fdGl0bGV9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgYDt9cmV0dXJuYAogICAgICAgICAgPGxpICR7cHJvcHN9PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWFyY2gtbGVmdCI+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VhcmNoLXRpdGxlIj4KICAgICAgICAgICAgICAgICR7cmVzdWx0LnRpdGxlfQogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VhcmNoLXJpZ2h0Ij4KICAgICAgICAgICAgICAke3NlY3Rpb25UaXRsZX0KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWFyY2gtYm9keSI+CiAgICAgICAgICAgICAgICAke3Jlc3VsdC5ib2R5fQogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvbGk+CiAgICAgICAgYDt9LGdldFJlc3VsdFZhbHVlOnJlc3VsdD0+IiIsLy8gT3BlbiB0aGUgc2VsZWN0ZWQgYXJ0aWNsZSBpbgovLyBhIG5ldyB3aW5kb3cKb25TdWJtaXQ6cmVzdWx0PT57aWYocmVzdWx0KXtsYXN0UXVlcnk9ZW5jb2RlVVJJQ29tcG9uZW50KGxhc3RRdWVyeSk7d2luZG93Lm9wZW4oYCR7cmVzdWx0LnVybH0/cz0ke2xhc3RRdWVyeX1gLCJfdG9wIik7fX0sb25VcGRhdGU6KHJlc3VsdHMsc2VsZWN0ZWRJbmRleCk9Pntjb25zdCByZWRpc2VhcmNoTG9nbz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVkaXNlYXJjaC1sb2dvJyk7aWYocmVzdWx0cy5sZW5ndGgpe3JlZGlzZWFyY2hMb2dvLmlubmVySFRNTD1TRUFSQ0hfTE9HTzt9ZWxzZXtyZWRpc2VhcmNoTG9nby5pbm5lckhUTUw9IiI7fX19KTt9LFtpbml0aWFsaXplZF0pO3JldHVybi8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLHtpZDoicmVkaXMtc2l0ZXNlYXJjaCIsY2xhc3NOYW1lOiJyZWRpcy1zaXRlc2VhcmNoIHJlZGlzLXNpdGVzZWFyY2gtaW5saW5lIn0sLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImlucHV0Iix7Y2xhc3NOYW1lOiJyZWRpcy1zaXRlc2VhcmNoLWlucHV0In0pLC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLHtjbGFzc05hbWU6InJlZGlzLXNpdGVzZWFyY2gtcmVzdWx0LWxpc3Qtd3JhcHBlciJ9LC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ1bCIse2NsYXNzTmFtZToicmVkaXMtc2l0ZXNlYXJjaC1yZXN1bHQtbGlzdCJ9KSwvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2Iix7Y2xhc3NOYW1lOiJyZWRpc2VhcmNoLWxvZ28ifSkpKTt9ZXhwb3J0IGRlZmF1bHQgU2VhcmNoOw=="},{"version":3,"sources":["/Users/ajeetraina/projects/8sep/redis-developer.github.io/src/theme/Search/index.js"],"names":["React","useEffect","RedisSiteSearch","SEARCH_API_URL","SEARCH_SITE","THIRTY_SECONDS","SEARCH_LOGO","escapeHtml","str","replace","s","entityMap","setWithExpiry","key","value","ttl","now","Date","item","expiry","getTime","localStorage","setItem","JSON","stringify","getWithExpiry","itemStr","getItem","parse","removeItem","Search","props","initialized","onFirstMount","searchLogo","document","querySelector","searchDiv","lastQuery","addEventListener","e","preventDefault","debounceTime","zIndex","search","input","trimmedInput","trim","url","length","xhr","abort","cachedResults","Promise","resolve","fetch","catch","err","console","error","then","response","undefined","ok","json","data","results","safeInput","title","section_title","body","hierarchy","renderResult","result","sectionTitle","hasSectionTitle","getResultValue","onSubmit","encodeURIComponent","window","open","onUpdate","selectedIndex","redisearchLogo","innerHTML"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react'\nimport RedisSiteSearch from '@abrookins-redis/redis-sitesearch-frontend/dist/redis-sitesearch.esm'\n\nconst SEARCH_API_URL = \"https://search-service.redislabs.com/search\"\nconst SEARCH_SITE = \"https://developer.redis.com\"\nconst THIRTY_SECONDS = 30000\nconst SEARCH_LOGO = '<a class=\"powered-by-redisearch\" href=\"https://oss.redislabs.com/redisearch/\"></a>'\n\n\nfunction escapeHtml(str) {\n  return str.replace(/[&<>\"'\\/]/g, function (s) {\n    var entityMap = {\n        \"&\": \"&amp;\",\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\",\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        \"/\": '&#x2F;'\n      };\n\n    return entityMap[s];\n  });\n}\n\nfunction setWithExpiry(key, value, ttl) {\n  const now = new Date()\n\n  const item = {\n    value: value,\n    expiry: now.getTime() + ttl,\n  }\n  localStorage.setItem(key, JSON.stringify(item))\n}\n\n\nfunction getWithExpiry(key) {\n  const itemStr = localStorage.getItem(key)\n  if (!itemStr) {\n    return null\n  }\n  const item = JSON.parse(itemStr)\n  const now = new Date()\n\n  if (now.getTime() > item.expiry) {\n    localStorage.removeItem(key)\n    return null\n  }\n\n  return item.value\n}\n\n\nfunction Search(props) {\n  var initialized = false;\n\n  useEffect(function onFirstMount() {\n    const searchLogo = document.querySelector('.redisearch-logo'),\n      searchDiv = document.querySelector(\"#redis-sitesearch\")\n    var lastQuery\n\n    initialized = true;\n\n    searchLogo.addEventListener('mousedown', (e) => {\n      e.preventDefault()\n    })\n\n    searchDiv.addEventListener(\"mousedown\", (e) => {\n    })\n\n    new RedisSiteSearch('#redis-sitesearch', {\n      debounceTime: 2,\n      zIndex: 100,\n\n      search: input => {\n        const trimmedInput = input.trim()\n        const url = `${SEARCH_API_URL}?q=${trimmedInput}*&site=${SEARCH_SITE}`\n\n        if (input.length === 0) {\n          return []\n        }\n\n        try { xhr.abort(); } catch(e){}\n\n        // Save the query so we can append it to a selected result URL later.\n        // We use this to track search queries.\n        lastQuery = trimmedInput\n\n        const cachedResults = getWithExpiry(url)\n\n        if (cachedResults) {\n          return cachedResults\n        }\n\n        return new Promise(resolve => {\n          fetch(url)\n            .catch(function(err) {\n              console.error('Error querying search API: ', err)\n              resolve([])\n            })\n            .then(function(response) {\n              if (response === undefined || !response.ok) {\n                console.error('Error querying search API: ', response)\n                resolve([])\n                return\n              }\n              return response.json()\n            })\n            .then(function(data) {\n              if (data === undefined || !data) {\n                return\n              }\n              // Push a fake 'no results' document if there were no results.\n              var results\n              if (!data.results.length) {\n                const safeInput = escapeHtml(trimmedInput)\n                results = [\n                  {\n                    title: 'No results',\n                    section_title: `No results found for '${safeInput}'`,\n                    body: '',\n                    hierarchy: [''],\n                  },\n                ]\n              } else {\n                results = data.results\n              }\n\n              setWithExpiry(url, results, THIRTY_SECONDS)\n              resolve(results)\n            })\n        })\n      },\n\n      renderResult: (result, props) => {\n        let sectionTitle = \"\",\n          hasSectionTitle = result.section_title !== \"\"\n\n        if (hasSectionTitle) {\n          sectionTitle = `\n            <div className=\"search-section-title\">\n              ${result.section_title}\n            </div>\n          `\n        }\n\n        return `\n          <li ${props}>\n            <div class=\"search-left\">\n              <div class=\"search-title\">\n                ${result.title}\n              </div>\n            </div>\n            <div class=\"search-right\">\n              ${sectionTitle}\n              <div class=\"search-body\">\n                ${result.body}\n              </div>\n            </div>\n          </li>\n        `\n      },\n\n      getResultValue: result => \"\",\n\n      // Open the selected article in\n      // a new window\n      onSubmit: result => {\n        if (result) {\n          lastQuery = encodeURIComponent(lastQuery)\n          window.open(`${result.url}?s=${lastQuery}`, \"_top\")\n        }\n      },\n\n      onUpdate: (results, selectedIndex) => {\n        const redisearchLogo = document.querySelector('.redisearch-logo')\n        if (results.length) {\n          redisearchLogo.innerHTML = SEARCH_LOGO\n        } else {\n          redisearchLogo.innerHTML = \"\"\n        }\n      }\n    })\n  }, [initialized])\n\n  return <div id=\"redis-sitesearch\" className=\"redis-sitesearch redis-sitesearch-inline\">\n        <input className=\"redis-sitesearch-input\"/>\n\n        <div className=\"redis-sitesearch-result-list-wrapper\">\n          <ul className=\"redis-sitesearch-result-list\"></ul>\n          <div className=\"redisearch-logo\">\n          </div>\n        </div>\n    </div>\n}\n\nexport default Search;\n"]}]}