{"remainingRequest":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/babel-loader/lib/index.js??ref--11-1!/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/mdx-loader/src/index.js??ref--11-2!/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js??ref--11-3!/Users/ajeetraina/projects/8sep/redis-developer.github.io/docs/develop/java/spring/redis-and-spring-course/lesson_5/index-lesson_5.mdx","dependencies":[{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/docs/develop/java/spring/redis-and-spring-course/lesson_5/index-lesson_5.mdx","mtime":1631077488446},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/.docusaurus/docusaurus-plugin-content-docs/default/site-docs-develop-java-spring-redis-and-spring-course-lesson-5-index-lesson-5-mdx-c1a.json","mtime":1631077870285},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1631077703630},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/babel-loader/lib/index.js","mtime":1631077703341},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/mdx-loader/src/index.js","mtime":1631077777797},{"path":"/Users/ajeetraina/projects/8sep/redis-developer.github.io/node_modules/@docusaurus/plugin-content-docs/lib/markdown/index.js","mtime":1631077776334}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9leHRlbmRzIGZyb20iL1VzZXJzL2FqZWV0cmFpbmEvcHJvamVjdHMvOHNlcC9yZWRpcy1kZXZlbG9wZXIuZ2l0aHViLmlvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzIjtpbXBvcnQgUmVhY3QgZnJvbSdyZWFjdCc7aW1wb3J0e21keH1mcm9tJ0BtZHgtanMvcmVhY3QnO2V4cG9ydCBjb25zdCBmcm9udE1hdHRlcj17aWQ6J2luZGV4LWxlc3Nvbl81Jyx0aXRsZTonQm9va3MsIENhdGVnb3JpZXMgJiBUaGUgQ2F0YWxvZycsc2lkZWJhcl9sYWJlbDonQm9va3MsIENhdGVnb3JpZXMgJiBUaGUgQ2F0YWxvZycsc2x1ZzonL2RldmVsb3AvamF2YS9yZWRpcy1hbmQtc3ByaW5nLWNvdXJzZS9sZXNzb25fNSd9O2V4cG9ydCBjb25zdCBtZXRhZGF0YT17InVudmVyc2lvbmVkSWQiOiJkZXZlbG9wL2phdmEvc3ByaW5nL3JlZGlzLWFuZC1zcHJpbmctY291cnNlL2xlc3Nvbl81L2luZGV4LWxlc3Nvbl81IiwiaWQiOiJkZXZlbG9wL2phdmEvc3ByaW5nL3JlZGlzLWFuZC1zcHJpbmctY291cnNlL2xlc3Nvbl81L2luZGV4LWxlc3Nvbl81IiwiaXNEb2NzSG9tZVBhZ2UiOmZhbHNlLCJ0aXRsZSI6IkJvb2tzLCBDYXRlZ29yaWVzICYgVGhlIENhdGFsb2ciLCJkZXNjcmlwdGlvbiI6Ik9iamVjdGl2ZXMiLCJzb3VyY2UiOiJAc2l0ZS9kb2NzL2RldmVsb3AvamF2YS9zcHJpbmcvcmVkaXMtYW5kLXNwcmluZy1jb3Vyc2UvbGVzc29uXzUvaW5kZXgtbGVzc29uXzUubWR4Iiwic2x1ZyI6Ii9kZXZlbG9wL2phdmEvcmVkaXMtYW5kLXNwcmluZy1jb3Vyc2UvbGVzc29uXzUiLCJwZXJtYWxpbmsiOiIvZGV2ZWxvcC9qYXZhL3JlZGlzLWFuZC1zcHJpbmctY291cnNlL2xlc3Nvbl81IiwiZWRpdFVybCI6Imh0dHBzOi8vZ2l0aHViLmNvbS9yZWRpcy1kZXZlbG9wZXIvcmVkaXMtZGV2ZWxvcGVyL2VkaXQvbWFzdGVyL2RvY3MvZGV2ZWxvcC9qYXZhL3NwcmluZy9yZWRpcy1hbmQtc3ByaW5nLWNvdXJzZS9sZXNzb25fNS9pbmRleC1sZXNzb25fNS5tZHgiLCJ2ZXJzaW9uIjoiY3VycmVudCIsInNpZGViYXJfbGFiZWwiOiJCb29rcywgQ2F0ZWdvcmllcyAmIFRoZSBDYXRhbG9nIiwic2lkZWJhciI6ImRvY3MiLCJwcmV2aW91cyI6eyJ0aXRsZSI6IlVzZXIvUm9sZXMgJiBTZWNvbmRhcnkgSW5kZXhlcyIsInBlcm1hbGluayI6Ii9kZXZlbG9wL2phdmEvcmVkaXMtYW5kLXNwcmluZy1jb3Vyc2UvbGVzc29uXzQifSwibmV4dCI6eyJ0aXRsZSI6IkRvbWFpbiBNb2RlbHMgd2l0aCBSZWRpc0pTT04iLCJwZXJtYWxpbmsiOiIvZGV2ZWxvcC9qYXZhL3JlZGlzLWFuZC1zcHJpbmctY291cnNlL2xlc3Nvbl82In19Oy8qIEBqc3hSdW50aW1lIGNsYXNzaWMgKi8gLyogQGpzeCBtZHggKi9pbXBvcnQgdXNlQmFzZVVybCBmcm9tJ0Bkb2N1c2F1cnVzL3VzZUJhc2VVcmwnO2V4cG9ydCBjb25zdCB0b2M9W3t2YWx1ZTonT2JqZWN0aXZlcycsaWQ6J29iamVjdGl2ZXMnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0FnZW5kYScsaWQ6J2FnZW5kYScsY2hpbGRyZW46W119LHt2YWx1ZTonQm9va3MsIENhdGVnb3JpZXMsIGFuZCBCb29rIFJhdGluZ3MnLGlkOidib29rcy1jYXRlZ29yaWVzLWFuZC1ib29rLXJhdGluZ3MnLGNoaWxkcmVuOltdfSx7dmFsdWU6J1RoZSBDYXRlZ29yeSBSZXBvc2l0b3J5JyxpZDondGhlLWNhdGVnb3J5LXJlcG9zaXRvcnknLGNoaWxkcmVuOltdfSx7dmFsdWU6J1RoZSBCb29rIE1vZGVsJyxpZDondGhlLWJvb2stbW9kZWwnLGNoaWxkcmVuOltdfSx7dmFsdWU6J1RoZSBCb29rIFJlcG9zaXRvcnknLGlkOid0aGUtYm9vay1yZXBvc2l0b3J5JyxjaGlsZHJlbjpbXX0se3ZhbHVlOidUaGUgQm9vayBSYXRpbmcgUmVwb3NpdG9yeScsaWQ6J3RoZS1ib29rLXJhdGluZy1yZXBvc2l0b3J5JyxjaGlsZHJlbjpbXX0se3ZhbHVlOidMb2FkaW5nIEJvb2tzJyxpZDonbG9hZGluZy1ib29rcycsY2hpbGRyZW46W119LHt2YWx1ZTonQm9vayBDb250cm9sbGVyJyxpZDonYm9vay1jb250cm9sbGVyJyxjaGlsZHJlbjpbXX0se3ZhbHVlOidHZXQgYWxsIEJvb2tzJyxpZDonZ2V0LWFsbC1ib29rcycsY2hpbGRyZW46W119LHt2YWx1ZTonR2V0IGEgYm9vayBieSBJU0JOJyxpZDonZ2V0LWEtYm9vay1ieS1pc2JuJyxjaGlsZHJlbjpbXX0se3ZhbHVlOidHZXQgYWxsIENhdGVnb3JpZXMnLGlkOidnZXQtYWxsLWNhdGVnb3JpZXMnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0dlbmVyYXRlIEJvb2sgUmF0aW5ncycsaWQ6J2dlbmVyYXRlLWJvb2stcmF0aW5ncycsY2hpbGRyZW46W119LHt2YWx1ZTonSW1wbGVtZW50aW5nIFBhZ2luYXRpb24gd2l0aCBBbGwgQm9va3MnLGlkOidpbXBsZW1lbnRpbmctcGFnaW5hdGlvbi13aXRoLWFsbC1ib29rcycsY2hpbGRyZW46W119XTtjb25zdCBsYXlvdXRQcm9wcz17dG9jfTtjb25zdCBNRFhMYXlvdXQ9IndyYXBwZXIiO2V4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1EWENvbnRlbnQoe2NvbXBvbmVudHMsLi4ucHJvcHN9KXtyZXR1cm4gbWR4KE1EWExheW91dCxfZXh0ZW5kcyh7fSxsYXlvdXRQcm9wcyxwcm9wcyx7Y29tcG9uZW50czpjb21wb25lbnRzLG1keFR5cGU6Ik1EWExheW91dCJ9KSxtZHgoImgzIix7ImlkIjoib2JqZWN0aXZlcyJ9LGBPYmplY3RpdmVzYCksbWR4KCJwIixudWxsLGBDcmVhdGUgdGhlIEJvb2stQ2F0ZWdvcnktQm9vay1SYXRpbmdzIGRvbWFpbiwgbG9hZCBhbmQgdHJhbnNmb3JtIEpTT04gZGF0YSwgYW5kIGltcGxlbWVudCB0aGUgQm9va3MgQVBJLmApLG1keCgiaDMiLHsiaWQiOiJhZ2VuZGEifSxgQWdlbmRhYCksbWR4KCJwIixudWxsLGBJbiB0aGlzIGxlc3Nvbiwgc3R1ZGVudHMgd2lsbCBsZWFybjpgKSxtZHgoInVsIixudWxsLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBIb3cgdG8gbG9hZCBKU09OIGRhdGEgdXNpbmcgSmFja3NvbmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBIb3cgdG8gY3JlYXRlIGFuZCB3b3JrIHdpdGggc2Vjb25kYXJ5IGluZGV4ZXNgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgSG93IHRvIHVzZSB0aGUgcmVwb3NpdG9yaWVzIHdpdGggYSBSRVNUIGNvbnRyb2xsZXIKSWYgeW91IGdldCBzdHVjazpgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgVGhlIHByb2dyZXNzIG1hZGUgaW4gdGhpcyBsZXNzb24gaXMgYXZhaWxhYmxlIG9uIHRoZSByZWRpMnJlYWQgZ2l0aHViIHJlcG9zaXRvcnkgYXQgYCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJsaSJ9LHsiaHJlZiI6Imh0dHBzOi8vZ2l0aHViLmNvbS9yZWRpcy1kZXZlbG9wZXIvcmVkaTJyZWFkL3RyZWUvY291cnNlL21pbGVzdG9uZS01In0pLGBodHRwczovL2dpdGh1Yi5jb20vcmVkaXMtZGV2ZWxvcGVyL3JlZGkycmVhZC90cmVlL2NvdXJzZS9taWxlc3RvbmUtNWApKSksbWR4KCJoMyIseyJpZCI6ImJvb2tzLWNhdGVnb3JpZXMtYW5kLWJvb2stcmF0aW5ncyJ9LGBCb29rcywgQ2F0ZWdvcmllcywgYW5kIEJvb2sgUmF0aW5nc2ApLG1keCgicCIsbnVsbCxgVGhpcyBsZXNzb24gd2lsbCBzdGFydCBieSBmbGVzaGluZyBvdXQgdGhlIEJvb2ssIENhdGVnb3J5LCBhbmQgQm9va1JhdGluZyBtb2RlbHMgd2l0aCB0aGVpciByZXNwZWN0aXZlIFNwcmluZyBSZXBvc2l0b3JpZXMuYCksbWR4KCJwIixudWxsLG1keCgiaW1nIix7YWx0OiJCb29rcywgQ2F0ZWdvcmllcywgYW5kIEJvb2sgUmF0aW5ncyIsc3JjOnJlcXVpcmUoIiF1cmwtbG9hZGVyP2xpbWl0PTEwMDAwJm5hbWU9YXNzZXRzL2ltYWdlcy9bbmFtZV0tW2hhc2hdLltleHRdJmZhbGxiYWNrPWZpbGUtbG9hZGVyIS4vaW1hZ2VzL2Jvb2tzX2NhdGVnb3JpZXNfcmF0aW5ncy5wbmciKS5kZWZhdWx0fSkpLG1keCgiaDQiLHsiaWQiOiJ0aGUtY2F0ZWdvcnktbW9kZWwifSxgVGhlIENhdGVnb3J5IE1vZGVsYCksbWR4KCJwIixudWxsLGBXZeKAmWxsIHN0YXJ0IHdpdGggdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDYXRlZ29yeWApLGAuIEEgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYEJvb2tgKSxgIGJlbG9uZ3MgdG8gb25lIG9yIG1vcmUgY2F0ZWdvcmllcy4gVGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDYXRlZ29yeWApLGAgaGFzIGEgbmFtZSB0aGF0IHdlIHdpbGwgZGVyaXZlIGZyb20gdGhlIEpTT04gZGF0YQpmaWxlcyBpbiBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgc3JjL21haW4vcmVzb3VyY2VzL2RhdGEvYm9va3NgKSxgLiBBcyB3ZeKAmXZlIGRvbmUgcHJldmlvdXNseSwgd2Ugd2lsbCBtYXAgdGhlIGNsYXNzIHRvIGEgUmVkaXMgSGFzaC4KQWRkIHRoZSBmaWxlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBzcmMvbWFpbi9qYXZhL2NvbS9yZWRpc2xhYnMvZWR1L3JlZGkycmVhZC9tb2RlbHMvQ2F0ZWdvcnkuamF2YWApLGAgd2l0aCB0aGUgZm9sbG93aW5nIGNvbnRlbnRzOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtamF2YSJ9KSxgcGFja2FnZSBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQubW9kZWxzOwoKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5hbm5vdGF0aW9uLklkOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLnJlZGlzLmNvcmUuUmVkaXNIYXNoOwoKaW1wb3J0IGxvbWJvay5CdWlsZGVyOwppbXBvcnQgbG9tYm9rLkRhdGE7CgpARGF0YQpAQnVpbGRlcgpAUmVkaXNIYXNoCnB1YmxpYyBjbGFzcyBDYXRlZ29yeSB7CiAgQElkCiAgcHJpdmF0ZSBTdHJpbmcgaWQ7CiAgcHJpdmF0ZSBTdHJpbmcgbmFtZTsKfQpgKSksbWR4KCJoMyIseyJpZCI6InRoZS1jYXRlZ29yeS1yZXBvc2l0b3J5In0sYFRoZSBDYXRlZ29yeSBSZXBvc2l0b3J5YCksbWR4KCJwIixudWxsLGBUaGUgY29ycmVzcG9uZGluZyByZXBvc2l0b3J5IGV4dGVuZHMgU3ByaW5n4oCZcyBDcnVkUmVwb3NpdG9yeS4gQWRkIHRoZSBmaWxlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBzcmMvbWFpbi9qYXZhL2NvbS9yZWRpc2xhYnMvZWR1L3JlZGkycmVhZC9yZXBvc2l0b3JpZXMvQ2F0ZWdvcnlSZXBvc2l0b3J5LmphdmFgKSxgIHdpdGggdGhlIGZvbGxvd2luZyBjb250ZW50czpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSksYHBhY2thZ2UgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLnJlcG9zaXRvcmllczsKCmltcG9ydCBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQubW9kZWxzLkNhdGVnb3J5OwoKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5yZXBvc2l0b3J5LkNydWRSZXBvc2l0b3J5OwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLlJlcG9zaXRvcnk7CgpAUmVwb3NpdG9yeQpwdWJsaWMgaW50ZXJmYWNlIENhdGVnb3J5UmVwb3NpdG9yeSBleHRlbmRzIENydWRSZXBvc2l0b3J5PENhdGVnb3J5LCBTdHJpbmc+IHsKfQpgKSksbWR4KCJoMyIseyJpZCI6InRoZS1ib29rLW1vZGVsIn0sYFRoZSBCb29rIE1vZGVsYCksbWR4KCJwIixudWxsLGBUaGUgQm9vayBtb2RlbCBtYXBzIGRpcmVjdGx5IHRvIHRoZSBKU09OIHBheWxvYWQgaW4gdGhlICouanNvbiBmaWxlcyBpbiBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgc3JjL21haW4vcmVzb3VyY2VzL2RhdGEvYm9va3NgKSxgLgpGb3IgZXhhbXBsZSwgdGhlIEpTT04gb2JqZWN0IHNob3duIGJlbG93IGNhbWUgZnJvbSB0aGUgdGhlIGZpbGUgcmVkaXNfMC5qc29uOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtamF2YSJ9KSxgewogICAicGFnZUNvdW50IjogMjI4LAogICAidGh1bWJuYWlsIjogImh0dHA6Ly9ib29rcy5nb29nbGUuY29tL2Jvb2tzL2NvbnRlbnQ/aWQ9TnNzZUVBQUFRQkFKJnByaW50c2VjPWZyb250Y292ZXImaW1nPTEmem9vbT0xJmVkZ2U9Y3VybCZzb3VyY2U9Z2JzX2FwaSIsCiAgICJwcmljZSI6IDkuOTUsCiAgICJzdWJ0aXRsZSI6ICJFeHBsb3JlIFJlZGlzIC0gSXRzIEFyY2hpdGVjdHVyZSwgRGF0YSBTdHJ1Y3R1cmVzIGFuZCBNb2R1bGVzIGxpa2UgU2VhcmNoLCBKU09OLCBBSSwgR3JhcGgsIFRpbWVzZXJpZXMgKEVuZ2xpc2ggRWRpdGlvbikiLAogICAiZGVzY3JpcHRpb24iOiAiQ29tcGxldGUgcmVmZXJlbmNlIGd1aWRlIHRvIFJlZGlzIEtFWSBGRUFUVVJFUyDil48gQ29tcGxldGUgY292ZXJhZ2Ugb2YgUmVkaXMgTW9kdWxlcy4iLAogICAibGFuZ3VhZ2UiOiAiZW4iLAogICAiY3VycmVuY3kiOiAiVVNEIiwKICAgImlkIjogIjgxOTQ4Mzc3NjYiLAogICAidGl0bGUiOiAiUmVkaXMocikgRGVlcCBEaXZlIiwKICAgImluZm9MaW5rIjogImh0dHBzOi8vcGxheS5nb29nbGUuY29tL3N0b3JlL2Jvb2tzL2RldGFpbHM/aWQ9TnNzZUVBQUFRQkFKJnNvdXJjZT1nYnNfYXBpIiwKICAgImF1dGhvcnMiOiBbIlN1eW9nIERpbGlwIEthbGUiLCAiQ2hpbm1heSBLdWxrYXJuaSJdCiB9LAouLi4KfQpgKSksbWR4KCJwIixudWxsLGBUaGUgY2F0ZWdvcnkgbmFtZSBpcyBleHRyYWN0ZWQgZnJvbSB0aGUgZmlsZSBuYW1lIGFzICJyZWRpcyIuIFRoZSBzYW1lIGFwcGxpZXMgdG8gYW55IGJvb2sgZnJvbSB0aGUgZmlsZXM6IGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGByZWRpc18wLmpzb25gKSxgLCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgcmVkaXNfMS5qc29uYCksYCwgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHJlZGlzXzIuanNvbmApLGAsIGFuZCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgcmVkaXNfMy5qc29uYCksYC4KVGhlIEJvb2sgY2xhc3MgY29udGFpbnMgYSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgU2V0PENhdGVnb3J5PmApLGAgd2hpY2ggd2lsbCBmb3Igbm93IGNvbnRhaW4gdGhlIHNpbmdsZSBjYXRlZ29yeSBleHRyYWN0ZWQgZnJvbSB0aGUgZmlsZW5hbWUuIFRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgU2V0PFN0cmluZz5gKSxgIGZvciBhdXRob3JzIGdldHMgbWFwcGVkIGZyb20gdGhlICJhdXRob3JzIiBKU09OIGFycmF5IGluIHRoZSBwYXlsb2FkLgpBZGQgdGhlIGZpbGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNyYy9tYWluL2phdmEvY29tL3JlZGlzbGFicy9lZHUvcmVkaTJyZWFkL3JlcG9zaXRvcmllcy9Cb29rLmphdmFgKSxgIHdpdGggdGhlIGZvbGxvd2luZyBjb250ZW50czpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSksYHBhY2thZ2UgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVsczsKCmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CgppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLmFubm90YXRpb24uSWQ7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuYW5ub3RhdGlvbi5SZWZlcmVuY2U7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEucmVkaXMuY29yZS5SZWRpc0hhc2g7CgppbXBvcnQgbG9tYm9rLkRhdGE7CmltcG9ydCBsb21ib2suRXF1YWxzQW5kSGFzaENvZGU7CgpARGF0YQpARXF1YWxzQW5kSGFzaENvZGUob25seUV4cGxpY2l0bHlJbmNsdWRlZCA9IHRydWUpCkBSZWRpc0hhc2gKcHVibGljIGNsYXNzIEJvb2sgewoKICBASWQKICBARXF1YWxzQW5kSGFzaENvZGUuSW5jbHVkZQogIHByaXZhdGUgU3RyaW5nIGlkOwoKICBwcml2YXRlIFN0cmluZyB0aXRsZTsKICBwcml2YXRlIFN0cmluZyBzdWJ0aXRsZTsKICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjsKICBwcml2YXRlIFN0cmluZyBsYW5ndWFnZTsKICBwcml2YXRlIExvbmcgcGFnZUNvdW50OwogIHByaXZhdGUgU3RyaW5nIHRodW1ibmFpbDsKICBwcml2YXRlIERvdWJsZSBwcmljZTsKICBwcml2YXRlIFN0cmluZyBjdXJyZW5jeTsKICBwcml2YXRlIFN0cmluZyBpbmZvTGluazsKCiAgcHJpdmF0ZSBTZXQ8U3RyaW5nPiBhdXRob3JzOwoKICBAUmVmZXJlbmNlCiAgcHJpdmF0ZSBTZXQ8Q2F0ZWdvcnk+IGNhdGVnb3JpZXMgPSBuZXcgSGFzaFNldDxDYXRlZ29yeT4oKTsKCiAgcHVibGljIHZvaWQgYWRkQ2F0ZWdvcnkoQ2F0ZWdvcnkgY2F0ZWdvcnkpIHsKICAgIGNhdGVnb3JpZXMuYWRkKGNhdGVnb3J5KTsKICB9Cn0KYCkpLG1keCgiaDMiLHsiaWQiOiJ0aGUtYm9vay1yZXBvc2l0b3J5In0sYFRoZSBCb29rIFJlcG9zaXRvcnlgKSxtZHgoInAiLG51bGwsYEluIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQm9va1JlcG9zaXRvcnlgKSxgIHdlIGludHJvZHVjZSB0aGUgdXNhZ2Ugb2YgdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBQYWdpbmF0aW9uQW5kU29ydGluZ1JlcG9zaXRvcnlgKSxgLiBUaGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFBhZ2luYXRpb25BbmRTb3J0aW5nUmVwb3NpdG9yeWApLGAgZXh0ZW5kcyB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENydWRSZXBvc2l0b3J5YCksYCBpbnRlcmZhY2UKYW5kIGFkZHMgYWRkaXRpb25hbCBtZXRob2RzIHRvIGVhc2UgcGFnaW5hdGVkIGFjY2VzcyB0byBlbnRpdGllcy4KV2Ugd2lsbCBsZWFybiBtb3JlIGFib3V0IHRoZSB1c2FnZSBvZiB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFBhZ2luZ0FuZFNvcnRpbmdSZXBvc2l0b3J5YCksYCB3aGVuIHdlIGltcGxlbWVudCB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYEJvb2tDb250cm9sbGVyYCksYC4KQWRkIHRoZSBmaWxlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBzcmMvbWFpbi9qYXZhL2NvbS9yZWRpc2xhYnMvZWR1L3JlZGkycmVhZC9yZXBvc2l0b3JpZXMvQm9va1JlcG9zaXRvcnkuamF2YWApLGAgd2l0aCB0aGUgZm9sbG93aW5nIGNvbnRlbnRzOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtamF2YSJ9KSxgcGFja2FnZSBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQucmVwb3NpdG9yaWVzOwoKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5tb2RlbHMuQm9vazsKCmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEucmVwb3NpdG9yeS5QYWdpbmdBbmRTb3J0aW5nUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5SZXBvc2l0b3J5OwoKQFJlcG9zaXRvcnkKcHVibGljIGludGVyZmFjZSBCb29rUmVwb3NpdG9yeSBleHRlbmRzIFBhZ2luZ0FuZFNvcnRpbmdSZXBvc2l0b3J5PEJvb2ssIFN0cmluZz4gewp9CmApKSxtZHgoImg0Iix7ImlkIjoidGhlLWJvb2tyYXRpbmctbW9kZWwifSxgVGhlIEJvb2tSYXRpbmcgTW9kZWxgKSxtZHgoInAiLG51bGwsYFRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQm9va1JhdGluZ2ApLGAgbW9kZWwgcmVwcmVzZW50cyBhIHJhdGluZyBvZiBhIGJvb2sgYnkgYSB1c2VyLiBXZSBpbXBsZW1lbnQgYSB0cmFkaXRpb25hbCA1IHN0YXIgcmF0aW5nIHN5c3RlbSBhcyBhIG1hbnktdG8tbWFueSByZWxhdGlvbnNoaXAuClRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQm9va1JhdGluZ2ApLGAgbW9kZWwgcGxheXMgYSByb2xlIGVxdWl2YWxlbnQgdG8gdGhhdCBvZiBhIGpvaW5pbmcgdGFibGUgb3IgYnJpZGdpbmcgdGFibGUgaW4gYSByZWxhdGlvbmFsIG1vZGVsLgpgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQm9va1JhdGluZ2ApLGAgc2l0cyBiZXR3ZWVuIHRoZSB0d28gb3RoZXIgZW50aXRpZXMgb2YgYSBtYW55LXRvLW1hbnkgcmVsYXRpb25zaGlwLiBJdHMgcHVycG9zZSBpcyB0byBzdG9yZSBhIHJlY29yZCBmb3IgZWFjaCBvZiB0aGUgY29tYmluYXRpb25zCm9mIHRoZXNlIG90aGVyIHR3byBlbnRpdGllcyAoQm9vayBhbmQgVXNlcikuCldlIGtlZXAgdGhlIGxpbmtzIHRvIHRoZSBCb29rIGFuZCBVc2VyIG1vZGVscyB1c2luZyB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYEBSZWZlcmVuY2VgKSxgIGFubm90YXRpb24gKHRoZSBlcXVpdmFsZW50IG9mIGhhdmluZyBmb3JlaWduIGtleXMgaW4gYSByZWxhdGlvbmFsIGRhdGFiYXNlKQpBZGQgdGhlIGZpbGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNyYy9tYWluL2phdmEvY29tL3JlZGlzbGFicy9lZHUvcmVkaTJyZWFkL21vZGVscy9Cb29rUmF0aW5nLmphdmFgKSxgIHdpdGggdGhlIGZvbGxvd2luZyBjb250ZW50czpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSksYHBhY2thZ2UgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVsczsKCmltcG9ydCBqYXZheC52YWxpZGF0aW9uLmNvbnN0cmFpbnRzLk5vdE51bGw7CgppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLmFubm90YXRpb24uSWQ7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuYW5ub3RhdGlvbi5SZWZlcmVuY2U7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEucmVkaXMuY29yZS5SZWRpc0hhc2g7CgppbXBvcnQgbG9tYm9rLkJ1aWxkZXI7CmltcG9ydCBsb21ib2suRGF0YTsKCkBEYXRhCkBCdWlsZGVyCkBSZWRpc0hhc2gKcHVibGljIGNsYXNzIEJvb2tSYXRpbmcgewogIEBJZAogIHByaXZhdGUgU3RyaW5nIGlkOwoKICBATm90TnVsbAogIEBSZWZlcmVuY2UKICBwcml2YXRlIFVzZXIgdXNlcjsKCiAgQE5vdE51bGwKICBAUmVmZXJlbmNlCiAgcHJpdmF0ZSBCb29rIGJvb2s7CgogIEBOb3ROdWxsCiAgcHJpdmF0ZSBJbnRlZ2VyIHJhdGluZzsKfQpgKSksbWR4KCJoMyIseyJpZCI6InRoZS1ib29rLXJhdGluZy1yZXBvc2l0b3J5In0sYFRoZSBCb29rIFJhdGluZyBSZXBvc2l0b3J5YCksbWR4KCJwIixudWxsLGBUaGUgY29ycmVzcG9uZGluZyBSZXBvc2l0b3J5IHNpbXBseSBleHRlbmRzIFNwcmluZ+KAmXMgQ3J1ZFJlcG9zaXRvcnkuIEFkZCB0aGUgZmlsZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgc3JjL21haW4vamF2YS9jb20vcmVkaXNsYWJzL2VkdS9yZWRpMnJlYWQvcmVwb3NpdG9yaWVzL0Jvb2tSYXRpbmdSZXBvc2l0b3J5LmphdmFgKSxgIHdpdGggdGhlIGZvbGxvd2luZyBjb250ZW50czpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLWphdmEifSksYHBhY2thZ2UgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLnJlcG9zaXRvcmllczsKCmltcG9ydCBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQubW9kZWxzLkJvb2tSYXRpbmc7CgppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLnJlcG9zaXRvcnkuQ3J1ZFJlcG9zaXRvcnk7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnN0ZXJlb3R5cGUuUmVwb3NpdG9yeTsKCkBSZXBvc2l0b3J5CnB1YmxpYyBpbnRlcmZhY2UgQm9va1JhdGluZ1JlcG9zaXRvcnkgZXh0ZW5kcyBDcnVkUmVwb3NpdG9yeTxCb29rUmF0aW5nLCBTdHJpbmc+IHsKfQpgKSksbWR4KCJoMyIseyJpZCI6ImxvYWRpbmctYm9va3MifSxgTG9hZGluZyBCb29rc2ApLG1keCgicCIsbnVsbCxgTm93IHRoYXQgd2UgaGF2ZSBvdXIgbW9kZWxzIGFuZCByZXBvc2l0b3JpZXMgZGVmaW5lZCwgbGV04oCZcyBsb2FkIHRoZSBib29rcyBmcm9tIHRoZSBwcm92aWRlZCBKU09OIGRhdGEgaW4gdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBzcmMvbWFpbi9yZXNvdXJjZXMvZGF0YS9ib29rc2ApLGAgZGlyZWN0b3J5LgpXZeKAmWxsIGNyZWF0ZSBhIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDb21tYW5kTGluZVJ1bm5lcmApLGAgdG8gaXRlcmF0ZSBvdmVyIGV2ZXJ5IC5qc29uIGZpbGUgaW4gdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBkYXRhL2Jvb2tzYCksYCBkaXJlY3RvcnkuICBXZSB3aWxsIG1hcCB0aGUgY29udGVudCBvZiBlYWNoIGZpbGUgdG8gYSBCb29rIG9iamVjdCB1c2luZyBKYWNrc29uLgpXZSdsbCBjcmVhdGUgYSBjYXRlZ29yeSB1c2luZyB0aGUgY2hhcmFjdGVycyBpbiB0aGUgZmlsZW5hbWUgdXAgdG8gdGhlIGxhc3QgdW5kZXJzY29yZS4gSWYgdGhlcmUgaXMgbm8gY2F0ZWdvcnkgd2l0aCB0aGF0IG5hbWUgYWxyZWFkeSwgd2Ugd2lsbCBjcmVhdGUgb25lLgpUaGUgY2F0ZWdvcnkgaXMgdGhlbiBhZGRlZCB0byB0aGUgc2V0IG9mIGNhdGVnb3JpZXMgZm9yIHRoZSBib29rLgpBZGQgdGhlIGZpbGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNyYy9tYWluL2phdmEvY29tL3JlZGlzbGFicy9lZHUvcmVkaTJyZWFkL2Jvb3QvQ3JlYXRlQm9va3MuamF2YWApLGAgd2l0aCB0aGUgZm9sbG93aW5nIGNvbnRlbnRzOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtamF2YSJ9KSxgcGFja2FnZSBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQuYm9vdDsKCmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLkZpbGVJbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOwppbXBvcnQgamF2YS5uaW8uZmlsZS5GaWxlczsKaW1wb3J0IGphdmEubmlvLmZpbGUuUGF0aHM7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5zdHJlYW0uQ29sbGVjdG9yczsKCmltcG9ydCBjb20uZmFzdGVyeG1sLmphY2tzb24uY29yZS50eXBlLlR5cGVSZWZlcmVuY2U7CmltcG9ydCBjb20uZmFzdGVyeG1sLmphY2tzb24uZGF0YWJpbmQuT2JqZWN0TWFwcGVyOwppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVscy5Cb29rOwppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVscy5DYXRlZ29yeTsKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5yZXBvc2l0b3JpZXMuQm9va1JlcG9zaXRvcnk7CmltcG9ydCBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQucmVwb3NpdG9yaWVzLkNhdGVnb3J5UmVwb3NpdG9yeTsKCmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5BdXRvd2lyZWQ7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJvb3QuQ29tbWFuZExpbmVSdW5uZXI7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmNvcmUuYW5ub3RhdGlvbi5PcmRlcjsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5Db21wb25lbnQ7CgppbXBvcnQgbG9tYm9rLmV4dGVybi5zbGY0ai5TbGY0ajsKCkBDb21wb25lbnQKQE9yZGVyKDMpCkBTbGY0agpwdWJsaWMgY2xhc3MgQ3JlYXRlQm9va3MgaW1wbGVtZW50cyBDb21tYW5kTGluZVJ1bm5lciB7CiAgQEF1dG93aXJlZAogIHByaXZhdGUgQm9va1JlcG9zaXRvcnkgYm9va1JlcG9zaXRvcnk7CgogIEBBdXRvd2lyZWQKICBwcml2YXRlIENhdGVnb3J5UmVwb3NpdG9yeSBjYXRlZ29yeVJlcG9zaXRvcnk7CgogIEBPdmVycmlkZQogIHB1YmxpYyB2b2lkIHJ1bihTdHJpbmcuLi4gYXJncykgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICBpZiAoYm9va1JlcG9zaXRvcnkuY291bnQoKSA9PSAwKSB7CiAgICBPYmplY3RNYXBwZXIgbWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpOwogICAgVHlwZVJlZmVyZW5jZTxMaXN0PEJvb2s+PiB0eXBlUmVmZXJlbmNlID0gbmV3IFR5cGVSZWZlcmVuY2U8TGlzdDxCb29rPj4oKSB7CiAgICB9OwoKICAgIExpc3Q8RmlsZT4gZmlsZXMgPSAvLwogICAgICAgIEZpbGVzLmxpc3QoUGF0aHMuZ2V0KGdldENsYXNzKCkuZ2V0UmVzb3VyY2UoIi9kYXRhL2Jvb2tzIikudG9VUkkoKSkpIC8vCiAgICAgICAgICAgIC5maWx0ZXIoRmlsZXM6OmlzUmVndWxhckZpbGUpIC8vCiAgICAgICAgICAgIC5maWx0ZXIocGF0aCAtPiBwYXRoLnRvU3RyaW5nKCkuZW5kc1dpdGgoIi5qc29uIikpIC8vCiAgICAgICAgICAgIC5tYXAoamF2YS5uaW8uZmlsZS5QYXRoOjp0b0ZpbGUpIC8vCiAgICAgICAgICAgIC5jb2xsZWN0KENvbGxlY3RvcnMudG9MaXN0KCkpOwoKICAgIE1hcDxTdHJpbmcsIENhdGVnb3J5PiBjYXRlZ29yaWVzID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBDYXRlZ29yeT4oKTsKCiAgICBmaWxlcy5mb3JFYWNoKGZpbGUgLT4gewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbG9nLmluZm8oIj4+Pj4gUHJvY2Vzc2luZyBCb29rIEZpbGU6ICIgKyBmaWxlLmdldFBhdGgoKSk7CiAgICAgICAgICAgIFN0cmluZyBjYXRlZ29yeU5hbWUgPSBmaWxlLmdldE5hbWUoKS5zdWJzdHJpbmcoMCwgZmlsZS5nZXROYW1lKCkubGFzdEluZGV4T2YoIl8iKSk7CiAgICAgICAgICAgIGxvZy5pbmZvKCI+Pj4+IENhdGVnb3J5OiAiICsgY2F0ZWdvcnlOYW1lKTsKCiAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5OwogICAgICAgICAgICBpZiAoIWNhdGVnb3JpZXMuY29udGFpbnNLZXkoY2F0ZWdvcnlOYW1lKSkgewogICAgICAgICAgICBjYXRlZ29yeSA9IENhdGVnb3J5LmJ1aWxkZXIoKS5uYW1lKGNhdGVnb3J5TmFtZSkuYnVpbGQoKTsKICAgICAgICAgICAgY2F0ZWdvcnlSZXBvc2l0b3J5LnNhdmUoY2F0ZWdvcnkpOwogICAgICAgICAgICBjYXRlZ29yaWVzLnB1dChjYXRlZ29yeU5hbWUsIGNhdGVnb3J5KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2F0ZWdvcnkgPSBjYXRlZ29yaWVzLmdldChjYXRlZ29yeU5hbWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBJbnB1dFN0cmVhbSBpbnB1dFN0cmVhbSA9IG5ldyBGaWxlSW5wdXRTdHJlYW0oZmlsZSk7CiAgICAgICAgICAgIExpc3Q8Qm9vaz4gYm9va3MgPSBtYXBwZXIucmVhZFZhbHVlKGlucHV0U3RyZWFtLCB0eXBlUmVmZXJlbmNlKTsKICAgICAgICAgICAgYm9va3Muc3RyZWFtKCkuZm9yRWFjaCgoYm9vaykgLT4gewogICAgICAgICAgICBib29rLmFkZENhdGVnb3J5KGNhdGVnb3J5KTsKICAgICAgICAgICAgYm9va1JlcG9zaXRvcnkuc2F2ZShib29rKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGxvZy5pbmZvKCI+Pj4+ICIgKyBib29rcy5zaXplKCkgKyAiIEJvb2tzIFNhdmVkISIpOwogICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkgewogICAgICAgICAgICBsb2cuaW5mbygiVW5hYmxlIHRvIGltcG9ydCBib29rczogIiArIGUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgIH0KICAgIH0pOwoKICAgIGxvZy5pbmZvKCI+Pj4+IExvYWRlZCBCb29rIERhdGEgYW5kIENyZWF0ZWQgYm9va3MuLi4iKTsKICAgIH0KICB9Cn0KYCkpLG1keCgicCIsbnVsbCxgVGhlcmUncyBhIGxvdCB0byB1bnBhY2sgaGVyZSwgc28gbGV04oCZcyB0YWtlIGl0IGZyb20gdGhlIHRvcDpgKSxtZHgoInVsIixudWxsLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBBcyBkb25lIHByZXZpb3VzbHksIHdlIG9ubHkgZXhlY3V0ZSBpZiB0aGVyZSBhcmUgbm8gYm9va3MgaW4gdGhlIHJlcG9zaXRvcnkuYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYFdlIHVzZSBKYWNrc29uIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToibGkifSxgT2JqZWN0TWFwcGVyYCksYCBhbmQgYSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYFR5cGVSZWZlcmVuY2UgYCksYHRvIHBlcmZvcm0gdGhlIG1hcHBpbmcuYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYFdlIGNvbGxlY3QgdGhlIHBhdGhzIG9mIGFsbCB0aGUgZmlsZXMgd2l0aCB0aGUgLmpzb24gZXh0ZW5zaW9uIGluIHRoZSB0YXJnZXQgZGlyZWN0b3J5LmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBXZSBjcmVhdGUgYSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYE1hcGApLGAgb2YgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJsaSJ9LGBTdHJpbmdgKSxgcyB0byBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYENhdGVnb3J5IGApLGBvYmplY3RzIHRvIGNvbGxlY3QgdGhlIGNhdGVnb3JpZXMgYXMgd2UgcHJvY2Vzcwp0aGUgZmlsZXMgYW5kIHF1aWNrbHkgZGV0ZXJtaW5lIHdoZXRoZXIgd2UgaGF2ZSBhbHJlYWR5IGNyZWF0ZWQgYSBjYXRlZ29yeS5gKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgRm9yIGVhY2ggYm9vaywgd2UgYXNzaWduIHRoZSBjYXRlZ29yeSBhbmQgc2F2ZSBpdCB0byBSZWRpcy5gKSksbWR4KCJoMyIseyJpZCI6ImJvb2stY29udHJvbGxlciJ9LGBCb29rIENvbnRyb2xsZXJgKSxtZHgoInAiLG51bGwsYE5vdyB3ZSBjYW4gaW1wbGVtZW50IHRoZSBpbml0aWFsIHZlcnNpb24gb2YgdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBCb29rQ29udHJvbGxlcmApLGA6IG91ciBCb29rc3RvcmUgQ2F0YWxvZyBBUEkuIFRoaXMgZmlyc3QgdmVyc2lvbiBvZiB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYEJvb2tDb250cm9sbGVyYCksYAp3aWxsIGhhdmUgdGhyZWUgZW5kcG9pbnRzOmApLG1keCgidWwiLG51bGwsbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYEdldCBhbGwgYm9va3NgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgR2V0IGEgYm9vayBieSBJU0JOIChpZClgKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgR2V0IGFsbCBjYXRlZ29yaWVzCkFkZCB0aGUgZmlsZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYHNyYy9tYWluL2phdmEvY29tL3JlZGlzbGFicy9lZHUvcmVkaTJyZWFkL2NvbnRyb2xsZXJzL0Jvb2tDb250cm9sbGVyLmphdmFgKSxgIHdpdGggdGhlIGZvbGxvd2luZyBjb250ZW50czpgKSksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1qYXZhIn0pLGBwYWNrYWdlIGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5jb250cm9sbGVyczsKCmltcG9ydCBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQubW9kZWxzLkJvb2s7CmltcG9ydCBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQubW9kZWxzLkNhdGVnb3J5OwppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLnJlcG9zaXRvcmllcy5Cb29rUmVwb3NpdG9yeTsKaW1wb3J0IGNvbS5yZWRpc2xhYnMuZWR1LnJlZGkycmVhZC5yZXBvc2l0b3JpZXMuQ2F0ZWdvcnlSZXBvc2l0b3J5OwoKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5HZXRNYXBwaW5nOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLlBhdGhWYXJpYWJsZTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5SZXF1ZXN0TWFwcGluZzsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5SZXN0Q29udHJvbGxlcjsKCkBSZXN0Q29udHJvbGxlcgpAUmVxdWVzdE1hcHBpbmcoIi9hcGkvYm9va3MiKQpwdWJsaWMgY2xhc3MgQm9va0NvbnRyb2xsZXIgewogIEBBdXRvd2lyZWQKICBwcml2YXRlIEJvb2tSZXBvc2l0b3J5IGJvb2tSZXBvc2l0b3J5OwoKICBAQXV0b3dpcmVkCiAgcHJpdmF0ZSBDYXRlZ29yeVJlcG9zaXRvcnkgY2F0ZWdvcnlSZXBvc2l0b3J5OwoKICBAR2V0TWFwcGluZwogIHB1YmxpYyBJdGVyYWJsZTxCb29rPiBhbGwoKSB7CiAgICByZXR1cm4gYm9va1JlcG9zaXRvcnkuZmluZEFsbCgpOwogIH0KCiAgQEdldE1hcHBpbmcoIi9jYXRlZ29yaWVzIikKICBwdWJsaWMgSXRlcmFibGU8Q2F0ZWdvcnk+IGdldENhdGVnb3JpZXMoKSB7CiAgICByZXR1cm4gY2F0ZWdvcnlSZXBvc2l0b3J5LmZpbmRBbGwoKTsKICB9CgogIEBHZXRNYXBwaW5nKCIve2lzYm59IikKICBwdWJsaWMgQm9vayBnZXQoQFBhdGhWYXJpYWJsZSgiaXNibiIpIFN0cmluZyBpc2JuKSB7CiAgICByZXR1cm4gYm9va1JlcG9zaXRvcnkuZmluZEJ5SWQoaXNibikuZ2V0KCk7CiAgfQp9CmApKSxtZHgoImgzIix7ImlkIjoiZ2V0LWFsbC1ib29rcyJ9LGBHZXQgYWxsIEJvb2tzYCksbWR4KCJwIixudWxsLGBUbyBnZXQgYWxsIGJvb2tzLCB3ZSBpc3N1ZSBhIEdFVCByZXF1ZXN0IHRvIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL2Jvb2tzL2ApLGAuIFRoaXMgZW5kcG9pbnQgaXMgaW1wbGVtZW50ZWQgaW4gdGhlIGFsbCBtZXRob2QsIHdoaWNoIGNhbGxzIHRoZSBCb29rUmVwb3NpdG9yeSBmaW5kQWxsIG1ldGhvZC4gVXNpbmcgY3VybDpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLWJhc2gifSksYGN1cmwgLS1sb2NhdGlvbiAtLXJlcXVlc3QgR0VUICdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL2Jvb2tzLycKYCkpLG1keCgicCIsbnVsbCxgVGhlIHJlc3VsdCBpcyBhbiBhcnJheSBvZiBKU09OIG9iamVjdHMgY29udGFpbmluZyB0aGUgYm9va3M6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1qc29uIn0pLGBbCiAgICB7CiAgICAgICAgImlkIjogIjE3ODM5ODAxMTciLAogICAgICAgICJ0aXRsZSI6ICJSRVNUZnVsIEphdmEgV2ViIFNlcnZpY2VzIFNlY3VyaXR5IiwKICAgICAgICAic3VidGl0bGUiOiBudWxsLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJBIHNlcXVlbnRpYWwgYW5kIGVhc3ktdG8tZm9sbG93IGd1aWRlIHdoaWNoIGFsbG93cyB5b3UgdG8gdW5kZXJzdGFuZCB0aGUgY29uY2VwdHMgcmVsYXRlZCB0byBzZWN1cmluZyB3ZWIgYXBwcy9zZXJ2aWNlcyBxdWlja2x5IGFuZCBlZmZpY2llbnRseSwgc2luY2UgZWFjaCB0b3BpYyBpcyBleHBsYWluZWQgYW5kIGRlc2NyaWJlZCB3aXRoIHRoZSBoZWxwIG9mIGFuIGV4YW1wbGUgYW5kIGluIGEgc3RlcC1ieS1zdGVwIG1hbm5lciwgaGVscGluZyB5b3UgdG8gZWFzaWx5IGltcGxlbWVudCB0aGUgZXhhbXBsZXMgaW4geW91ciBvd24gcHJvamVjdHMuIFRoaXMgYm9vayBpcyBpbnRlbmRlZCBmb3Igd2ViIGFwcGxpY2F0aW9uIGRldmVsb3BlcnMgd2hvIHVzZSBSRVNUZnVsIHdlYiBzZXJ2aWNlcyB0byBwb3dlciB0aGVpciB3ZWJzaXRlcy4gUHJpb3Iga25vd2xlZGdlIG9mIFJFU1RmdWwgaXMgbm90IG1hbmRhdG9yeSwgYnV0IHdvdWxkIGJlIGFkdmlzYWJsZS4iLAogICAgICAgICJsYW5ndWFnZSI6ICJlbiIsCiAgICAgICAgInBhZ2VDb3VudCI6IDE0NCwKICAgICAgICAidGh1bWJuYWlsIjogImh0dHA6Ly9ib29rcy5nb29nbGUuY29tL2Jvb2tzL2NvbnRlbnQ/aWQ9RGg4WkJBQUFRQkFKJnByaW50c2VjPWZyb250Y292ZXImaW1nPTEmem9vbT0xJmVkZ2U9Y3VybCZzb3VyY2U9Z2JzX2FwaSIsCiAgICAgICAgInByaWNlIjogMTEuOTksCiAgICAgICAgImN1cnJlbmN5IjogIlVTRCIsCiAgICAgICAgImluZm9MaW5rIjogImh0dHBzOi8vcGxheS5nb29nbGUuY29tL3N0b3JlL2Jvb2tzL2RldGFpbHM/aWQ9RGg4WkJBQUFRQkFKJnNvdXJjZT1nYnNfYXBpIiwKICAgICAgICAiYXV0aG9ycyI6IFsKICAgICAgICAgICAgIkFuZHLDqXMgU2FsYXphciBDLiIsCiAgICAgICAgICAgICJSZW7DqSBFbnLDrXF1ZXoiCiAgICAgICAgXSwKICAgICAgICAiY2F0ZWdvcmllcyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgImlkIjogImYyYWRhMWUyLTdjMTgtNGQ5MC1iZmU3LWUzMjFiNjUwYzBhMyIsCiAgICAgICAgICAgICAgICAibmFtZSI6ICJyZWRpcyIKICAgICAgICAgICAgfQogICAgICAgIF0KICAgIH0sCi4uLgpdCmApKSxtZHgoImgzIix7ImlkIjoiZ2V0LWEtYm9vay1ieS1pc2JuIn0sYEdldCBhIGJvb2sgYnkgSVNCTmApLG1keCgicCIsbnVsbCxgVG8gZ2V0IGEgc3BlY2lmaWMgYm9vaywgd2UgaXNzdWUgYSBHRVQgcmVxdWVzdCB0byBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9ib29rcy97aXNibn1gKSxgLiBUaGlzIGVuZHBvaW50IGlzIGltcGxlbWVudGVkIGluIHRoZSBnZXQgbWV0aG9kLCB3aGljaCBjYWxscyB0aGUgQm9va1JlcG9zaXRvcnkgZmluZEJ5SWQgbWV0aG9kLiBVc2luZyBjdXJsOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtYmFzaCJ9KSxgY3VybCAtLWxvY2F0aW9uIC0tcmVxdWVzdCBHRVQgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvYm9va3MvMTY4MDUwMzU0NScKYCkpLG1keCgicCIsbnVsbCxgVGhlIHJlc3VsdCBpcyBhIEpTT04gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGJvb2s6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1qc29uIn0pLGB7CiAgICAiaWQiOiAiMTY4MDUwMzU0NSIsCiAgICAidGl0bGUiOiAiRnVuY3Rpb25hbCBQcm9ncmFtbWluZyBpbiBKYXZhIiwKICAgICJzdWJ0aXRsZSI6ICJIYXJuZXNzaW5nIHRoZSBQb3dlciBPZiBKYXZhIDggTGFtYmRhIEV4cHJlc3Npb25zIiwKICAgICJkZXNjcmlwdGlvbiI6ICJJbnRlcm1lZGlhdGUgbGV2ZWwsIGZvciBwcm9ncmFtbWVycyBmYWlybHkgZmFtaWxpYXIgd2l0aCBKYXZhLCBidXQgbmV3IHRvIHRoZSBmdW5jdGlvbmFsIHN0eWxlIG9mIHByb2dyYW1taW5nIGFuZCBsYW1iZGEgZXhwcmVzc2lvbnMuIEdldCByZWFkeSB0byBwcm9ncmFtIGluIGEgd2hvbGUgbmV3IHdheS4gLi4uIiwKICAgICJsYW5ndWFnZSI6ICJlbiIsCiAgICAicGFnZUNvdW50IjogMTk2LAogICAgInRodW1ibmFpbCI6ICJodHRwOi8vYm9va3MuZ29vZ2xlLmNvbS9ib29rcy9jb250ZW50P2lkPV9nNVFEd0FBUUJBSiZwcmludHNlYz1mcm9udGNvdmVyJmltZz0xJnpvb209MSZlZGdlPWN1cmwmc291cmNlPWdic19hcGkiLAogICAgInByaWNlIjogMjguOTksCiAgICAiY3VycmVuY3kiOiAiVVNEIiwKICAgICJpbmZvTGluayI6ICJodHRwczovL3BsYXkuZ29vZ2xlLmNvbS9zdG9yZS9ib29rcy9kZXRhaWxzP2lkPV9nNVFEd0FBUUJBSiZzb3VyY2U9Z2JzX2FwaSIsCiAgICAiYXV0aG9ycyI6IFsKICAgICAgICAiVmVua2F0IFN1YnJhbWFuaWFtIgogICAgXSwKICAgICJjYXRlZ29yaWVzIjogWwogICAgICAgIHsKICAgICAgICAgICAgImlkIjogIjlkNWMwMjVlLWJmMzgtNGI1MC1hOTcxLTE3ZTBiNzQwODM4NSIsCiAgICAgICAgICAgICJuYW1lIjogImphdmEiCiAgICAgICAgfQogICAgXQp9CmApKSxtZHgoImgzIix7ImlkIjoiZ2V0LWFsbC1jYXRlZ29yaWVzIn0sYEdldCBhbGwgQ2F0ZWdvcmllc2ApLG1keCgicCIsbnVsbCxgVG8gZ2V0IGFsbCBjYXRlZ29yaWVzLCB3ZSBpc3N1ZSBhIEdFVCByZXF1ZXN0IHRvIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL2Jvb2tzL2NhdGVnb3JpZXNgKSxgLiBJdOKAmXMgaW1wbGVtZW50ZWQgaW4gdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBnZXRDYXRlZ29yaWVzYCksYCBtZXRob2QsIHdoaWNoIGNhbGxzIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ2F0ZWdvcmllc1JlcG9zaXRvcnlgKSxgIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBmaW5kQWxsYCksYCBtZXRob2QuIFVzaW5nIGN1cmw6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1iYXNoIn0pLGBjdXJsIC0tbG9jYXRpb24gLS1yZXF1ZXN0IEdFVCAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9ib29rcy9jYXRlZ29yaWVzJwpgKSksbWR4KCJwIixudWxsLGBUaGUgcmVzdWx0IGlzIGFuIGFycmF5IG9mIEpTT04gb2JqZWN0cyBjb250YWluaW5nIHRoZSBjYXRlZ29yaWVzOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtanNvbiJ9KSxgWwogICAgewogICAgICAgICJpZCI6ICIyZmQ5MTZmZS03ZmY4LTQ0YzctOWY4Ni1jYTM4ODU2NTI1NmMiLAogICAgICAgICJuYW1lIjogIm1vbmdvZGIiCiAgICB9LAogICAgewogICAgICAgICJpZCI6ICI5NjE1YTEzNS03NDcyLTQ4ZmMtYjhhYy1hNTUxNmEyYzhiMjIiLAogICAgICAgICJuYW1lIjogImR5bmFtb2RiIgogICAgfSwKICAgIHsKICAgICAgICAiaWQiOiAiZjJhZGExZTItN2MxOC00ZDkwLWJmZTctZTMyMWI2NTBjMGEzIiwKICAgICAgICAibmFtZSI6ICJyZWRpcyIKICAgIH0sCiAgICB7CiAgICAgICAgImlkIjogIjA4ZmM4MTQ4LWQ5MjQtNGQyZS1hZjdlLWY1ZmU2ZjI4NjFmMCIsCiAgICAgICAgIm5hbWUiOiAiZWxpeGlyIgogICAgfSwKICAgIHsKICAgICAgICAiaWQiOiAiYjZhMGI1N2ItZWJiOC00ZDk4LTkzNTItODIzNjI1NmRiYzI3IiwKICAgICAgICAibmFtZSI6ICJtaWNyb3NlcnZpY2VzIgogICAgfSwKICAgIHsKICAgICAgICAiaWQiOiAiNzgyMWZkNmEtZWM5NC00YWM2LTgwODktYTQ4MGE3YzdmMmVlIiwKICAgICAgICAibmFtZSI6ICJlbGFzdGljX3NlYXJjaCIKICAgIH0sCiAgICB7CiAgICAgICAgImlkIjogImYyYmUxYmMzLTE3MDAtNDVmNS1hMzAwLTJjNGNmMmY5MDU4MyIsCiAgICAgICAgIm5hbWUiOiAiaGJhc2UiCiAgICB9LAogICAgewogICAgICAgICJpZCI6ICIzMWM4ZWE2NC1jYWQyLTQwZDktYjBmNi0zMGI4ZWE2ZmNiZmIiLAogICAgICAgICJuYW1lIjogInJlYWN0anMiCiAgICB9LAogICAgewogICAgICAgICJpZCI6ICI1ZTUyN2FmNy05M2ExLTRjMDAtOGYyMC1mODllODlhMjEzZTgiLAogICAgICAgICJuYW1lIjogImFwYWNoZV9zcGFyayIKICAgIH0sCiAgICB7CiAgICAgICAgImlkIjogIjlkNWMwMjVlLWJmMzgtNGI1MC1hOTcxLTE3ZTBiNzQwODM4NSIsCiAgICAgICAgIm5hbWUiOiAiamF2YSIKICAgIH0sCiAgICB7CiAgICAgICAgImlkIjogImJjYjJhMDFjLTliMGEtNDg0Ni1iMWJlLTY3MDE2OGI1ZDc2OCIsCiAgICAgICAgIm5hbWUiOiAiY2xvanVyZSIKICAgIH0sCiAgICB7CiAgICAgICAgImlkIjogImFiYTUzYmI5LTdjZmEtNGI2NS04OTAwLThjN2U4NTczMTFjNiIsCiAgICAgICAgIm5hbWUiOiAiY291Y2hiYXNlIgogICAgfSwKICAgIHsKICAgICAgICAiaWQiOiAiYmQxYjI4NzctMTU2NC00ZGVmLWIzZjctMTg4NzExNjVmZjEwIiwKICAgICAgICAibmFtZSI6ICJyaWFrIgogICAgfSwKICAgIHsKICAgICAgICAiaWQiOiAiNDdkOWE3NjktYmJjMi00MDY4LWIyN2YtMmI4MDBiZWMxNTY1IiwKICAgICAgICAibmFtZSI6ICJrb3RsaW4iCiAgICB9LAogICAgewogICAgICAgICJpZCI6ICI0MDBjOGY1YS05NTNiLTRiOGItYjIxZC0wNDU1MzVkODA4NGQiLAogICAgICAgICJuYW1lIjogIm5vc3FsX2JpZ19kYXRhIgogICAgfSwKICAgIHsKICAgICAgICAiaWQiOiAiMDZiYzI1ZmYtZjJhYi00ODFiLWE0ZDktODE5NTUyZGVhMGUwIiwKICAgICAgICAibmFtZSI6ICJqYXZhc2NyaXB0IgogICAgfQpdCmApKSxtZHgoImgzIix7ImlkIjoiZ2VuZXJhdGUtYm9vay1yYXRpbmdzIn0sYEdlbmVyYXRlIEJvb2sgUmF0aW5nc2ApLG1keCgicCIsbnVsbCxgTmV4dCwgd2Ugd2lsbCBjcmVhdGUgYSByYW5kb20gc2V0IG9mIGJvb2sgcmF0aW5ncy4gTGF0ZXIgaW4gdGhlIGNvdXJzZSwgd2XigJlsbCB1c2UgdGhlc2UgZm9yIGFuIGV4YW1wbGUuIEZvbGxvd2luZyB0aGUgc2FtZSByZWNpcGUgd2UgdXNlZCB0byBzZWVkIFJlZGlzIHdpdGggYSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ29tbWFuZExpbmVSdW5uZXJgKSxgLCBhZGQgdGhlIGZpbGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNyYy9tYWluL2phdmEvY29tL3JlZGlzbGFicy9lZHUvcmVkaTJyZWFkL2Jvb3QvQ3JlYXRlQm9va1JhdGluZ3MuamF2YWApLGAgd2l0aCB0aGUgZm9sbG93aW5nIGNvbnRlbnRzOmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtamF2YSJ9KSxgcGFja2FnZSBjb20ucmVkaXNsYWJzLmVkdS5yZWRpMnJlYWQuYm9vdDsKCmltcG9ydCBqYXZhLnV0aWwuUmFuZG9tOwppbXBvcnQgamF2YS51dGlsLnN0cmVhbS5JbnRTdHJlYW07CgppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVscy5Cb29rOwppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVscy5Cb29rUmF0aW5nOwppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLm1vZGVscy5Vc2VyOwppbXBvcnQgY29tLnJlZGlzbGFicy5lZHUucmVkaTJyZWFkLnJlcG9zaXRvcmllcy5Cb29rUmF0aW5nUmVwb3NpdG9yeTsKCmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5BdXRvd2lyZWQ7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5WYWx1ZTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYm9vdC5Db21tYW5kTGluZVJ1bm5lcjsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuY29yZS5hbm5vdGF0aW9uLk9yZGVyOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLnJlZGlzLmNvcmUuUmVkaXNUZW1wbGF0ZTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5Db21wb25lbnQ7CgppbXBvcnQgbG9tYm9rLmV4dGVybi5zbGY0ai5TbGY0ajsKCkBDb21wb25lbnQKQE9yZGVyKDQpCkBTbGY0agpwdWJsaWMgY2xhc3MgQ3JlYXRlQm9va1JhdGluZ3MgaW1wbGVtZW50cyBDb21tYW5kTGluZVJ1bm5lciB7CgogIEBWYWx1ZSgiXCR7YXBwLm51bWJlck9mUmF0aW5nc30iKQogIHByaXZhdGUgSW50ZWdlciBudW1iZXJPZlJhdGluZ3M7CgogIEBWYWx1ZSgiXCR7YXBwLnJhdGluZ1N0YXJzfSIpCiAgcHJpdmF0ZSBJbnRlZ2VyIHJhdGluZ1N0YXJzOwoKICBAQXV0b3dpcmVkCiAgcHJpdmF0ZSBSZWRpc1RlbXBsYXRlPFN0cmluZywgU3RyaW5nPiByZWRpc1RlbXBsYXRlOwoKICBAQXV0b3dpcmVkCiAgcHJpdmF0ZSBCb29rUmF0aW5nUmVwb3NpdG9yeSBib29rUmF0aW5nUmVwbzsKCiAgQE92ZXJyaWRlCiAgcHVibGljIHZvaWQgcnVuKFN0cmluZy4uLiBhcmdzKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgIGlmIChib29rUmF0aW5nUmVwby5jb3VudCgpID09IDApIHsKICAgIFJhbmRvbSByYW5kb20gPSBuZXcgUmFuZG9tKCk7CiAgICBJbnRTdHJlYW0ucmFuZ2UoMCwgbnVtYmVyT2ZSYXRpbmdzKS5mb3JFYWNoKG4gLT4gewogICAgICAgICAgU3RyaW5nIGJvb2tJZCA9IHJlZGlzVGVtcGxhdGUub3BzRm9yU2V0KCkucmFuZG9tTWVtYmVyKEJvb2suY2xhc3MuZ2V0TmFtZSgpKTsKICAgICAgICAgIFN0cmluZyB1c2VySWQgPSByZWRpc1RlbXBsYXRlLm9wc0ZvclNldCgpLnJhbmRvbU1lbWJlcihVc2VyLmNsYXNzLmdldE5hbWUoKSk7CiAgICAgICAgICBpbnQgc3RhcnMgPSByYW5kb20ubmV4dEludChyYXRpbmdTdGFycykgKyAxOwoKICAgICAgICAgIFVzZXIgdXNlciA9IG5ldyBVc2VyKCk7CiAgICAgICAgICB1c2VyLnNldElkKHVzZXJJZCk7CgogICAgICAgICAgQm9vayBib29rID0gbmV3IEJvb2soKTsKICAgICAgICAgIGJvb2suc2V0SWQoYm9va0lkKTsKCiAgICAgICAgICBCb29rUmF0aW5nIHJhdGluZyA9IEJvb2tSYXRpbmcuYnVpbGRlcigpIC8vCiAgICAgICAgICAgIC51c2VyKHVzZXIpIC8vCiAgICAgICAgICAgIC5ib29rKGJvb2spIC8vCiAgICAgICAgICAgIC5yYXRpbmcoc3RhcnMpLmJ1aWxkKCk7CiAgICAgICAgICBib29rUmF0aW5nUmVwby5zYXZlKHJhdGluZyk7CiAgICB9KTsKCiAgICBsb2cuaW5mbygiPj4+PiBCb29rUmF0aW5nIGNyZWF0ZWQuLi4iKTsKICAgIH0KICB9Cn0KYCkpLG1keCgicCIsbnVsbCxgVGhpcyBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ29tbWFuZExpbmVSdW5uZXJgKSxgIGNyZWF0ZXMgYSBjb25maWd1cmFibGUgbnVtYmVyIG9mIHJhbmRvbSByYXRpbmdzIGZvciBhIHJhbmRvbSBzZXQgb2YgYm9va3MgYW5kIHVzZXJzLiBXZSB1c2UgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFJlZGlzVGVtcGxhdGUub3BzRm9yU2V0KCkucmFuZG9tTWVtYmVyKClgKSxgIHRvIHJlcXVlc3QgYSByYW5kb20gSUQgZnJvbSB0aGUgc2V0IG9mIHVzZXJzIGFuZCBib29rcy4KVGhlbiB3ZSBjaG9vc2UgYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIDEgYW5kIHRoZSB0b3RhbCBudW1iZXIgb2Ygc3RhcnMgaW4gb3VyIHJhdGluZyBzeXN0ZW0gdG8gY3JlYXRlIHRoZSByYXRpbmcuClRoaXMgY2xhc3MgaW50cm9kdWNlcyB0aGUgdXNlIG9mIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQFZhbHVlYCksYCBhbm5vdGF0aW9uLCB3aGljaCB3aWxsIGdyYWIgdGhlIHByb3BlcnR5IGluc2lkZSB0aGUgU3RyaW5nIHBhcmFtIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBcJHtmb299YCksYCBmcm9tIHRoZSBhcHBsaWNhdGlvbuKAmXMgcHJvcGVydHkgZmlsZS4KSW4gdGhlIGZpbGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNyYy9tYWluL3Jlc291cmNlcy9hcHBsaWNhdGlvbi5wcm9wZXJ0aWVzYCksYCBhZGQgdGhlIGZvbGxvd2luZyB2YWx1ZXM6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1qYXZhIn0pLGBhcHAubnVtYmVyT2ZSYXRpbmdzPTUwMDAKYXBwLnJhdGluZ1N0YXJzPTUKYCkpLG1keCgiaDMiLHsiaWQiOiJpbXBsZW1lbnRpbmctcGFnaW5hdGlvbi13aXRoLWFsbC1ib29rcyJ9LGBJbXBsZW1lbnRpbmcgUGFnaW5hdGlvbiB3aXRoIEFsbCBCb29rc2ApLG1keCgicCIsbnVsbCxgUGFnaW5hdGlvbiBpcyBoZWxwZnVsIHdoZW4gd2UgaGF2ZSBhIGxhcmdlIGRhdGFzZXQgYW5kIHdhbnQgdG8gcHJlc2VudCBpdCB0byB0aGUgdXNlciBpbiBzbWFsbGVyIGNodW5rcy4gQXMgd2UgbGVhcm5lZCBlYXJsaWVyIGluIHRoZSBsZXNzb24sIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQm9va1JlcG9zaXRvcnkgYCksYGV4dGVuZHMgdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBQYWdpbmdBbmRTb3J0aW5nUmVwb3NpdG9yeWApLGAsIHdoaWNoIGlzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYENydWRSZXBvc2l0b3J5YCksYC4KSW4gdGhpcyBzZWN0aW9uLCB3ZSB3aWxsIHJlZmFjdG9yIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQm9va0NvbnRyb2xsZXJgKSxgIGFsbCBtZXRob2QgdG8gd29yayB3aXRoIHRoZSBwYWdpbmF0aW9uIGZlYXR1cmVzIG9mIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgUGFnaW5nQW5kU29ydGluZ1JlcG9zaXRvcnlgKSxgLiBSZXBsYWNlIHRoZSBwcmV2aW91c2x5IGNyZWF0ZWQgYWxsIG1ldGhvZCB3aXRoIHRoZSBmb2xsb3dpbmcgY29udGVudHM6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1qYXZhIn0pLGAgIEBHZXRNYXBwaW5nCiAgcHVibGljIFJlc3BvbnNlRW50aXR5PE1hcDxTdHJpbmcsIE9iamVjdD4+IGFsbCggLy8KICAgIEBSZXF1ZXN0UGFyYW0oZGVmYXVsdFZhbHVlID0gIjAiKSBJbnRlZ2VyIHBhZ2UsIC8vCiAgICBAUmVxdWVzdFBhcmFtKGRlZmF1bHRWYWx1ZSA9ICIxMCIpIEludGVnZXIgc2l6ZSAvLwogICkgewogICAgUGFnZWFibGUgcGFnaW5nID0gUGFnZVJlcXVlc3Qub2YocGFnZSwgc2l6ZSk7CiAgICBQYWdlPEJvb2s+IHBhZ2VkUmVzdWx0ID0gYm9va1JlcG9zaXRvcnkuZmluZEFsbChwYWdpbmcpOwogICAgTGlzdDxCb29rPiBib29rcyA9IHBhZ2VkUmVzdWx0Lmhhc0NvbnRlbnQoKSA/IHBhZ2VkUmVzdWx0LmdldENvbnRlbnQoKSA6IENvbGxlY3Rpb25zLmVtcHR5TGlzdCgpOwoKICAgIE1hcDxTdHJpbmcsIE9iamVjdD4gcmVzcG9uc2UgPSBuZXcgSGFzaE1hcDw+KCk7CiAgICByZXNwb25zZS5wdXQoImJvb2tzIiwgYm9va3MpOwogICAgcmVzcG9uc2UucHV0KCJwYWdlIiwgcGFnZWRSZXN1bHQuZ2V0TnVtYmVyKCkpOwogICAgcmVzcG9uc2UucHV0KCJwYWdlcyIsIHBhZ2VkUmVzdWx0LmdldFRvdGFsUGFnZXMoKSk7CiAgICByZXNwb25zZS5wdXQoInRvdGFsIiwgcGFnZWRSZXN1bHQuZ2V0VG90YWxFbGVtZW50cygpKTsKCiAgICByZXR1cm4gbmV3IFJlc3BvbnNlRW50aXR5PD4ocmVzcG9uc2UsIG5ldyBIdHRwSGVhZGVycygpLCBIdHRwU3RhdHVzLk9LKTsKICB9CmApKSxtZHgoInAiLG51bGwsYExldOKAmXMgYnJlYWsgZG93biB0aGUgcmVmYWN0b3Jpbmc6YCksbWR4KCJ1bCIsbnVsbCxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgV2Ugd2FudCB0byBjb250cm9sIHRoZSBtZXRob2QgcmV0dXJuIHZhbHVlIHNvIHdl4oCZbGwgdXNlIGEgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJsaSJ9LGBSZXNwb25zZUVudGl0eWApLGAsIHdoaWNoIGlzIGFuIGV4dGVuc2lvbiBvZiBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYEh0dHBFbnRpdHlgKSxgIGFuZCBnaXZlcyB1cyBjb250cm9sIG92ZXIgdGhlIEhUVFAgc3RhdHVzIGNvZGUsIGhlYWRlcnMsIGFuZCBib2R5LmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBGb3IgdGhlIHJldHVybiB0eXBlLCB3ZSB3cmFwIGEgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJsaSJ9LGBNYXA8U3RyaW5nLE9iamVjdD5gKSxgIHRvIHJldHVybiB0aGUgY29sbGVjdGlvbiBvZiBib29rcyBhcyB3ZWxsIGFzIHBhZ2luYXRpb24gZGF0YS5gKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgV2XigJl2ZSBhZGRlZCB0d28gcmVxdWVzdCBwYXJhbWV0ZXJzIChIVFRQIHF1ZXJ5IHBhcmFtcykgb2YgdHlwZSBpbnRlZ2VyIGZvciB0aGUgcGFnZSBudW1iZXIgYmVpbmcgcmV0cmlldmVkIGFuZCB0aGUgc2l6ZSBvZiB0aGUgcGFnZS4KVGhlIHBhZ2UgbnVtYmVyIGRlZmF1bHRzIHRvIDAgYW5kIHRoZSBzaXplIG9mIHRoZSBwYWdlIGRlZmF1bHRzIHRvIDEwLmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBJbiB0aGUgYm9keSBvZiB0aGUgbWV0aG9kLCB3ZSB1c2UgdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToibGkifSxgUGFnZWFibGVgKSxgIGFuZCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYFBhZ2VSZXF1ZXN0YCksYCBhYnN0cmFjdGlvbnMgdG8gY29uc3RydWN0IHRoZSBwYWdpbmcgcmVxdWVzdC5gKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgV2UgZ2V0IGEgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJsaSJ9LGBQYWdlPEJvb2s+YCksYCByZXN1bHQgYnkgaW52b2tpbmcgdGhlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToibGkifSxgZmluZEFsbGApLGAgbWV0aG9kLCBwYXNzaW5nIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYFBhZ2VhYmxlYCksYCBwYWdpbmcgcmVxdWVzdC5gKSxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxgSWYgdGhlIHJldHVybmVkIHBhZ2UgY29udGFpbnMgYW55IGl0ZW1zLCB3ZSBhZGQgdGhlbSB0byB0aGUgcmVzcG9uc2Ugb2JqZWN0LiBPdGhlcndpc2UsIHdlIGFkZCBhbiBlbXB0eSBsaXN0LmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LGBUaGUgcmVzcG9uc2UgaXMgY29uc3RydWN0ZWQgYnkgaW5zdGFudGlhdGluZyBhIE1hcCBhbmQgYWRkaW5nIHRoZSBib29rcywgY3VycmVudCBwYWdlLCB0b3RhbCBudW1iZXIgb2YgcGFnZXMsIGFuZCB0b3RhbCBudW1iZXIgb2YgYm9va3MuYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYEZpbmFsbHkgd2UgcGFja2FnZSB0aGUgcmVzcG9uc2UgbWFwIGludG8gYSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYFJlc3BvbnNlRW50aXR5YCksYC5gKSksbWR4KCJwIixudWxsLGBMZXTigJlzIGZpcmUgdXAgYSBwYWdpbmF0aW9uIHJlcXVlc3Qgd2l0aCBjdXJsIGFzIHNob3duIG5leHQ6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1iYXNoIn0pLGBjdXJsIC0tbG9jYXRpb24gLS1yZXF1ZXN0IEdFVCAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9ib29rcy8/c2l6ZT0yNSZwYWdlPTInCmApKSxtZHgoInAiLG51bGwsYFBhc3NpbmcgYSBwYWdlIHNpemUgb2YgMjUgYW5kIHJlcXVlc3RpbmcgcGFnZSBudW1iZXIgMiwgd2UgZ2V0IHRoZSBmb2xsb3dpbmc6YCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1qc29uIn0pLGB7CiAgICAidG90YWwiOiAyNDAzLAogICAgImJvb2tzIjogWwogICAgICAgIHsKICAgICAgICAgICAgImlkIjogIjE3ODY0Njk5NjAiLAogICAgICAgICAgICAidGl0bGUiOiAiRGF0YSBWaXN1YWxpemF0aW9uIHdpdGggRDMgNC54IENvb2tib29rIiwKICAgICAgICAgICAgInN1YnRpdGxlIjogbnVsbCwKICAgICAgICAgICAgImRlc2NyaXB0aW9uIjogIkRpc2NvdmVyIG92ZXIgNjUgcmVjaXBlcyB0byBoZWxwIHlvdSBjcmVhdGUgYnJlYXRodGFraW5nIGRhdGEgdmlzdWFsaXphdGlvbnMgdXNpbmcgdGhlIGxhdGVzdCBmZWF0dXJlcyBvZiBEMy4uLiIsCiAgICAgICAgICAgICJsYW5ndWFnZSI6ICJlbiIsCiAgICAgICAgICAgICJwYWdlQ291bnQiOiAzNzAsCiAgICAgICAgICAgICJ0aHVtYm5haWwiOiAiaHR0cDovL2Jvb2tzLmdvb2dsZS5jb20vYm9va3MvY29udGVudD9pZD1EVlFvRHdBQVFCQUomcHJpbnRzZWM9ZnJvbnRjb3ZlciZpbWc9MSZ6b29tPTEmZWRnZT1jdXJsJnNvdXJjZT1nYnNfYXBpIiwKICAgICAgICAgICAgInByaWNlIjogMjIuMzksCiAgICAgICAgICAgICJjdXJyZW5jeSI6ICJVU0QiLAogICAgICAgICAgICAiaW5mb0xpbmsiOiAiaHR0cHM6Ly9wbGF5Lmdvb2dsZS5jb20vc3RvcmUvYm9va3MvZGV0YWlscz9pZD1EVlFvRHdBQVFCQUomc291cmNlPWdic19hcGkiLAogICAgICAgICAgICAiYXV0aG9ycyI6IFsKICAgICAgICAgICAgICAgICJOaWNrIFpodSIKICAgICAgICAgICAgXSwKICAgICAgICAgICAgImNhdGVnb3JpZXMiOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgImlkIjogImYyYWRhMWUyLTdjMTgtNGQ5MC1iZmU3LWUzMjFiNjUwYzBhMyIsCiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAicmVkaXMiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgImlkIjogIjExMTg3MTczNVgiLAogICAgICAgICAgICAidGl0bGUiOiAiQW5kcm9pZCBQcm9ncmFtbWluZyIsCiAgICAgICAgICAgICJzdWJ0aXRsZSI6ICJQdXNoaW5nIHRoZSBMaW1pdHMiLAogICAgICAgICAgICAiZGVzY3JpcHRpb24iOiAiVW5sZWFzaCB0aGUgcG93ZXIgb2YgdGhlIEFuZHJvaWQgT1MgYW5kIGJ1aWxkIHRoZSBraW5kcyBvZmJyaWxsaWFudCwgaW5ub3ZhdGl2ZSBhcHBzIHVzZXJzIGxvdmUgdG8gdXNlIC4uLiIsCiAgICAgICAgICAgICJsYW5ndWFnZSI6ICJlbiIsCiAgICAgICAgICAgICJwYWdlQ291bnQiOiA0MzIsCiAgICAgICAgICAgICJ0aHVtYm5haWwiOiAiaHR0cDovL2Jvb2tzLmdvb2dsZS5jb20vYm9va3MvY29udGVudD9pZD1TVVdQQVFBQVFCQUomcHJpbnRzZWM9ZnJvbnRjb3ZlciZpbWc9MSZ6b29tPTEmZWRnZT1jdXJsJnNvdXJjZT1nYnNfYXBpIiwKICAgICAgICAgICAgInByaWNlIjogMzAuMCwKICAgICAgICAgICAgImN1cnJlbmN5IjogIlVTRCIsCiAgICAgICAgICAgICJpbmZvTGluayI6ICJodHRwczovL3BsYXkuZ29vZ2xlLmNvbS9zdG9yZS9ib29rcy9kZXRhaWxzP2lkPVNVV1BBUUFBUUJBSiZzb3VyY2U9Z2JzX2FwaSIsCiAgICAgICAgICAgICJhdXRob3JzIjogWwogICAgICAgICAgICAgICAgIkVyaWsgSGVsbG1hbiIKICAgICAgICAgICAgXSwKICAgICAgICAgICAgImNhdGVnb3JpZXMiOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgImlkIjogIjQ3ZDlhNzY5LWJiYzItNDA2OC1iMjdmLTJiODAwYmVjMTU2NSIsCiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAia290bGluIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgfSwKYCkpKTt9O01EWENvbnRlbnQuaXNNRFhDb21wb25lbnQ9dHJ1ZTs="},{"version":3,"sources":["/Users/ajeetraina/projects/8sep/redis-developer.github.io/docs/develop/java/spring/redis-and-spring-course/lesson_5/index-lesson_5.mdx"],"names":["React","mdx","frontMatter","id","title","sidebar_label","slug","metadata","useBaseUrl","toc","value","children","layoutProps","MDXLayout","MDXContent","components","props","require","default","isMDXComponent"],"mappings":"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","sourcesContent":["\n  import React from 'react';\n  import { mdx } from '@mdx-js/react';\n\n  export const frontMatter = {\n\tid: 'index-lesson_5',\n\ttitle: 'Books, Categories & The Catalog',\n\tsidebar_label: 'Books, Categories & The Catalog',\n\tslug: '/develop/java/redis-and-spring-course/lesson_5'\n};\nexport const metadata = {\n  \"unversionedId\": \"develop/java/spring/redis-and-spring-course/lesson_5/index-lesson_5\",\n  \"id\": \"develop/java/spring/redis-and-spring-course/lesson_5/index-lesson_5\",\n  \"isDocsHomePage\": false,\n  \"title\": \"Books, Categories & The Catalog\",\n  \"description\": \"Objectives\",\n  \"source\": \"@site/docs/develop/java/spring/redis-and-spring-course/lesson_5/index-lesson_5.mdx\",\n  \"slug\": \"/develop/java/redis-and-spring-course/lesson_5\",\n  \"permalink\": \"/develop/java/redis-and-spring-course/lesson_5\",\n  \"editUrl\": \"https://github.com/redis-developer/redis-developer/edit/master/docs/develop/java/spring/redis-and-spring-course/lesson_5/index-lesson_5.mdx\",\n  \"version\": \"current\",\n  \"sidebar_label\": \"Books, Categories & The Catalog\",\n  \"sidebar\": \"docs\",\n  \"previous\": {\n    \"title\": \"User/Roles & Secondary Indexes\",\n    \"permalink\": \"/develop/java/redis-and-spring-course/lesson_4\"\n  },\n  \"next\": {\n    \"title\": \"Domain Models with RedisJSON\",\n    \"permalink\": \"/develop/java/redis-and-spring-course/lesson_6\"\n  }\n};\n  /* @jsxRuntime classic */\n/* @jsx mdx */\nimport useBaseUrl from '@docusaurus/useBaseUrl';\nexport const toc = [{\n  value: 'Objectives',\n  id: 'objectives',\n  children: []\n}, {\n  value: 'Agenda',\n  id: 'agenda',\n  children: []\n}, {\n  value: 'Books, Categories, and Book Ratings',\n  id: 'books-categories-and-book-ratings',\n  children: []\n}, {\n  value: 'The Category Repository',\n  id: 'the-category-repository',\n  children: []\n}, {\n  value: 'The Book Model',\n  id: 'the-book-model',\n  children: []\n}, {\n  value: 'The Book Repository',\n  id: 'the-book-repository',\n  children: []\n}, {\n  value: 'The Book Rating Repository',\n  id: 'the-book-rating-repository',\n  children: []\n}, {\n  value: 'Loading Books',\n  id: 'loading-books',\n  children: []\n}, {\n  value: 'Book Controller',\n  id: 'book-controller',\n  children: []\n}, {\n  value: 'Get all Books',\n  id: 'get-all-books',\n  children: []\n}, {\n  value: 'Get a book by ISBN',\n  id: 'get-a-book-by-isbn',\n  children: []\n}, {\n  value: 'Get all Categories',\n  id: 'get-all-categories',\n  children: []\n}, {\n  value: 'Generate Book Ratings',\n  id: 'generate-book-ratings',\n  children: []\n}, {\n  value: 'Implementing Pagination with All Books',\n  id: 'implementing-pagination-with-all-books',\n  children: []\n}];\n\nconst layoutProps = {\n  toc\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h3 {...{\n      \"id\": \"objectives\"\n    }}>{`Objectives`}</h3>\n    <p>{`Create the Book-Category-Book-Ratings domain, load and transform JSON data, and implement the Books API.`}</p>\n    <h3 {...{\n      \"id\": \"agenda\"\n    }}>{`Agenda`}</h3>\n    <p>{`In this lesson, students will learn:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`How to load JSON data using Jackson`}</li>\n      <li parentName=\"ul\">{`How to create and work with secondary indexes`}</li>\n      <li parentName=\"ul\">{`How to use the repositories with a REST controller\nIf you get stuck:`}</li>\n      <li parentName=\"ul\">{`The progress made in this lesson is available on the redi2read github repository at `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/redis-developer/redi2read/tree/course/milestone-5\"\n        }}>{`https://github.com/redis-developer/redi2read/tree/course/milestone-5`}</a></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"books-categories-and-book-ratings\"\n    }}>{`Books, Categories, and Book Ratings`}</h3>\n    <p>{`This lesson will start by fleshing out the Book, Category, and BookRating models with their respective Spring Repositories.`}</p>\n    <p><img alt={\"Books, Categories, and Book Ratings\"} src={require(\"!url-loader?limit=10000&name=assets/images/[name]-[hash].[ext]&fallback=file-loader!./images/books_categories_ratings.png\").default} /></p>\n    <h4 {...{\n      \"id\": \"the-category-model\"\n    }}>{`The Category Model`}</h4>\n    <p>{`We’ll start with the `}<inlineCode parentName=\"p\">{`Category`}</inlineCode>{`. A `}<inlineCode parentName=\"p\">{`Book`}</inlineCode>{` belongs to one or more categories. The `}<inlineCode parentName=\"p\">{`Category`}</inlineCode>{` has a name that we will derive from the JSON data\nfiles in `}<inlineCode parentName=\"p\">{`src/main/resources/data/books`}</inlineCode>{`. As we’ve done previously, we will map the class to a Redis Hash.\nAdd the file `}<inlineCode parentName=\"p\">{`src/main/java/com/redislabs/edu/redi2read/models/Category.java`}</inlineCode>{` with the following contents:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.models;\n\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.redis.core.RedisHash;\n\nimport lombok.Builder;\nimport lombok.Data;\n\n@Data\n@Builder\n@RedisHash\npublic class Category {\n  @Id\n  private String id;\n  private String name;\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"the-category-repository\"\n    }}>{`The Category Repository`}</h3>\n    <p>{`The corresponding repository extends Spring’s CrudRepository. Add the file `}<inlineCode parentName=\"p\">{`src/main/java/com/redislabs/edu/redi2read/repositories/CategoryRepository.java`}</inlineCode>{` with the following contents:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.repositories;\n\nimport com.redislabs.edu.redi2read.models.Category;\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface CategoryRepository extends CrudRepository<Category, String> {\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"the-book-model\"\n    }}>{`The Book Model`}</h3>\n    <p>{`The Book model maps directly to the JSON payload in the *.json files in `}<inlineCode parentName=\"p\">{`src/main/resources/data/books`}</inlineCode>{`.\nFor example, the JSON object shown below came from the the file redis_0.json:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`{\n   \"pageCount\": 228,\n   \"thumbnail\": \"http://books.google.com/books/content?id=NsseEAAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\",\n   \"price\": 9.95,\n   \"subtitle\": \"Explore Redis - Its Architecture, Data Structures and Modules like Search, JSON, AI, Graph, Timeseries (English Edition)\",\n   \"description\": \"Complete reference guide to Redis KEY FEATURES ● Complete coverage of Redis Modules.\",\n   \"language\": \"en\",\n   \"currency\": \"USD\",\n   \"id\": \"8194837766\",\n   \"title\": \"Redis(r) Deep Dive\",\n   \"infoLink\": \"https://play.google.com/store/books/details?id=NsseEAAAQBAJ&source=gbs_api\",\n   \"authors\": [\"Suyog Dilip Kale\", \"Chinmay Kulkarni\"]\n },\n...\n}\n`}</code></pre>\n    <p>{`The category name is extracted from the file name as \"redis\". The same applies to any book from the files: `}<inlineCode parentName=\"p\">{`redis_0.json`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`redis_1.json`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`redis_2.json`}</inlineCode>{`, and `}<inlineCode parentName=\"p\">{`redis_3.json`}</inlineCode>{`.\nThe Book class contains a `}<inlineCode parentName=\"p\">{`Set<Category>`}</inlineCode>{` which will for now contain the single category extracted from the filename. The `}<inlineCode parentName=\"p\">{`Set<String>`}</inlineCode>{` for authors gets mapped from the \"authors\" JSON array in the payload.\nAdd the file `}<inlineCode parentName=\"p\">{`src/main/java/com/redislabs/edu/redi2read/repositories/Book.java`}</inlineCode>{` with the following contents:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.models;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.annotation.Reference;\nimport org.springframework.data.redis.core.RedisHash;\n\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\n@Data\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\n@RedisHash\npublic class Book {\n\n  @Id\n  @EqualsAndHashCode.Include\n  private String id;\n\n  private String title;\n  private String subtitle;\n  private String description;\n  private String language;\n  private Long pageCount;\n  private String thumbnail;\n  private Double price;\n  private String currency;\n  private String infoLink;\n\n  private Set<String> authors;\n\n  @Reference\n  private Set<Category> categories = new HashSet<Category>();\n\n  public void addCategory(Category category) {\n    categories.add(category);\n  }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"the-book-repository\"\n    }}>{`The Book Repository`}</h3>\n    <p>{`In the `}<inlineCode parentName=\"p\">{`BookRepository`}</inlineCode>{` we introduce the usage of the `}<inlineCode parentName=\"p\">{`PaginationAndSortingRepository`}</inlineCode>{`. The `}<inlineCode parentName=\"p\">{`PaginationAndSortingRepository`}</inlineCode>{` extends the `}<inlineCode parentName=\"p\">{`CrudRepository`}</inlineCode>{` interface\nand adds additional methods to ease paginated access to entities.\nWe will learn more about the usage of the `}<inlineCode parentName=\"p\">{`PagingAndSortingRepository`}</inlineCode>{` when we implement the `}<inlineCode parentName=\"p\">{`BookController`}</inlineCode>{`.\nAdd the file `}<inlineCode parentName=\"p\">{`src/main/java/com/redislabs/edu/redi2read/repositories/BookRepository.java`}</inlineCode>{` with the following contents:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.repositories;\n\nimport com.redislabs.edu.redi2read.models.Book;\n\nimport org.springframework.data.repository.PagingAndSortingRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface BookRepository extends PagingAndSortingRepository<Book, String> {\n}\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"the-bookrating-model\"\n    }}>{`The BookRating Model`}</h4>\n    <p>{`The `}<inlineCode parentName=\"p\">{`BookRating`}</inlineCode>{` model represents a rating of a book by a user. We implement a traditional 5 star rating system as a many-to-many relationship.\nThe `}<inlineCode parentName=\"p\">{`BookRating`}</inlineCode>{` model plays a role equivalent to that of a joining table or bridging table in a relational model.\n`}<inlineCode parentName=\"p\">{`BookRating`}</inlineCode>{` sits between the two other entities of a many-to-many relationship. Its purpose is to store a record for each of the combinations\nof these other two entities (Book and User).\nWe keep the links to the Book and User models using the `}<inlineCode parentName=\"p\">{`@Reference`}</inlineCode>{` annotation (the equivalent of having foreign keys in a relational database)\nAdd the file `}<inlineCode parentName=\"p\">{`src/main/java/com/redislabs/edu/redi2read/models/BookRating.java`}</inlineCode>{` with the following contents:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.models;\n\nimport javax.validation.constraints.NotNull;\n\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.annotation.Reference;\nimport org.springframework.data.redis.core.RedisHash;\n\nimport lombok.Builder;\nimport lombok.Data;\n\n@Data\n@Builder\n@RedisHash\npublic class BookRating {\n  @Id\n  private String id;\n\n  @NotNull\n  @Reference\n  private User user;\n\n  @NotNull\n  @Reference\n  private Book book;\n\n  @NotNull\n  private Integer rating;\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"the-book-rating-repository\"\n    }}>{`The Book Rating Repository`}</h3>\n    <p>{`The corresponding Repository simply extends Spring’s CrudRepository. Add the file `}<inlineCode parentName=\"p\">{`src/main/java/com/redislabs/edu/redi2read/repositories/BookRatingRepository.java`}</inlineCode>{` with the following contents:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.repositories;\n\nimport com.redislabs.edu.redi2read.models.BookRating;\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface BookRatingRepository extends CrudRepository<BookRating, String> {\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"loading-books\"\n    }}>{`Loading Books`}</h3>\n    <p>{`Now that we have our models and repositories defined, let’s load the books from the provided JSON data in the `}<inlineCode parentName=\"p\">{`src/main/resources/data/books`}</inlineCode>{` directory.\nWe’ll create a `}<inlineCode parentName=\"p\">{`CommandLineRunner`}</inlineCode>{` to iterate over every .json file in the `}<inlineCode parentName=\"p\">{`data/books`}</inlineCode>{` directory.  We will map the content of each file to a Book object using Jackson.\nWe'll create a category using the characters in the filename up to the last underscore. If there is no category with that name already, we will create one.\nThe category is then added to the set of categories for the book.\nAdd the file `}<inlineCode parentName=\"p\">{`src/main/java/com/redislabs/edu/redi2read/boot/CreateBooks.java`}</inlineCode>{` with the following contents:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.boot;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\nimport com.fasterxml.jackson.core.type.TypeReference;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.redislabs.edu.redi2read.models.Book;\nimport com.redislabs.edu.redi2read.models.Category;\nimport com.redislabs.edu.redi2read.repositories.BookRepository;\nimport com.redislabs.edu.redi2read.repositories.CategoryRepository;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.stereotype.Component;\n\nimport lombok.extern.slf4j.Slf4j;\n\n@Component\n@Order(3)\n@Slf4j\npublic class CreateBooks implements CommandLineRunner {\n  @Autowired\n  private BookRepository bookRepository;\n\n  @Autowired\n  private CategoryRepository categoryRepository;\n\n  @Override\n  public void run(String... args) throws Exception {\n    if (bookRepository.count() == 0) {\n    ObjectMapper mapper = new ObjectMapper();\n    TypeReference<List<Book>> typeReference = new TypeReference<List<Book>>() {\n    };\n\n    List<File> files = //\n        Files.list(Paths.get(getClass().getResource(\"/data/books\").toURI())) //\n            .filter(Files::isRegularFile) //\n            .filter(path -> path.toString().endsWith(\".json\")) //\n            .map(java.nio.file.Path::toFile) //\n            .collect(Collectors.toList());\n\n    Map<String, Category> categories = new HashMap<String, Category>();\n\n    files.forEach(file -> {\n          try {\n            log.info(\">>>> Processing Book File: \" + file.getPath());\n            String categoryName = file.getName().substring(0, file.getName().lastIndexOf(\"_\"));\n            log.info(\">>>> Category: \" + categoryName);\n\n            Category category;\n            if (!categories.containsKey(categoryName)) {\n            category = Category.builder().name(categoryName).build();\n            categoryRepository.save(category);\n            categories.put(categoryName, category);\n            } else {\n            category = categories.get(categoryName);\n            }\n\n            InputStream inputStream = new FileInputStream(file);\n            List<Book> books = mapper.readValue(inputStream, typeReference);\n            books.stream().forEach((book) -> {\n            book.addCategory(category);\n            bookRepository.save(book);\n            });\n            log.info(\">>>> \" + books.size() + \" Books Saved!\");\n          } catch (IOException e) {\n            log.info(\"Unable to import books: \" + e.getMessage());\n          }\n    });\n\n    log.info(\">>>> Loaded Book Data and Created books...\");\n    }\n  }\n}\n`}</code></pre>\n    <p>{`There's a lot to unpack here, so let’s take it from the top:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`As done previously, we only execute if there are no books in the repository.`}</li>\n      <li parentName=\"ul\">{`We use Jackson `}<inlineCode parentName=\"li\">{`ObjectMapper`}</inlineCode>{` and a `}<inlineCode parentName=\"li\">{`TypeReference `}</inlineCode>{`to perform the mapping.`}</li>\n      <li parentName=\"ul\">{`We collect the paths of all the files with the .json extension in the target directory.`}</li>\n      <li parentName=\"ul\">{`We create a `}<inlineCode parentName=\"li\">{`Map`}</inlineCode>{` of `}<inlineCode parentName=\"li\">{`String`}</inlineCode>{`s to `}<inlineCode parentName=\"li\">{`Category `}</inlineCode>{`objects to collect the categories as we process\nthe files and quickly determine whether we have already created a category.`}</li>\n      <li parentName=\"ul\">{`For each book, we assign the category and save it to Redis.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"book-controller\"\n    }}>{`Book Controller`}</h3>\n    <p>{`Now we can implement the initial version of the `}<inlineCode parentName=\"p\">{`BookController`}</inlineCode>{`: our Bookstore Catalog API. This first version of the `}<inlineCode parentName=\"p\">{`BookController`}</inlineCode>{`\nwill have three endpoints:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Get all books`}</li>\n      <li parentName=\"ul\">{`Get a book by ISBN (id)`}</li>\n      <li parentName=\"ul\">{`Get all categories\nAdd the file `}<inlineCode parentName=\"li\">{`src/main/java/com/redislabs/edu/redi2read/controllers/BookController.java`}</inlineCode>{` with the following contents:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.controllers;\n\nimport com.redislabs.edu.redi2read.models.Book;\nimport com.redislabs.edu.redi2read.models.Category;\nimport com.redislabs.edu.redi2read.repositories.BookRepository;\nimport com.redislabs.edu.redi2read.repositories.CategoryRepository;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/api/books\")\npublic class BookController {\n  @Autowired\n  private BookRepository bookRepository;\n\n  @Autowired\n  private CategoryRepository categoryRepository;\n\n  @GetMapping\n  public Iterable<Book> all() {\n    return bookRepository.findAll();\n  }\n\n  @GetMapping(\"/categories\")\n  public Iterable<Category> getCategories() {\n    return categoryRepository.findAll();\n  }\n\n  @GetMapping(\"/{isbn}\")\n  public Book get(@PathVariable(\"isbn\") String isbn) {\n    return bookRepository.findById(isbn).get();\n  }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"get-all-books\"\n    }}>{`Get all Books`}</h3>\n    <p>{`To get all books, we issue a GET request to `}<inlineCode parentName=\"p\">{`http://localhost:8080/api/books/`}</inlineCode>{`. This endpoint is implemented in the all method, which calls the BookRepository findAll method. Using curl:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl --location --request GET 'http://localhost:8080/api/books/'\n`}</code></pre>\n    <p>{`The result is an array of JSON objects containing the books:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`[\n    {\n        \"id\": \"1783980117\",\n        \"title\": \"RESTful Java Web Services Security\",\n        \"subtitle\": null,\n        \"description\": \"A sequential and easy-to-follow guide which allows you to understand the concepts related to securing web apps/services quickly and efficiently, since each topic is explained and described with the help of an example and in a step-by-step manner, helping you to easily implement the examples in your own projects. This book is intended for web application developers who use RESTful web services to power their websites. Prior knowledge of RESTful is not mandatory, but would be advisable.\",\n        \"language\": \"en\",\n        \"pageCount\": 144,\n        \"thumbnail\": \"http://books.google.com/books/content?id=Dh8ZBAAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\",\n        \"price\": 11.99,\n        \"currency\": \"USD\",\n        \"infoLink\": \"https://play.google.com/store/books/details?id=Dh8ZBAAAQBAJ&source=gbs_api\",\n        \"authors\": [\n            \"Andrés Salazar C.\",\n            \"René Enríquez\"\n        ],\n        \"categories\": [\n            {\n                \"id\": \"f2ada1e2-7c18-4d90-bfe7-e321b650c0a3\",\n                \"name\": \"redis\"\n            }\n        ]\n    },\n...\n]\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"get-a-book-by-isbn\"\n    }}>{`Get a book by ISBN`}</h3>\n    <p>{`To get a specific book, we issue a GET request to `}<inlineCode parentName=\"p\">{`http://localhost:8080/api/books/{isbn}`}</inlineCode>{`. This endpoint is implemented in the get method, which calls the BookRepository findById method. Using curl:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl --location --request GET 'http://localhost:8080/api/books/1680503545'\n`}</code></pre>\n    <p>{`The result is a JSON object containing the book:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"id\": \"1680503545\",\n    \"title\": \"Functional Programming in Java\",\n    \"subtitle\": \"Harnessing the Power Of Java 8 Lambda Expressions\",\n    \"description\": \"Intermediate level, for programmers fairly familiar with Java, but new to the functional style of programming and lambda expressions. Get ready to program in a whole new way. ...\",\n    \"language\": \"en\",\n    \"pageCount\": 196,\n    \"thumbnail\": \"http://books.google.com/books/content?id=_g5QDwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\",\n    \"price\": 28.99,\n    \"currency\": \"USD\",\n    \"infoLink\": \"https://play.google.com/store/books/details?id=_g5QDwAAQBAJ&source=gbs_api\",\n    \"authors\": [\n        \"Venkat Subramaniam\"\n    ],\n    \"categories\": [\n        {\n            \"id\": \"9d5c025e-bf38-4b50-a971-17e0b7408385\",\n            \"name\": \"java\"\n        }\n    ]\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"get-all-categories\"\n    }}>{`Get all Categories`}</h3>\n    <p>{`To get all categories, we issue a GET request to `}<inlineCode parentName=\"p\">{`http://localhost:8080/api/books/categories`}</inlineCode>{`. It’s implemented in the `}<inlineCode parentName=\"p\">{`getCategories`}</inlineCode>{` method, which calls the `}<inlineCode parentName=\"p\">{`CategoriesRepository`}</inlineCode>{` `}<inlineCode parentName=\"p\">{`findAll`}</inlineCode>{` method. Using curl:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl --location --request GET 'http://localhost:8080/api/books/categories'\n`}</code></pre>\n    <p>{`The result is an array of JSON objects containing the categories:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`[\n    {\n        \"id\": \"2fd916fe-7ff8-44c7-9f86-ca388565256c\",\n        \"name\": \"mongodb\"\n    },\n    {\n        \"id\": \"9615a135-7472-48fc-b8ac-a5516a2c8b22\",\n        \"name\": \"dynamodb\"\n    },\n    {\n        \"id\": \"f2ada1e2-7c18-4d90-bfe7-e321b650c0a3\",\n        \"name\": \"redis\"\n    },\n    {\n        \"id\": \"08fc8148-d924-4d2e-af7e-f5fe6f2861f0\",\n        \"name\": \"elixir\"\n    },\n    {\n        \"id\": \"b6a0b57b-ebb8-4d98-9352-8236256dbc27\",\n        \"name\": \"microservices\"\n    },\n    {\n        \"id\": \"7821fd6a-ec94-4ac6-8089-a480a7c7f2ee\",\n        \"name\": \"elastic_search\"\n    },\n    {\n        \"id\": \"f2be1bc3-1700-45f5-a300-2c4cf2f90583\",\n        \"name\": \"hbase\"\n    },\n    {\n        \"id\": \"31c8ea64-cad2-40d9-b0f6-30b8ea6fcbfb\",\n        \"name\": \"reactjs\"\n    },\n    {\n        \"id\": \"5e527af7-93a1-4c00-8f20-f89e89a213e8\",\n        \"name\": \"apache_spark\"\n    },\n    {\n        \"id\": \"9d5c025e-bf38-4b50-a971-17e0b7408385\",\n        \"name\": \"java\"\n    },\n    {\n        \"id\": \"bcb2a01c-9b0a-4846-b1be-670168b5d768\",\n        \"name\": \"clojure\"\n    },\n    {\n        \"id\": \"aba53bb9-7cfa-4b65-8900-8c7e857311c6\",\n        \"name\": \"couchbase\"\n    },\n    {\n        \"id\": \"bd1b2877-1564-4def-b3f7-18871165ff10\",\n        \"name\": \"riak\"\n    },\n    {\n        \"id\": \"47d9a769-bbc2-4068-b27f-2b800bec1565\",\n        \"name\": \"kotlin\"\n    },\n    {\n        \"id\": \"400c8f5a-953b-4b8b-b21d-045535d8084d\",\n        \"name\": \"nosql_big_data\"\n    },\n    {\n        \"id\": \"06bc25ff-f2ab-481b-a4d9-819552dea0e0\",\n        \"name\": \"javascript\"\n    }\n]\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"generate-book-ratings\"\n    }}>{`Generate Book Ratings`}</h3>\n    <p>{`Next, we will create a random set of book ratings. Later in the course, we’ll use these for an example. Following the same recipe we used to seed Redis with a `}<inlineCode parentName=\"p\">{`CommandLineRunner`}</inlineCode>{`, add the file `}<inlineCode parentName=\"p\">{`src/main/java/com/redislabs/edu/redi2read/boot/CreateBookRatings.java`}</inlineCode>{` with the following contents:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`package com.redislabs.edu.redi2read.boot;\n\nimport java.util.Random;\nimport java.util.stream.IntStream;\n\nimport com.redislabs.edu.redi2read.models.Book;\nimport com.redislabs.edu.redi2read.models.BookRating;\nimport com.redislabs.edu.redi2read.models.User;\nimport com.redislabs.edu.redi2read.repositories.BookRatingRepository;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.stereotype.Component;\n\nimport lombok.extern.slf4j.Slf4j;\n\n@Component\n@Order(4)\n@Slf4j\npublic class CreateBookRatings implements CommandLineRunner {\n\n  @Value(\"\\${app.numberOfRatings}\")\n  private Integer numberOfRatings;\n\n  @Value(\"\\${app.ratingStars}\")\n  private Integer ratingStars;\n\n  @Autowired\n  private RedisTemplate<String, String> redisTemplate;\n\n  @Autowired\n  private BookRatingRepository bookRatingRepo;\n\n  @Override\n  public void run(String... args) throws Exception {\n    if (bookRatingRepo.count() == 0) {\n    Random random = new Random();\n    IntStream.range(0, numberOfRatings).forEach(n -> {\n          String bookId = redisTemplate.opsForSet().randomMember(Book.class.getName());\n          String userId = redisTemplate.opsForSet().randomMember(User.class.getName());\n          int stars = random.nextInt(ratingStars) + 1;\n\n          User user = new User();\n          user.setId(userId);\n\n          Book book = new Book();\n          book.setId(bookId);\n\n          BookRating rating = BookRating.builder() //\n            .user(user) //\n            .book(book) //\n            .rating(stars).build();\n          bookRatingRepo.save(rating);\n    });\n\n    log.info(\">>>> BookRating created...\");\n    }\n  }\n}\n`}</code></pre>\n    <p>{`This `}<inlineCode parentName=\"p\">{`CommandLineRunner`}</inlineCode>{` creates a configurable number of random ratings for a random set of books and users. We use `}<inlineCode parentName=\"p\">{`RedisTemplate.opsForSet().randomMember()`}</inlineCode>{` to request a random ID from the set of users and books.\nThen we choose a random integer between 1 and the total number of stars in our rating system to create the rating.\nThis class introduces the use of the `}<inlineCode parentName=\"p\">{`@Value`}</inlineCode>{` annotation, which will grab the property inside the String param `}<inlineCode parentName=\"p\">{`\\${foo}`}</inlineCode>{` from the application’s property file.\nIn the file `}<inlineCode parentName=\"p\">{`src/main/resources/application.properties`}</inlineCode>{` add the following values:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`app.numberOfRatings=5000\napp.ratingStars=5\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"implementing-pagination-with-all-books\"\n    }}>{`Implementing Pagination with All Books`}</h3>\n    <p>{`Pagination is helpful when we have a large dataset and want to present it to the user in smaller chunks. As we learned earlier in the lesson, the `}<inlineCode parentName=\"p\">{`BookRepository `}</inlineCode>{`extends the `}<inlineCode parentName=\"p\">{`PagingAndSortingRepository`}</inlineCode>{`, which is built on top of the `}<inlineCode parentName=\"p\">{`CrudRepository`}</inlineCode>{`.\nIn this section, we will refactor the `}<inlineCode parentName=\"p\">{`BookController`}</inlineCode>{` all method to work with the pagination features of the `}<inlineCode parentName=\"p\">{`PagingAndSortingRepository`}</inlineCode>{`. Replace the previously created all method with the following contents:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`  @GetMapping\n  public ResponseEntity<Map<String, Object>> all( //\n    @RequestParam(defaultValue = \"0\") Integer page, //\n    @RequestParam(defaultValue = \"10\") Integer size //\n  ) {\n    Pageable paging = PageRequest.of(page, size);\n    Page<Book> pagedResult = bookRepository.findAll(paging);\n    List<Book> books = pagedResult.hasContent() ? pagedResult.getContent() : Collections.emptyList();\n\n    Map<String, Object> response = new HashMap<>();\n    response.put(\"books\", books);\n    response.put(\"page\", pagedResult.getNumber());\n    response.put(\"pages\", pagedResult.getTotalPages());\n    response.put(\"total\", pagedResult.getTotalElements());\n\n    return new ResponseEntity<>(response, new HttpHeaders(), HttpStatus.OK);\n  }\n`}</code></pre>\n    <p>{`Let’s break down the refactoring:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`We want to control the method return value so we’ll use a `}<inlineCode parentName=\"li\">{`ResponseEntity`}</inlineCode>{`, which is an extension of `}<inlineCode parentName=\"li\">{`HttpEntity`}</inlineCode>{` and gives us control over the HTTP status code, headers, and body.`}</li>\n      <li parentName=\"ul\">{`For the return type, we wrap a `}<inlineCode parentName=\"li\">{`Map<String,Object>`}</inlineCode>{` to return the collection of books as well as pagination data.`}</li>\n      <li parentName=\"ul\">{`We’ve added two request parameters (HTTP query params) of type integer for the page number being retrieved and the size of the page.\nThe page number defaults to 0 and the size of the page defaults to 10.`}</li>\n      <li parentName=\"ul\">{`In the body of the method, we use the `}<inlineCode parentName=\"li\">{`Pageable`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`PageRequest`}</inlineCode>{` abstractions to construct the paging request.`}</li>\n      <li parentName=\"ul\">{`We get a `}<inlineCode parentName=\"li\">{`Page<Book>`}</inlineCode>{` result by invoking the `}<inlineCode parentName=\"li\">{`findAll`}</inlineCode>{` method, passing the `}<inlineCode parentName=\"li\">{`Pageable`}</inlineCode>{` paging request.`}</li>\n      <li parentName=\"ul\">{`If the returned page contains any items, we add them to the response object. Otherwise, we add an empty list.`}</li>\n      <li parentName=\"ul\">{`The response is constructed by instantiating a Map and adding the books, current page, total number of pages, and total number of books.`}</li>\n      <li parentName=\"ul\">{`Finally we package the response map into a `}<inlineCode parentName=\"li\">{`ResponseEntity`}</inlineCode>{`.`}</li>\n    </ul>\n    <p>{`Let’s fire up a pagination request with curl as shown next:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl --location --request GET 'http://localhost:8080/api/books/?size=25&page=2'\n`}</code></pre>\n    <p>{`Passing a page size of 25 and requesting page number 2, we get the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"total\": 2403,\n    \"books\": [\n        {\n            \"id\": \"1786469960\",\n            \"title\": \"Data Visualization with D3 4.x Cookbook\",\n            \"subtitle\": null,\n            \"description\": \"Discover over 65 recipes to help you create breathtaking data visualizations using the latest features of D3...\",\n            \"language\": \"en\",\n            \"pageCount\": 370,\n            \"thumbnail\": \"http://books.google.com/books/content?id=DVQoDwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\",\n            \"price\": 22.39,\n            \"currency\": \"USD\",\n            \"infoLink\": \"https://play.google.com/store/books/details?id=DVQoDwAAQBAJ&source=gbs_api\",\n            \"authors\": [\n                \"Nick Zhu\"\n            ],\n            \"categories\": [\n                {\n                    \"id\": \"f2ada1e2-7c18-4d90-bfe7-e321b650c0a3\",\n                    \"name\": \"redis\"\n                }\n            ]\n        },\n        {\n            \"id\": \"111871735X\",\n            \"title\": \"Android Programming\",\n            \"subtitle\": \"Pushing the Limits\",\n            \"description\": \"Unleash the power of the Android OS and build the kinds ofbrilliant, innovative apps users love to use ...\",\n            \"language\": \"en\",\n            \"pageCount\": 432,\n            \"thumbnail\": \"http://books.google.com/books/content?id=SUWPAQAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\",\n            \"price\": 30.0,\n            \"currency\": \"USD\",\n            \"infoLink\": \"https://play.google.com/store/books/details?id=SUWPAQAAQBAJ&source=gbs_api\",\n            \"authors\": [\n                \"Erik Hellman\"\n            ],\n            \"categories\": [\n                {\n                    \"id\": \"47d9a769-bbc2-4068-b27f-2b800bec1565\",\n                    \"name\": \"kotlin\"\n                }\n            ]\n        },\n`}</code></pre>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\n  "]}]}