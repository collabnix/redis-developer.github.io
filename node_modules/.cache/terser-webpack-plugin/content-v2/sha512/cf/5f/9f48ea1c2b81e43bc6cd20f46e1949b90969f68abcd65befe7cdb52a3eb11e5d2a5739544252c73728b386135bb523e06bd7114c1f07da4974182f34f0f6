{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{237:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return d})),n.d(t,\"b\",(function(){return b}));var s=n(0),o=n.n(s);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,s,o=function(e,t){if(null==e)return{};var n,s,o={},a=Object.keys(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),u=function(e){var t=o.a.useContext(l),n=t;return e&&(n=\"function\"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=u(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},h={inlineCode:\"code\",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},p=o.a.forwardRef((function(e,t){var n=e.components,s=e.mdxType,a=e.originalType,r=e.parentName,l=c(e,[\"components\",\"mdxType\",\"originalType\",\"parentName\"]),d=u(n),p=s,b=d[\"\".concat(r,\".\").concat(p)]||d[p]||h[p]||a;return n?o.a.createElement(b,i(i({ref:t},l),{},{components:n})):o.a.createElement(b,i({ref:t},l))}));function b(e,t){var n=arguments,s=t&&t.mdxType;if(\"string\"==typeof e||s){var a=n.length,r=new Array(a);r[0]=p;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType=\"string\"==typeof e?e:s,r[1]=i;for(var l=2;l<a;l++)r[l]=n[l];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}p.displayName=\"MDXCreateElement\"},238:function(e,t,n){\"use strict\";n.d(t,\"b\",(function(){return a})),n.d(t,\"a\",(function(){return r}));var s=n(20),o=n(246);function a(){var e=Object(s.default)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?\"/\":t,a=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,s){var a=void 0===s?{}:s,r=a.forcePrependBaseUrl,i=void 0!==r&&r,c=a.absolute,l=void 0!==c&&c;if(!n)return n;if(n.startsWith(\"#\"))return n;if(Object(o.b)(n))return n;if(i)return t+n;var u=n.startsWith(t)?n:t+n.replace(/^\\//,\"\");return l?e+u:u}(a,n,e,t)}}}function r(e,t){return void 0===t&&(t={}),(0,a().withBaseUrl)(e,t)}},246:function(e,t,n){\"use strict\";function s(e){return!0===/^(\\w*:|\\/\\/)/.test(e)}function o(e){return void 0!==e&&!s(e)}n.d(t,\"b\",(function(){return s})),n.d(t,\"a\",(function(){return o}))},399:function(e,t,n){\"use strict\";n.r(t),t.default=n.p+\"assets/images/authenticated_checkin_attempt-dda7ba858a32459b5bf1036c3e8f7097.png\"},400:function(e,t,n){\"use strict\";n.r(t),t.default=n.p+\"assets/images/checkin_attempt_401_response-43c38047e04e90c03f93dd66f9a87b21.png\"},401:function(e,t,n){\"use strict\";n.r(t),t.default=n.p+\"assets/images/login_request-759155812731080875c661a227473961.png\"},402:function(e,t,n){\"use strict\";n.r(t),t.default=n.p+\"assets/images/local_cookie-ad2e6af0381765295e2406dfaae3c6be.png\"},403:function(e,t,n){\"use strict\";n.r(t),t.default=n.p+\"assets/images/cookie_detail-7961ca9385ecd5fb2bfc45f2477c60ac.png\"},404:function(e,t,n){\"use strict\";n.r(t),t.default=n.p+\"assets/images/authenticated_checkin_202_response-2754620cf2dcf735a2340a7a9512ba55.png\"},405:function(e,t,n){\"use strict\";n.r(t),t.default=n.p+\"assets/images/logout_request-ed887f48a08ba5b5f862e41b46d51a21.png\"},84:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"frontMatter\",(function(){return i})),n.d(t,\"metadata\",(function(){return c})),n.d(t,\"toc\",(function(){return l})),n.d(t,\"default\",(function(){return d}));var s=n(3),o=n(7),a=(n(0),n(237)),r=(n(238),[\"components\"]),i={id:\"index-sessionstorage\",title:\"Scaling an Express Application with Redis as a Session Store\",sidebar_label:\"Session Storage\",slug:\"/develop/node/nodecrashcourse/sessionstorage\"},c={unversionedId:\"develop/node/node-crash-course/sessionstorage/index-sessionstorage\",id:\"develop/node/node-crash-course/sessionstorage/index-sessionstorage\",isDocsHomePage:!1,title:\"Scaling an Express Application with Redis as a Session Store\",description:\"We're building our application as a series of components, with Redis as a data store and cache.  Most of these components talk to the user via the HTTP request / response cycle, which is inherently stateless.  However, we want to maintain state, or remember things about the user from one request to the next in some circumstances.\",source:\"@site/docs/develop/node/node-crash-course/sessionstorage/index-sessionstorage.mdx\",slug:\"/develop/node/nodecrashcourse/sessionstorage\",permalink:\"/develop/node/nodecrashcourse/sessionstorage\",editUrl:\"https://github.com/redis-developer/redis-developer/edit/master/docs/develop/node/node-crash-course/sessionstorage/index-sessionstorage.mdx\",version:\"current\",sidebar_label:\"Session Storage\",sidebar:\"docs\",previous:{title:\"Caching with Redis and Express Middleware\",permalink:\"/develop/node/nodecrashcourse/caching\"},next:{title:\"Advanced Streams: Parallel Processing Checkins with Consumer Groups\",permalink:\"/develop/node/nodecrashcourse/advancedstreams\"}},l=[{value:\"Hands-on Exercise\",id:\"hands-on-exercise\",children:[]},{value:\"External Resources\",id:\"external-resources\",children:[]}],u={toc:l};function d(e){var t=e.components,i=Object(o.a)(e,r);return Object(a.b)(\"wrapper\",Object(s.a)({},u,i,{components:t,mdxType:\"MDXLayout\"}),Object(a.b)(\"div\",{class:\"text--center\"},Object(a.b)(\"iframe\",{width:\"560\",height:\"315\",src:\"https://www.youtube.com/embed/T8xay-l4HrM\",frameborder:\"0\",allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowfullscreen:!0})),Object(a.b)(\"p\",null,\"We're building our application as a series of components, with Redis as a data store and cache.  Most of these components talk to the user via the HTTP request / response cycle, which is inherently stateless.  However, we want to maintain state, or remember things about the user from one request to the next in some circumstances.  \"),Object(a.b)(\"p\",null,\"We can identify users by having the application set a cookie in the response that is returned to the user - their browser will then attach this cookie to future requests.  This can then be used to store information about the user in a server-side session object that Express keeps track of by means of the ID in the cookie.\"),Object(a.b)(\"p\",null,\"You can think of the cookie as a sort of key, and the session object as a value.  We could store these in memory in our server, but this approach limits us to a single server instance that would lose all of session data if it were to crash and restart.\"),Object(a.b)(\"p\",null,\"Fortunately, Redis makes an excellent store for session data - it's fast and durable, and allows us to scale system components horizontally by adding more instances of them.  We've used the npm package \\\"connect-redis\\\" to add Redis as a session store for the Authentication and Checkin Receiver services, with minimal code required.\"),Object(a.b)(\"h2\",{id:\"hands-on-exercise\"},\"Hands-on Exercise\"),Object(a.b)(\"p\",null,\"In this exercise, you'll enable the authentication functionality in the Checkin Receiver service, and use Postman to establish a session with the Authentication service in order to submit an authenticated checkin to the system.\"),Object(a.b)(\"p\",null,\"First, stop the Checkin Receiver if you have it running.  Press Ctrl-C in its terminal window.\"),Object(a.b)(\"p\",null,\"Now, restart the Checkin Receiver with the optional authentication functionality enabled:\"),Object(a.b)(\"pre\",null,Object(a.b)(\"code\",{parentName:\"pre\",className:\"language-bash\"},'$ npm run checkinreceiver auth\\n\\n> js-crash-course@0.0.1 checkinreceiver \\n> node ./src/checkinreceiver.js \"auth\"\\n\\ninfo: Authentication enabled, checkins require a valid user session.\\ninfo: Checkin receiver listening on port 8082.\\n')),Object(a.b)(\"p\",null,\"Note that the Checkin Receiver reports that authentication is now enabled.\"),Object(a.b)(\"p\",null,\"In a second terminal window, cd to the node-js-crash-course directory that you cloned the project repo into, and start the Authentication Service which will listen on port 8083:\"),Object(a.b)(\"pre\",null,Object(a.b)(\"code\",{parentName:\"pre\",className:\"language-bash\"},\"$ npm run auth\\n\\n> js-crash-course@0.0.1 auth /Users/simonprickett/source/github/node-js-crash-course\\n> node ./src/auth.js\\n\\ninfo: Authentication service listening on port 8083.\\n\")),Object(a.b)(\"p\",null,\"Open up a new request in Postman, and make a POST request to perform a checkin as follows:\"),Object(a.b)(\"p\",null,Object(a.b)(\"img\",{alt:\"Authenticated Checkin Attempt\",src:n(399).default})),Object(a.b)(\"p\",null,'Click \"Send\" - this time, the Checkin Receiver service should reject the request as you haven\\'t authenticated with the system.  You should see a 401 Unauthorized response:'),Object(a.b)(\"p\",null,Object(a.b)(\"img\",{alt:\"Checkin Attempt 401 Response\",src:n(400).default})),Object(a.b)(\"p\",null,\"And in the Checkin Receiver's terminal window, you should see that it rejected your request as it couldn't find your session:\"),Object(a.b)(\"pre\",null,Object(a.b)(\"code\",{parentName:\"pre\",className:\"language-bash\"},\"debug: Rejecting checkin - no valid user session found.\\n\")),Object(a.b)(\"p\",null,\"The Checkin Receiver rejected your request because it couldn't find a value for 'user' in your request's session (check out the code in \",Object(a.b)(\"inlineCode\",{parentName:\"p\"},\"src/checkinreceiver.js\"),\").\"),Object(a.b)(\"p\",null,\"Let's try again, but this time we'll login first.  This will establish a session and we'll be able to see how that gets stored in Redis\\u2026\"),Object(a.b)(\"p\",null,\"Keep your checkin request tab in Postman, and open a new tab to create a POST request to the Authentication service.\"),Object(a.b)(\"p\",null,\"Set the URL to \",Object(a.b)(\"inlineCode\",{parentName:\"p\"},\"localhost:8083/login\"),\" and the JSON body to:\"),Object(a.b)(\"pre\",null,Object(a.b)(\"code\",{parentName:\"pre\",className:\"language-json\"},'{\"email\": \"al.appelhof@example.com\", \"password\": \"secret123\"}\\n')),Object(a.b)(\"p\",null,\"Your request should look like this:\"),Object(a.b)(\"p\",null,Object(a.b)(\"img\",{alt:\"Login Request\",src:n(401).default})),Object(a.b)(\"p\",null,'Click \"Send\" to login.  The Authentication Service will check the supplied credentials against what\\'s stored in Redis at key ',Object(a.b)(\"inlineCode\",{parentName:\"p\"},\"ncc:user:77\"),' and create a session object for that user, adding the email address to the \"user\" property in the session.  Postman should show a 200 (success) response code and the text \"OK\".'),Object(a.b)(\"p\",null,'Click the blue \"Cookies\" text in Postman, and you should see that a cookie was set for \"checkinapp\" on localhost.  Click on the \"checkinapp\" text to see the contents of the cookie:'),Object(a.b)(\"p\",null,Object(a.b)(\"img\",{alt:\"Local Cookies\",src:n(402).default}),\"\\n\",Object(a.b)(\"img\",{alt:\"Cookie Detail\",src:n(403).default})),Object(a.b)(\"p\",null,\"Now flip back to your tab in Postman that has the checkin request for user 77.  Send the request again, and this time it should succeed, as Postman will also send the cookie containing your session ID and the Checkin Receiver will then be able to validate you have an authenticated session.  This time, you should get a 202 Accepted response:\"),Object(a.b)(\"p\",null,Object(a.b)(\"img\",{alt:\"Authenticated Checkin 202 Response\",src:n(404).default})),Object(a.b)(\"p\",null,'When the Checkin Receiver got your request, it used the value in your cookie to look up and load your session from Redis (connect-redis does this for us), then checked that the session had a \"user\" property set.  Any system component that\\'s running on a localhost URL can now access your session and query and store information in it.'),Object(a.b)(\"p\",null,\"Finally, let's see what the session looks like in Redis... using redis-cli or the RedisInsight browser, find all the session keys like this:\"),Object(a.b)(\"pre\",null,Object(a.b)(\"code\",{parentName:\"pre\",className:\"language-bash\"},'127.0.0.1:6379> keys ncc:session:*\\n1) \"ncc:session:Blvc-93k2TckafgwS0IDAHfW-MPGhqyl\"\\n')),Object(a.b)(\"p\",null,\"Note that the key name contains the session ID that was in your cookie.  connect-redis manages these keys for us as Redis Strings, all our application needs to do is manipulate the request's session object.\"),Object(a.b)(\"p\",null,\"Let's see what's in our session and when it expires:\"),Object(a.b)(\"pre\",null,Object(a.b)(\"code\",{parentName:\"pre\",className:\"language-bash\"},'127.0.0.1:6379> get ncc:session:Blvc-93k2TckafgwS0IDAHfW-MPGhqyl\\n\"{\\\\\"cookie\\\\\":{\\\\\"originalMaxAge\\\\\":null,\\\\\"expires\\\\\":null,\\\\\"httpOnly\\\\\":true,\\\\\"path\\\\\":\\\\\"/\\\\\"},\\\\\"user\\\\\":\\\\\"al.appelhof@example.com\\\\\"}\"\\n127.0.0.1:6379> ttl ncc:session:Blvc-93k2TckafgwS0IDAHfW-MPGhqyl\\n(integer) 85693\\n')),Object(a.b)(\"p\",null,\"We didn't specify a session length in our code when setting up connect-redis, so it's defaulted to expiring sessions after a day.\"),Object(a.b)(\"p\",null,\"Finally, let's logout from the Authentication Service and ensure that our session data gets removed from Redis.  In Postman, create a GET request as follows and click Send:\"),Object(a.b)(\"p\",null,Object(a.b)(\"img\",{alt:\"Logout Request\",src:n(405).default})),Object(a.b)(\"p\",null,\"The code in the logout handler destroys your session, which should then disappear from Redis:\"),Object(a.b)(\"pre\",null,Object(a.b)(\"code\",{parentName:\"pre\",className:\"language-bash\"},\"127.0.0.1:6379> get ncc:session:Blvc-93k2TckafgwS0IDAHfW-MPGhqyl\\n(nil)\\n\")),Object(a.b)(\"p\",null,\"Next, we'll move on to look at how to scale up our checkin processing to cope with all these new users!\"),Object(a.b)(\"h2\",{id:\"external-resources\"},\"External Resources\"),Object(a.b)(\"ul\",null,Object(a.b)(\"li\",{parentName:\"ul\"},Object(a.b)(\"a\",{parentName:\"li\",href:\"https://www.npmjs.com/package/connect-redis\"},\"connect-redis session store package on npm\")),Object(a.b)(\"li\",{parentName:\"ul\"},Object(a.b)(\"a\",{parentName:\"li\",href:\"https://redis.com/blog/cache-vs-session-store/\"},\"Cache vs Session Store\"),\" - a blog article from Redis\")))}d.isMDXComponent=!0}}]);","name":"12853b3b.4b743524.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[19],{\n\n/***/ 237:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export MDXContext */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MDXProvider; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createElement; });\n/* unused harmony export useMDXComponents */\n/* unused harmony export withMDXComponents */\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nvar isFunction = function isFunction(obj) {\n  return typeof obj === 'function';\n};\n\nvar MDXContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext({});\nvar withMDXComponents = function withMDXComponents(Component) {\n  return function (props) {\n    var allComponents = useMDXComponents(props.components);\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Component, _extends({}, props, {\n      components: allComponents\n    }));\n  };\n};\nvar useMDXComponents = function useMDXComponents(components) {\n  var contextComponents = react__WEBPACK_IMPORTED_MODULE_0___default.a.useContext(MDXContext);\n  var allComponents = contextComponents;\n\n  if (components) {\n    allComponents = isFunction(components) ? components(contextComponents) : _objectSpread2(_objectSpread2({}, contextComponents), components);\n  }\n\n  return allComponents;\n};\nvar MDXProvider = function MDXProvider(props) {\n  var allComponents = useMDXComponents(props.components);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MDXContext.Provider, {\n    value: allComponents\n  }, props.children);\n};\n\nvar TYPE_PROP_NAME = 'mdxType';\nvar DEFAULTS = {\n  inlineCode: 'code',\n  wrapper: function wrapper(_ref) {\n    var children = _ref.children;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, {}, children);\n  }\n};\nvar MDXCreateElement = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function (props, ref) {\n  var propComponents = props.components,\n      mdxType = props.mdxType,\n      originalType = props.originalType,\n      parentName = props.parentName,\n      etc = _objectWithoutProperties(props, [\"components\", \"mdxType\", \"originalType\", \"parentName\"]);\n\n  var components = useMDXComponents(propComponents);\n  var type = mdxType;\n  var Component = components[\"\".concat(parentName, \".\").concat(type)] || components[type] || DEFAULTS[type] || originalType;\n\n  if (propComponents) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Component, _objectSpread2(_objectSpread2({\n      ref: ref\n    }, etc), {}, {\n      components: propComponents\n    }));\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Component, _objectSpread2({\n    ref: ref\n  }, etc));\n});\nMDXCreateElement.displayName = 'MDXCreateElement';\nfunction createElement (type, props) {\n  var args = arguments;\n  var mdxType = props && props.mdxType;\n\n  if (typeof type === 'string' || mdxType) {\n    var argsLength = args.length;\n    var createElementArgArray = new Array(argsLength);\n    createElementArgArray[0] = MDXCreateElement;\n    var newProps = {};\n\n    for (var key in props) {\n      if (hasOwnProperty.call(props, key)) {\n        newProps[key] = props[key];\n      }\n    }\n\n    newProps.originalType = type;\n    newProps[TYPE_PROP_NAME] = typeof type === 'string' ? type : mdxType;\n    createElementArgArray[1] = newProps;\n\n    for (var i = 2; i < argsLength; i++) {\n      createElementArgArray[i] = args[i];\n    }\n\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement.apply(null, createElementArgArray);\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement.apply(null, args);\n}\n\n\n\n\n/***/ }),\n\n/***/ 238:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return useBaseUrlUtils; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return useBaseUrl; });\n/* harmony import */ var _useDocusaurusContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20);\n/* harmony import */ var _isInternalUrl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(246);\n/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */function addBaseUrl(siteUrl,baseUrl,url,_temp){var _ref=_temp===void 0?{}:_temp,_ref$forcePrependBase=_ref.forcePrependBaseUrl,forcePrependBaseUrl=_ref$forcePrependBase===void 0?false:_ref$forcePrependBase,_ref$absolute=_ref.absolute,absolute=_ref$absolute===void 0?false:_ref$absolute;if(!url){return url;}// it never makes sense to add a base url to a local anchor url\nif(url.startsWith('#')){return url;}// it never makes sense to add a base url to an url with a protocol\nif(Object(_isInternalUrl__WEBPACK_IMPORTED_MODULE_1__[/* hasProtocol */ \"b\"])(url)){return url;}if(forcePrependBaseUrl){return baseUrl+url;}// We should avoid adding the baseurl twice if it's already there\nvar shouldAddBaseUrl=!url.startsWith(baseUrl);var basePath=shouldAddBaseUrl?baseUrl+url.replace(/^\\//,''):url;return absolute?siteUrl+basePath:basePath;}function useBaseUrlUtils(){var _useDocusaurusContext=Object(_useDocusaurusContext__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),_useDocusaurusContext2=_useDocusaurusContext.siteConfig;_useDocusaurusContext2=_useDocusaurusContext2===void 0?{}:_useDocusaurusContext2;var _useDocusaurusContext3=_useDocusaurusContext2.baseUrl,baseUrl=_useDocusaurusContext3===void 0?'/':_useDocusaurusContext3,siteUrl=_useDocusaurusContext2.url;return{withBaseUrl:function withBaseUrl(url,options){return addBaseUrl(siteUrl,baseUrl,url,options);}};}function useBaseUrl(url,options){if(options===void 0){options={};}var _useBaseUrlUtils=useBaseUrlUtils(),withBaseUrl=_useBaseUrlUtils.withBaseUrl;return withBaseUrl(url,options);}\n\n/***/ }),\n\n/***/ 246:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return hasProtocol; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return isInternalUrl; });\n/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */function hasProtocol(url){return /^(\\w*:|\\/\\/)/.test(url)===true;}function isInternalUrl(url){return typeof url!=='undefined'&&!hasProtocol(url);}\n\n/***/ }),\n\n/***/ 399:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (__webpack_require__.p + \"assets/images/authenticated_checkin_attempt-dda7ba858a32459b5bf1036c3e8f7097.png\");\n\n/***/ }),\n\n/***/ 400:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (__webpack_require__.p + \"assets/images/checkin_attempt_401_response-43c38047e04e90c03f93dd66f9a87b21.png\");\n\n/***/ }),\n\n/***/ 401:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (__webpack_require__.p + \"assets/images/login_request-759155812731080875c661a227473961.png\");\n\n/***/ }),\n\n/***/ 402:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (__webpack_require__.p + \"assets/images/local_cookie-ad2e6af0381765295e2406dfaae3c6be.png\");\n\n/***/ }),\n\n/***/ 403:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (__webpack_require__.p + \"assets/images/cookie_detail-7961ca9385ecd5fb2bfc45f2477c60ac.png\");\n\n/***/ }),\n\n/***/ 404:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (__webpack_require__.p + \"assets/images/authenticated_checkin_202_response-2754620cf2dcf735a2340a7a9512ba55.png\");\n\n/***/ }),\n\n/***/ 405:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (__webpack_require__.p + \"assets/images/logout_request-ed887f48a08ba5b5f862e41b46d51a21.png\");\n\n/***/ }),\n\n/***/ 84:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"frontMatter\", function() { return frontMatter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"metadata\", function() { return metadata; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toc\", function() { return toc; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MDXContent; });\n/* harmony import */ var _Users_ajeetraina_staging_redis_developer_github_io_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);\n/* harmony import */ var _Users_ajeetraina_staging_redis_developer_github_io_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _mdx_js_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(237);\n/* harmony import */ var _docusaurus_useBaseUrl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(238);\nvar _excluded=[\"components\"];var frontMatter={id:'index-sessionstorage',title:'Scaling an Express Application with Redis as a Session Store',sidebar_label:'Session Storage',slug:'/develop/node/nodecrashcourse/sessionstorage'};var metadata={\"unversionedId\":\"develop/node/node-crash-course/sessionstorage/index-sessionstorage\",\"id\":\"develop/node/node-crash-course/sessionstorage/index-sessionstorage\",\"isDocsHomePage\":false,\"title\":\"Scaling an Express Application with Redis as a Session Store\",\"description\":\"We're building our application as a series of components, with Redis as a data store and cache.  Most of these components talk to the user via the HTTP request / response cycle, which is inherently stateless.  However, we want to maintain state, or remember things about the user from one request to the next in some circumstances.\",\"source\":\"@site/docs/develop/node/node-crash-course/sessionstorage/index-sessionstorage.mdx\",\"slug\":\"/develop/node/nodecrashcourse/sessionstorage\",\"permalink\":\"/develop/node/nodecrashcourse/sessionstorage\",\"editUrl\":\"https://github.com/redis-developer/redis-developer/edit/master/docs/develop/node/node-crash-course/sessionstorage/index-sessionstorage.mdx\",\"version\":\"current\",\"sidebar_label\":\"Session Storage\",\"sidebar\":\"docs\",\"previous\":{\"title\":\"Caching with Redis and Express Middleware\",\"permalink\":\"/develop/node/nodecrashcourse/caching\"},\"next\":{\"title\":\"Advanced Streams: Parallel Processing Checkins with Consumer Groups\",\"permalink\":\"/develop/node/nodecrashcourse/advancedstreams\"}};/* @jsxRuntime classic */ /* @jsx mdx */var toc=[{value:'Hands-on Exercise',id:'hands-on-exercise',children:[]},{value:'External Resources',id:'external-resources',children:[]}];var layoutProps={toc:toc};var MDXLayout=\"wrapper\";function MDXContent(_ref){var components=_ref.components,props=Object(_Users_ajeetraina_staging_redis_developer_github_io_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(MDXLayout,Object(_Users_ajeetraina_staging_redis_developer_github_io_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({},layoutProps,props,{components:components,mdxType:\"MDXLayout\"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"div\",{class:\"text--center\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"iframe\",{width:\"560\",height:\"315\",src:\"https://www.youtube.com/embed/T8xay-l4HrM\",frameborder:\"0\",allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowfullscreen:true})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"We're building our application as a series of components, with Redis as a data store and cache.  Most of these components talk to the user via the HTTP request / response cycle, which is inherently stateless.  However, we want to maintain state, or remember things about the user from one request to the next in some circumstances.  \"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"We can identify users by having the application set a cookie in the response that is returned to the user - their browser will then attach this cookie to future requests.  This can then be used to store information about the user in a server-side session object that Express keeps track of by means of the ID in the cookie.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"You can think of the cookie as a sort of key, and the session object as a value.  We could store these in memory in our server, but this approach limits us to a single server instance that would lose all of session data if it were to crash and restart.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Fortunately, Redis makes an excellent store for session data - it's fast and durable, and allows us to scale system components horizontally by adding more instances of them.  We've used the npm package \\\"connect-redis\\\" to add Redis as a session store for the Authentication and Checkin Receiver services, with minimal code required.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h2\",{\"id\":\"hands-on-exercise\"},\"Hands-on Exercise\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"In this exercise, you'll enable the authentication functionality in the Checkin Receiver service, and use Postman to establish a session with the Authentication service in order to submit an authenticated checkin to the system.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"First, stop the Checkin Receiver if you have it running.  Press Ctrl-C in its terminal window.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Now, restart the Checkin Receiver with the optional authentication functionality enabled:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",{parentName:\"pre\",\"className\":\"language-bash\"},\"$ npm run checkinreceiver auth\\n\\n> js-crash-course@0.0.1 checkinreceiver \\n> node ./src/checkinreceiver.js \\\"auth\\\"\\n\\ninfo: Authentication enabled, checkins require a valid user session.\\ninfo: Checkin receiver listening on port 8082.\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Note that the Checkin Receiver reports that authentication is now enabled.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"In a second terminal window, cd to the node-js-crash-course directory that you cloned the project repo into, and start the Authentication Service which will listen on port 8083:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",{parentName:\"pre\",\"className\":\"language-bash\"},\"$ npm run auth\\n\\n> js-crash-course@0.0.1 auth /Users/simonprickett/source/github/node-js-crash-course\\n> node ./src/auth.js\\n\\ninfo: Authentication service listening on port 8083.\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Open up a new request in Postman, and make a POST request to perform a checkin as follows:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"img\",{alt:\"Authenticated Checkin Attempt\",src:__webpack_require__(399).default})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Click \\\"Send\\\" - this time, the Checkin Receiver service should reject the request as you haven't authenticated with the system.  You should see a 401 Unauthorized response:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"img\",{alt:\"Checkin Attempt 401 Response\",src:__webpack_require__(400).default})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"And in the Checkin Receiver's terminal window, you should see that it rejected your request as it couldn't find your session:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",{parentName:\"pre\",\"className\":\"language-bash\"},\"debug: Rejecting checkin - no valid user session found.\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"The Checkin Receiver rejected your request because it couldn't find a value for 'user' in your request's session (check out the code in \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"p\"},\"src/checkinreceiver.js\"),\").\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Let's try again, but this time we'll login first.  This will establish a session and we'll be able to see how that gets stored in Redis\\u2026\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Keep your checkin request tab in Postman, and open a new tab to create a POST request to the Authentication service.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Set the URL to \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"p\"},\"localhost:8083/login\"),\" and the JSON body to:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},\"{\\\"email\\\": \\\"al.appelhof@example.com\\\", \\\"password\\\": \\\"secret123\\\"}\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Your request should look like this:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"img\",{alt:\"Login Request\",src:__webpack_require__(401).default})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Click \\\"Send\\\" to login.  The Authentication Service will check the supplied credentials against what's stored in Redis at key \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"p\"},\"ncc:user:77\"),\" and create a session object for that user, adding the email address to the \\\"user\\\" property in the session.  Postman should show a 200 (success) response code and the text \\\"OK\\\".\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Click the blue \\\"Cookies\\\" text in Postman, and you should see that a cookie was set for \\\"checkinapp\\\" on localhost.  Click on the \\\"checkinapp\\\" text to see the contents of the cookie:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"img\",{alt:\"Local Cookies\",src:__webpack_require__(402).default}),\"\\n\",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"img\",{alt:\"Cookie Detail\",src:__webpack_require__(403).default})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Now flip back to your tab in Postman that has the checkin request for user 77.  Send the request again, and this time it should succeed, as Postman will also send the cookie containing your session ID and the Checkin Receiver will then be able to validate you have an authenticated session.  This time, you should get a 202 Accepted response:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"img\",{alt:\"Authenticated Checkin 202 Response\",src:__webpack_require__(404).default})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"When the Checkin Receiver got your request, it used the value in your cookie to look up and load your session from Redis (connect-redis does this for us), then checked that the session had a \\\"user\\\" property set.  Any system component that's running on a localhost URL can now access your session and query and store information in it.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Finally, let's see what the session looks like in Redis... using redis-cli or the RedisInsight browser, find all the session keys like this:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",{parentName:\"pre\",\"className\":\"language-bash\"},\"127.0.0.1:6379> keys ncc:session:*\\n1) \\\"ncc:session:Blvc-93k2TckafgwS0IDAHfW-MPGhqyl\\\"\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Note that the key name contains the session ID that was in your cookie.  connect-redis manages these keys for us as Redis Strings, all our application needs to do is manipulate the request's session object.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Let's see what's in our session and when it expires:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",{parentName:\"pre\",\"className\":\"language-bash\"},\"127.0.0.1:6379> get ncc:session:Blvc-93k2TckafgwS0IDAHfW-MPGhqyl\\n\\\"{\\\\\\\"cookie\\\\\\\":{\\\\\\\"originalMaxAge\\\\\\\":null,\\\\\\\"expires\\\\\\\":null,\\\\\\\"httpOnly\\\\\\\":true,\\\\\\\"path\\\\\\\":\\\\\\\"/\\\\\\\"},\\\\\\\"user\\\\\\\":\\\\\\\"al.appelhof@example.com\\\\\\\"}\\\"\\n127.0.0.1:6379> ttl ncc:session:Blvc-93k2TckafgwS0IDAHfW-MPGhqyl\\n(integer) 85693\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"We didn't specify a session length in our code when setting up connect-redis, so it's defaulted to expiring sessions after a day.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Finally, let's logout from the Authentication Service and ensure that our session data gets removed from Redis.  In Postman, create a GET request as follows and click Send:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"img\",{alt:\"Logout Request\",src:__webpack_require__(405).default})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"The code in the logout handler destroys your session, which should then disappear from Redis:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",{parentName:\"pre\",\"className\":\"language-bash\"},\"127.0.0.1:6379> get ncc:session:Blvc-93k2TckafgwS0IDAHfW-MPGhqyl\\n(nil)\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Next, we'll move on to look at how to scale up our checkin processing to cope with all these new users!\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h2\",{\"id\":\"external-resources\"},\"External Resources\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"ul\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",{parentName:\"li\",\"href\":\"https://www.npmjs.com/package/connect-redis\"},\"connect-redis session store package on npm\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",{parentName:\"li\",\"href\":\"https://redis.com/blog/cache-vs-session-store/\"},\"Cache vs Session Store\"),\" - a blog article from Redis\")));};MDXContent.isMDXComponent=true;\n\n/***/ })\n\n}]);","inputSourceMap":null}